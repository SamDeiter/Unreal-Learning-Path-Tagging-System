const u="feedback_v1";function r(){try{const n=localStorage.getItem(u);return n?JSON.parse(n):{}}catch{return{}}}function i(n){try{localStorage.setItem(u,JSON.stringify(n))}catch{}}function p(n,a){const t=r();t[n]||(t[n]={up:0,down:0}),t[n].up+=1,t[n].down=Math.max(0,t[n].down-1),t[n].lastQuery=a,t[n].lastUpdated=new Date().toISOString(),i(t)}function f(n,a){const t=r();t[n]||(t[n]={up:0,down:0}),t[n].down+=1,t[n].up=Math.max(0,t[n].up-1),t[n].lastQuery=a,t[n].lastUpdated=new Date().toISOString(),i(t)}function l(n){const t=r()[n];return t?t.up>t.down?"up":t.down>t.up?"down":null:null}function S(n,a){const t=l(n);return t==="down"?Math.round(a*.3):t==="up"?Math.round(a*1.3):a}function O(n,a,t=[]){const s="feedback_submissions_v1",o={id:`fb_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,type:n,description:a,fileNames:t,timestamp:new Date().toISOString()};try{const c=localStorage.getItem(s),e=c?JSON.parse(c):[];e.push(o),e.length>50&&e.splice(0,e.length-50),localStorage.setItem(s,JSON.stringify(e))}catch{}return{id:o.id,timestamp:o.timestamp}}export{S as applyFeedbackMultiplier,l as getFeedbackStatus,f as recordDownvote,O as recordFormFeedback,p as recordUpvote};
