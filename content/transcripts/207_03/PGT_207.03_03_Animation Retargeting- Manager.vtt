WEBVTT

1
00:00:00.000 --> 00:00:11.320
Okay, so we are talking about the Retarget Manager,

2
00:00:11.320 --> 00:00:13.480
and I will dive right back into Unreal,

3
00:00:14.360 --> 00:00:17.520
and let's take a look at the Infinity Blade Warriors

4
00:00:18.440 --> 00:00:20.840
and go into the Character folder,

5
00:00:21.760 --> 00:00:23.760
double-click on Complete Characters,

6
00:00:23.760 --> 00:00:26.280
and there we have our different skeletal meshes,

7
00:00:26.280 --> 00:00:27.880
our warrior people.

8
00:00:28.440 --> 00:00:33.560
And I'm actually going to first rename the skeleton,

9
00:00:33.560 --> 00:00:37.960
because if I show you the name of the skeleton

10
00:00:37.960 --> 00:00:40.960
for the base character that's in the level right now,

11
00:00:40.960 --> 00:00:44.840
and I click on the magnifying glass next to the skeletal mesh

12
00:00:44.840 --> 00:00:48.920
in the Details panel, click on that, the name is very similar.

13
00:00:48.920 --> 00:00:52.080
I can double-click on UE4 Mannequin Skeleton,

14
00:00:52.780 --> 00:00:54.560
and we will use that later,

15
00:00:54.560 --> 00:00:57.280
and I'll just keep that tab up at the top,

16
00:00:58.560 --> 00:01:01.160
and then if I go back to Third Person Example Map,

17
00:01:01.880 --> 00:01:03.880
go back to the Complete Characters folder,

18
00:01:03.880 --> 00:01:08.560
let me just click on the SK Mannequin Skeleton, hit F2,

19
00:01:09.880 --> 00:01:15.760
and let's change it to Warrior underscore Skeleton,

20
00:01:17.280 --> 00:01:19.680
so that will be easier for me to keep track of,

21
00:01:20.480 --> 00:01:23.080
and then any time you rename something,

22
00:01:23.080 --> 00:01:25.720
any time you move something, any time you delete something,

23
00:01:25.720 --> 00:01:28.520
it's a good idea to fix up the Redirectors,

24
00:01:28.520 --> 00:01:30.680
so that Unreal is up to date,

25
00:01:30.680 --> 00:01:32.840
and it's not accidentally pointing to something

26
00:01:32.840 --> 00:01:34.880
that doesn't exist anymore,

27
00:01:35.640 --> 00:01:37.600
and then I'm just going to right-click

28
00:01:37.600 --> 00:01:39.200
on the Infinity Blade Warriors,

29
00:01:40.000 --> 00:01:42.200
choose Fix Up Redirectors in the folder,

30
00:01:43.400 --> 00:01:45.000
and let it do its thing,

31
00:01:46.000 --> 00:01:49.040
and it's more applicable if I had already brought the assets

32
00:01:49.040 --> 00:01:51.360
into the level, because there's more references,

33
00:01:51.880 --> 00:01:54.200
but I just wanted to go ahead and show that to you,

34
00:01:54.200 --> 00:01:55.880
so you've got it in your back pocket.

35
00:01:57.440 --> 00:02:01.680
Okay, so Inside Character, Complete Characters,

36
00:02:01.680 --> 00:02:03.520
double-click on the Warrior Skeleton,

37
00:02:04.400 --> 00:02:06.360
and dock the tab up at the top.

38
00:02:07.440 --> 00:02:11.120
Now, I'm going to switch over to the UE4 Mannequin Skeleton tab,

39
00:02:11.720 --> 00:02:13.880
and I want to show you these sub-editors,

40
00:02:14.960 --> 00:02:18.120
because Unreal Engine 4, it contains four major tools

41
00:02:18.120 --> 00:02:21.160
for working with skeletal animations and skeletal meshes.

42
00:02:21.800 --> 00:02:27.640
The Skeleton Editor, the Skeletal Mesh Editor,

43
00:02:27.640 --> 00:02:31.760
the Animation Editor, and Animation Blueprint Editor,

44
00:02:33.600 --> 00:02:34.880
and you can access all of them

45
00:02:34.880 --> 00:02:37.800
by using the navigation breadcrumbs up at the top,

46
00:02:37.800 --> 00:02:41.120
so I can double-click, and now I'm in the Skeletal Mesh section,

47
00:02:41.120 --> 00:02:45.600
and I have a new tab, but I will close that for now,

48
00:02:45.600 --> 00:02:48.880
because if we're dealing with the Retarget Manager,

49
00:02:48.880 --> 00:02:51.800
I want you to think, okay, Skeletal Sub-Editor.

50
00:02:53.200 --> 00:02:55.920
Now, if you don't have the Retarget Manager,

51
00:02:56.800 --> 00:02:58.400
what you can do is go to Window,

52
00:03:00.840 --> 00:03:03.960
and then find the Retarget Manager, click on that,

53
00:03:05.200 --> 00:03:06.800
and then it will pop right up.

54
00:03:07.640 --> 00:03:10.200
But first, let's look at the Skeletal Tree,

55
00:03:11.480 --> 00:03:15.400
and then if I click on some of these bones,

56
00:03:16.400 --> 00:03:20.080
and I can actually go up to Character, Bones,

57
00:03:20.880 --> 00:03:23.720
and let's show the entire hierarchy for now,

58
00:03:23.720 --> 00:03:27.480
so All Hierarchy. There we go, that's easier to see.

59
00:03:29.560 --> 00:03:34.760
And I just want to point out that these finger bones

60
00:03:34.760 --> 00:03:37.600
on the middle and the pinky, they actually do exist,

61
00:03:37.600 --> 00:03:39.920
but they have zero influence on the mesh,

62
00:03:39.920 --> 00:03:41.640
and that's why they're grayed out.

63
00:03:41.680 --> 00:03:46.040
So I thought that was a clever way of using the exact same bone

64
00:03:46.040 --> 00:03:48.480
structure with different functionality

65
00:03:48.480 --> 00:03:53.680
by having different influences or lack of influences on the bones.

66
00:03:53.680 --> 00:03:57.480
So really, only the index and this middle finger

67
00:03:58.400 --> 00:04:01.040
are affecting this clump of finger geometry.

68
00:04:02.840 --> 00:04:04.640
But let's get into the Retarget Manager,

69
00:04:04.640 --> 00:04:06.600
so click on that tab,

70
00:04:06.600 --> 00:04:10.040
and do you see this section that says Setup Rig?

71
00:04:10.080 --> 00:04:13.000
This is what I mean by Bone Mapping Section,

72
00:04:13.960 --> 00:04:16.920
and first thing you have to do is select the rig

73
00:04:16.920 --> 00:04:19.320
and choose Humanoid Rig,

74
00:04:20.640 --> 00:04:25.280
and that default is actually based on the exact same bone structure

75
00:04:25.920 --> 00:04:27.080
in the base skeleton.

76
00:04:27.080 --> 00:04:30.160
So if I look at this Skeleton Tree, you'll see, okay,

77
00:04:30.160 --> 00:04:33.600
root, pelvis, spine one, two, etc.

78
00:04:33.600 --> 00:04:35.320
If I go back to Warrior Skeleton,

79
00:04:35.320 --> 00:04:38.480
look, it's the exact same thing in that Target column.

80
00:04:39.160 --> 00:04:42.720
The Source column refers to the bones of the current character.

81
00:04:43.600 --> 00:04:46.440
So what I'm going to do is hit Save up at the very top

82
00:04:48.040 --> 00:04:49.640
and click on that,

83
00:04:51.680 --> 00:04:54.920
and you might be tempted to click this Save button

84
00:04:54.920 --> 00:04:57.760
that's in the Bone Mapping section,

85
00:04:57.760 --> 00:05:01.880
but that will actually save the bone mapping to its own asset file,

86
00:05:02.720 --> 00:05:05.200
and it's useful if you have a complex setup,

87
00:05:05.200 --> 00:05:06.800
and then you can load it later,

88
00:05:07.800 --> 00:05:11.000
and if your bones have different names,

89
00:05:11.000 --> 00:05:14.400
you could try the Auto Map, and Unreal will do its best guess,

90
00:05:15.560 --> 00:05:17.800
and then there's also the Show Advanced,

91
00:05:18.680 --> 00:05:23.400
and that shows things like fingers and twist bones and IK bones,

92
00:05:23.400 --> 00:05:27.240
things like that. So I will go back and click Show Base.

93
00:05:29.840 --> 00:05:32.440
Okay, and you would think that we would be done,

94
00:05:32.440 --> 00:05:35.560
and we did the bone mapping on one character,

95
00:05:35.560 --> 00:05:38.240
so we should be able to move on to the next step,

96
00:05:38.240 --> 00:05:42.840
but we actually have to go to UE4 Manic and Skeleton

97
00:05:42.840 --> 00:05:46.560
and make sure that they are both talking to the bone mapping translator.

98
00:05:48.680 --> 00:05:51.560
So I'm going to, again, select Humanoid Rig,

99
00:05:51.560 --> 00:05:55.560
even though it's the exact same thing, right, and hit Save.

100
00:05:57.360 --> 00:06:00.720
So now these characters can talk to each other,

101
00:06:01.320 --> 00:06:03.880
but I want to be a little bit more precise

102
00:06:03.880 --> 00:06:07.880
and make sure that the motion that gets transferred looks right.

103
00:06:08.520 --> 00:06:10.480
So I will go to the Skeleton Tree,

104
00:06:10.480 --> 00:06:12.680
and I'm going to do this for both characters,

105
00:06:13.400 --> 00:06:17.920
and under Options, I will go to Show Retargeting Options,

106
00:06:18.800 --> 00:06:26.400
and I want to double check and make sure that the root is set to Animation,

107
00:06:27.360 --> 00:06:32.080
that Animation Scaled is chosen for Pelvis,

108
00:06:33.080 --> 00:06:39.280
and then everything else should be Skeleton except for the IK bones.

109
00:06:40.200 --> 00:06:42.080
Those could be set to Animation,

110
00:06:42.680 --> 00:06:46.240
and what I'll do is I will click on the IK foot root

111
00:06:47.000 --> 00:06:50.560
and right-click and recursively set that to Animation,

112
00:06:51.320 --> 00:06:54.400
and then do that one more time for the IK hand root.

113
00:06:57.160 --> 00:07:00.400
Okay, let's hit Save, and then I will explain what I just did.

114
00:07:02.080 --> 00:07:06.640
Translation Retargeting

115
00:07:06.640 --> 00:07:11.560
Now, Translation Retargeting, it's used to make sure that when we retarget,

116
00:07:11.560 --> 00:07:15.120
the motion looks appropriate for the proportions of the character.

117
00:07:15.840 --> 00:07:20.040
Now, for things like the root and IK bones,

118
00:07:20.040 --> 00:07:22.520
you want it to listen strictly to the mocap data.

119
00:07:23.520 --> 00:07:26.280
For everything except for the pelvis, usually,

120
00:07:26.280 --> 00:07:29.920
you want the bone data to also take into account

121
00:07:29.960 --> 00:07:32.280
the proportions of the current character,

122
00:07:32.280 --> 00:07:36.680
not what was on the mocap data of the original person recording the motion.

123
00:07:37.400 --> 00:07:40.600
And then Animation Scaled, it's a combination of the two,

124
00:07:41.320 --> 00:07:44.080
and that way you can listen to the mocap data

125
00:07:44.080 --> 00:07:47.440
and then multiply it by the difference in height of the pelvis.

126
00:07:48.400 --> 00:07:52.520
So we've got that. Let's do the same on the Warrior Skeleton.

127
00:07:54.040 --> 00:07:56.040
So I'm going to Skeleton Tree,

128
00:07:57.040 --> 00:08:00.000
clicking Options, Show Retargeting Options,

129
00:08:00.760 --> 00:08:02.560
leave the first one on Animation,

130
00:08:04.120 --> 00:08:07.160
change Pelvis to Animation Scaled.

131
00:08:07.840 --> 00:08:12.600
It looks like everything else is Skeleton and IK is already set to Animation.

132
00:08:12.600 --> 00:08:13.840
Good. All right.

133
00:08:13.840 --> 00:08:20.160
So let me save and I'll double check that I saved on the previous one.

134
00:08:21.200 --> 00:08:24.320
All right. So step one

135
00:08:25.320 --> 00:08:27.480
was to do the bone mapping.

136
00:08:28.040 --> 00:08:33.800
Step two is to take care of the Skeleton Tree Translation Retargeting.

137
00:08:34.600 --> 00:08:40.280
And then step three would be if the poses of our characters were different.

138
00:08:41.480 --> 00:08:45.800
Okay. We would need to make sure that they are the same.

139
00:08:45.800 --> 00:08:50.440
Otherwise, maybe the arms would be rotated too far one way or the other.

140
00:08:50.960 --> 00:08:58.080
And you can click Modify Pose and find an asset loaded on there and then retarget.

141
00:08:58.080 --> 00:09:01.280
But the pose is the same so we don't have to worry about that.

142
00:09:02.960 --> 00:09:05.520
Okay. So let's do some retargeting.

143
00:09:06.320 --> 00:09:08.240
Now there's two methods of retargeting.

144
00:09:08.960 --> 00:09:10.960
One deals with retargeting animations.

145
00:09:11.520 --> 00:09:15.920
The other has to do with telling the skeletal mesh to look at a different skeleton.

146
00:09:16.040 --> 00:09:21.120
But for this section, we'll start with just retargeting the animations.

147
00:09:23.360 --> 00:09:28.480
Now I'm going to go to my third person example map and I want to find an animation.

148
00:09:28.480 --> 00:09:33.280
So under Mannequin Animations, let's do the third person run.

149
00:09:33.280 --> 00:09:40.160
I will right click on it, go up to Retarget Anim Assets, Duplicate Anim Assets and Retarget.

150
00:09:40.160 --> 00:09:46.960
Okay. Back in our slides, you'll notice a picture of a car.

151
00:09:46.960 --> 00:09:50.400
Now this is just to remind you that this would never work.

152
00:09:51.840 --> 00:09:53.520
So the bone mapping needs to be the same.

153
00:09:55.120 --> 00:09:57.680
So that is just a reminder about that.

154
00:09:58.880 --> 00:10:05.280
Okay. So I'm back in the Retarget Manager and look, our warrior skeleton.

155
00:10:05.280 --> 00:10:07.040
It actually shows up. That's a good sign.

156
00:10:07.040 --> 00:10:08.640
So I'm going to click on that.

157
00:10:09.520 --> 00:10:15.520
I usually keep the retarget checkboxes set to default, but here's what I will do.

158
00:10:16.560 --> 00:10:25.440
Rather than it being called a third person run, how about I change third person using

159
00:10:25.440 --> 00:10:31.840
the replace functionality and change that to warrior underscore.

160
00:10:32.720 --> 00:10:36.320
Or you could choose to have a prefix or a suffix.

161
00:10:36.320 --> 00:10:41.520
And then rather than it being saved directly on the top folder level game,

162
00:10:41.520 --> 00:10:44.960
same thing as content folder, I'm going to change that.

163
00:10:47.280 --> 00:10:52.240
And let's create a new folder underneath Infinity Blade Warriors.

164
00:10:53.680 --> 00:10:57.680
Let's right click on Infinity Blade Warriors.

165
00:10:57.680 --> 00:11:01.760
Let's do a new folder and call it Animations.

166
00:11:03.200 --> 00:11:04.160
And let's put it in there.

167
00:11:04.160 --> 00:11:06.800
And hit okay.

168
00:11:09.280 --> 00:11:10.480
So we've got a new path.

169
00:11:11.520 --> 00:11:14.000
We changed the name so we don't get confused.

170
00:11:15.360 --> 00:11:16.240
Let's hit retarget.

171
00:11:17.920 --> 00:11:23.840
And then if I double click on Warrior run, ta-da, looking pretty snazzy.

172
00:11:25.440 --> 00:11:30.240
Okay. And we've got the animation sub editor open.

173
00:11:30.240 --> 00:11:31.280
I'm going to hit save.

174
00:11:32.240 --> 00:11:34.720
And let me go back to third person example map.

175
00:11:35.680 --> 00:11:39.520
And let's go back to our mannequin animations.

176
00:11:40.160 --> 00:11:43.840
And you can actually retarget multiple animations at a time.

177
00:11:43.840 --> 00:11:45.120
So let's do that.

178
00:11:45.120 --> 00:11:46.080
We did the run.

179
00:11:46.080 --> 00:11:52.560
So let me do a shift click and a control click.

180
00:11:53.280 --> 00:11:55.600
So I've got everything except for the run.

181
00:11:56.480 --> 00:12:00.560
Right click and retarget anim assets.

182
00:12:00.640 --> 00:12:02.640
Duplicate anim assets and retarget.

183
00:12:03.760 --> 00:12:05.120
Click on Warrior Skeleton.

184
00:12:06.480 --> 00:12:14.400
Replace third person with Warrior underscore.

185
00:12:15.280 --> 00:12:19.760
Change the folder directory to Infinity Blade Warriors animations.

186
00:12:21.280 --> 00:12:21.840
Hit okay.

187
00:12:22.960 --> 00:12:23.600
Retarget.

188
00:12:26.560 --> 00:12:28.720
Okay. And then let's go to that folder.

189
00:12:30.560 --> 00:12:32.720
So Infinity Blade Warriors animations.

190
00:12:33.520 --> 00:12:39.440
We could double click on it from here or we could go back to the Warrior run tab.

191
00:12:40.160 --> 00:12:45.120
And in the asset browser, we can click on other animations too.

192
00:12:46.640 --> 00:12:53.840
Cool. So I'll hit save and I'll go back to third person example map and do a control shift S.

193
00:12:54.480 --> 00:12:55.040
Save all.

194
00:12:56.000 --> 00:12:57.920
So that was one way of retargeting.

195
00:12:57.920 --> 00:13:00.160
I will show you another way in the next video.
