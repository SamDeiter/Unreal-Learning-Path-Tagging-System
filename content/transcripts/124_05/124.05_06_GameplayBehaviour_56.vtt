WEBVTT

1
00:00:00.000 --> 00:00:07.839
Hello and welcome to the next video in our exercise, in this we are going to be programming

2
00:00:07.839 --> 00:00:11.599
the gameplay behavior.

3
00:00:11.599 --> 00:00:18.760
So for this I would like you to open up GB underscore sitting now, this is our gameplay

4
00:00:18.760 --> 00:00:24.879
behavior.

5
00:00:24.879 --> 00:00:28.960
When you open it up you will get a screen just a little bit like this.

6
00:00:28.960 --> 00:00:34.320
Now this is a data-only blueprint at the moment.

7
00:00:34.320 --> 00:00:36.640
What we are going to want to do is add code.

8
00:00:36.640 --> 00:00:43.120
So if you come up here you will see that there is an option to open the full blueprint editor.

9
00:00:43.120 --> 00:00:50.879
If you click on that you should get something that looks like what we are more used to working.

10
00:00:51.840 --> 00:00:56.000
What I would like to do is first come up to the functions that are overriding.

11
00:00:56.880 --> 00:01:00.960
And what we are looking for is the on-triggered character.

12
00:01:01.600 --> 00:01:04.879
There is a number of on-finished and there is a number of untriggered.

13
00:01:05.680 --> 00:01:10.159
But different events are going to give us different pins that we are going to be able to access.

14
00:01:10.719 --> 00:01:16.960
And this isn't a task, it is part of the stature, so we are not using the variables

15
00:01:16.959 --> 00:01:19.759
and the context to get data in and out.

16
00:01:20.719 --> 00:01:23.519
So I am going to select on-triggered character.

17
00:01:25.599 --> 00:01:29.199
Now it is going to bring up this build.

18
00:01:31.119 --> 00:01:34.879
Now I am going to be referencing these values quite a few times.

19
00:01:35.439 --> 00:01:39.839
So to make it neater I am going to save out a couple of these two variables.

20
00:01:40.799 --> 00:01:43.039
So the first one I want is the power timer.

21
00:01:43.760 --> 00:01:48.560
Right hand click and you can see we have an option to promote to variant.

22
00:01:50.719 --> 00:01:53.840
If that in it creates the variable and we are good to go.

23
00:01:55.120 --> 00:01:58.880
Now the second one is the smart object owner.

24
00:01:59.439 --> 00:02:04.000
So what I would like to do is right hand click and again promote that to a variable

25
00:02:04.800 --> 00:02:08.159
and plug that in after you have it.

26
00:02:08.799 --> 00:02:16.319
Now after I have done this the first thing I want to do is turn off the collisions on the share.

27
00:02:17.359 --> 00:02:22.159
Now the collisions are going to be different smart objects.

28
00:02:22.159 --> 00:02:23.919
So I am not going to hard code it here.

29
00:02:24.479 --> 00:02:28.319
What I am going to do is drag off of the smart owner object

30
00:02:29.199 --> 00:02:32.879
and I am going to go turn off collisions.

31
00:02:33.840 --> 00:02:38.159
You can see our interface we have an option to turn off the collisions.

32
00:02:39.680 --> 00:02:44.400
So that is going to send an interface message to just turn off the collisions.

33
00:02:45.039 --> 00:02:51.359
It is a nice quick way and we will put the code on the smart object itself in a minute.

34
00:02:55.120 --> 00:03:02.240
The next thing I would like to do is I want to make sure we have the look target set up correctly.

35
00:03:03.599 --> 00:03:05.680
And we saved that variable to the AI.

36
00:03:05.680 --> 00:03:10.000
So unfortunately we are going to need to do a cast at this point to make sure that we have it.

37
00:03:10.000 --> 00:03:21.599
So I am going to drag in the avatar and I am going to cast to BP underscore NPC share from the end.

38
00:03:21.599 --> 00:03:32.159
And once I have that I am going to get off of the pit.

39
00:03:33.120 --> 00:03:40.719
And once I have that I am going to drag off and I am going to find the smart object transform.

40
00:03:44.079 --> 00:03:46.400
I am going to get the smart object transform swap.

41
00:03:46.400 --> 00:03:49.759
This is the variable that we made in that piece of pre-written code.

42
00:03:50.719 --> 00:03:58.560
And then I am going to get component by class.

43
00:04:02.159 --> 00:04:06.879
And the component that we are looking for in here is the motion warper.

44
00:04:09.359 --> 00:04:11.199
Motion warping component.

45
00:04:11.519 --> 00:04:23.599
And I am going to add or update warp target transform.

46
00:04:26.879 --> 00:04:32.800
I am going to plug that in and I am going to connect that to the cast like this.

47
00:04:34.639 --> 00:04:38.879
Now there is one last thing we need to do and that is set the warp target name.

48
00:04:39.839 --> 00:04:42.079
In this instance the name is share.

49
00:04:43.120 --> 00:04:45.519
So just set that to share.

50
00:04:47.360 --> 00:04:48.480
That is quite straightforward.

51
00:04:49.040 --> 00:04:52.719
Unfortunately this is the only non modular part at this point.

52
00:04:54.480 --> 00:05:00.159
But what we are doing is we are just updating the warp component so that we can see it play.

53
00:05:01.040 --> 00:05:08.720
Now we are all ready to play the montage.

54
00:05:09.600 --> 00:05:14.880
What I am going to do is I am going to again grab the avatar.

55
00:05:17.280 --> 00:05:25.200
And I am going to go play amy montage.

56
00:05:30.720 --> 00:05:36.720
And we have the animation montage here.

57
00:05:36.720 --> 00:05:39.680
We are going to promote this to a variable.

58
00:05:42.720 --> 00:05:46.160
And in the defaults I am going to search for sitting down.

59
00:05:48.400 --> 00:05:50.879
So that is our animation montage.

60
00:05:53.840 --> 00:05:56.800
This is the first time that we are playing animation montage.

61
00:05:57.360 --> 00:06:03.759
Now you may have noticed that we are using this animation montage node not the normal one which

62
00:06:03.759 --> 00:06:05.920
has the calculate pins for when it ends.

63
00:06:06.879 --> 00:06:11.920
That is because we are unable to use those kind of nodes within the gameplay behaviour.

64
00:06:12.879 --> 00:06:19.920
So we have to be a little bit cleverer in order to make this whole thing run correctly.

65
00:06:20.720 --> 00:06:24.240
So the first thing I am going to do is you see this return value.

66
00:06:25.199 --> 00:06:30.480
This is going to return the length of the animation in seconds.

67
00:06:31.199 --> 00:06:33.759
I am going to promote this to a variable.

68
00:06:34.560 --> 00:06:41.199
I am going to name this animation black.

69
00:06:43.600 --> 00:06:45.040
And I am going to press slide.

70
00:06:46.240 --> 00:06:49.600
So we are just running the animation and record the map.

71
00:06:49.920 --> 00:06:57.360
Next up, I will have to wait until this animation has finished running.

72
00:06:59.680 --> 00:07:02.160
And have a bit of idle time in the middle.

73
00:07:02.160 --> 00:07:11.040
So rather than having the outlet pin what I am going to do is drag off and go set timer by event.

74
00:07:11.680 --> 00:07:19.040
And we have an input for a tiny.

75
00:07:19.040 --> 00:07:25.600
So what I am going to do is grab my animation length and I am going to add to it.

76
00:07:27.360 --> 00:07:35.280
I am going to add three seconds and plug that output into the timer.

77
00:07:36.000 --> 00:07:40.240
So applying the animation, wait for however long the animation is.

78
00:07:40.800 --> 00:07:45.519
Plus three seconds and then it is going to kick off our new event.

79
00:07:46.720 --> 00:07:50.720
So I am going to drag off here and go add custom event.

80
00:07:56.400 --> 00:07:58.800
I will name this custom event.

81
00:08:00.960 --> 00:08:02.319
Stand up.

82
00:08:02.319 --> 00:08:12.639
So for this custom event, I will do two things.

83
00:08:12.639 --> 00:08:14.480
I am going to create a sequence.

84
00:08:15.439 --> 00:08:18.560
So I am going to do two things relatively immediately.

85
00:08:19.439 --> 00:08:24.240
Now the first thing I am going to do is I am going to bring in our avatar.

86
00:08:26.319 --> 00:08:27.920
And I am going to get the mesh.

87
00:08:33.120 --> 00:08:40.879
And from this I am going to play a montage.

88
00:08:42.800 --> 00:08:44.480
So and I will switch.

89
00:08:44.480 --> 00:08:46.720
I am going to plug in the montage again here.

90
00:08:49.760 --> 00:08:54.240
Now I already know the type so I do not need to use the other one.

91
00:08:54.240 --> 00:08:57.840
So it does not really matter because I am not using the outlet pin.

92
00:08:57.840 --> 00:08:59.920
I am using the sequence here before.

93
00:09:00.079 --> 00:09:06.319
But what I would like to do, what I need is this starting position and this play route.

94
00:09:07.679 --> 00:09:11.279
So what I am going to do is I am going to get the animation length.

95
00:09:12.240 --> 00:09:16.319
And I am going to plug that into the starting position.

96
00:09:17.279 --> 00:09:19.439
So that means we are going to start at the end.

97
00:09:20.639 --> 00:09:26.480
However, I do not want the play route the length to be one,

98
00:09:26.480 --> 00:09:29.039
I want it to be minus one.

99
00:09:31.840 --> 00:09:35.920
And that is so we are playing it backwards.

100
00:09:36.800 --> 00:09:41.440
So what this will go away and do is it will run the animation backwards,

101
00:09:42.320 --> 00:09:44.240
starting at the end.

102
00:09:45.440 --> 00:09:48.240
I am not worried about any of the other outlet pins I will miss.

103
00:09:48.240 --> 00:09:49.840
That is all I am using this for.

104
00:09:52.080 --> 00:09:54.399
And once this animation has run,

105
00:09:54.399 --> 00:09:56.559
we are going to have to come out of this.

106
00:09:57.759 --> 00:10:02.639
So again, I am doing what I did before and that is set timer by event.

107
00:10:06.079 --> 00:10:08.399
And we know this is going to run for the same amount of time

108
00:10:08.399 --> 00:10:12.159
so I just need to plug in the animation length.

109
00:10:14.159 --> 00:10:18.399
Now I am going to drag off, add custom event.

110
00:10:19.120 --> 00:10:21.600
And this event I am going to call stop,

111
00:10:22.000 --> 00:10:23.200
montage.

112
00:10:24.800 --> 00:10:27.519
Now there are a couple of ways that you can stop the montage,

113
00:10:27.519 --> 00:10:31.519
but our goal is to go back to the previous animation.

114
00:10:32.240 --> 00:10:35.920
Now one of the things we have not mentioned before barboring this up

115
00:10:35.920 --> 00:10:40.320
is if we were to go away and actually look at the montage itself,

116
00:10:40.320 --> 00:10:42.080
double click on the montage,

117
00:10:42.080 --> 00:10:45.200
and then we are going to go back to the animation.

118
00:10:45.200 --> 00:10:47.200
So we are going to go back to the animation.

119
00:10:47.200 --> 00:10:48.000
And the montage.

120
00:10:54.560 --> 00:10:57.360
You can see that we have a couple of pods and sobs in here.

121
00:10:58.720 --> 00:11:04.160
First one is we have our motion warping section at the top here.

122
00:11:04.160 --> 00:11:09.040
So I just add in, add state motion warping.

123
00:11:09.759 --> 00:11:11.040
So that is required.

124
00:11:12.240 --> 00:11:17.120
How to get the motion warping to work on the animation itself.

125
00:11:17.920 --> 00:11:20.960
We need to make sure that we have root motion turned on.

126
00:11:20.960 --> 00:11:23.920
So let's have a quick look at that.

127
00:11:23.920 --> 00:11:26.320
So if I was to fire that up, this is the animation.

128
00:11:26.960 --> 00:11:32.400
In the details, we need to make sure we have the enable root motion here.

129
00:11:35.520 --> 00:11:38.320
Fire that back to our montage.

130
00:11:38.960 --> 00:11:41.040
The other element that we need is

131
00:11:42.000 --> 00:11:49.839
we need to disable the enable auto blend out.

132
00:11:51.519 --> 00:11:53.279
And it's a very simple reason we're doing this.

133
00:11:53.279 --> 00:11:57.360
It's because when we play the animation, we're sitting down,

134
00:11:57.360 --> 00:12:01.120
we want the character to stay at the end of the animation.

135
00:12:01.919 --> 00:12:05.839
So we're turning off the enable auto blend out.

136
00:12:06.639 --> 00:12:11.280
However, this does also mean that we're going to have trouble

137
00:12:11.280 --> 00:12:13.120
coming out of the animation.

138
00:12:13.840 --> 00:12:19.759
Because without a blend, it's not going to seamlessly convert

139
00:12:19.759 --> 00:12:21.519
back to the animation blueprint.

140
00:12:22.480 --> 00:12:25.440
And that's why we're doing the little bit that we're doing next.

141
00:12:27.440 --> 00:12:31.440
So we went back to the sitting down, we're stopping them on touch.

142
00:12:31.440 --> 00:12:34.320
Now there is a node that will allow us to just directly

143
00:12:35.280 --> 00:12:36.560
stop the montage.

144
00:12:37.120 --> 00:12:40.960
The problem with that is it can jump back to the animation blueprint

145
00:12:41.520 --> 00:12:44.640
and it will pop out because there's no blend.

146
00:12:45.680 --> 00:12:52.960
So what I'm going to do instead is I have created another animation.

147
00:12:53.680 --> 00:12:55.440
Just call transition.

148
00:12:57.280 --> 00:12:58.960
And it goes to select here.

149
00:13:00.320 --> 00:13:01.760
There is very little to it.

150
00:13:02.720 --> 00:13:07.840
But what it is is it is the character in the idle mode,

151
00:13:08.639 --> 00:13:12.720
which means that we can now blend out this animation.

152
00:13:13.360 --> 00:13:16.080
I'm actually giving us a relatively perfect blend.

153
00:13:16.639 --> 00:13:22.319
So I've created this and all that it is is a very, very short section

154
00:13:22.319 --> 00:13:23.600
of the idle animation.

155
00:13:24.559 --> 00:13:28.159
We've the blend out automatic KNA.

156
00:13:29.039 --> 00:13:32.159
So that we don't have to have the plot at the end.

157
00:13:34.879 --> 00:13:40.799
Okay, so how I'm going to do this is again, I'm going to drag our avatar.

158
00:13:41.439 --> 00:13:44.480
Then I'm going to drag off and get this color to mesh.

159
00:13:46.879 --> 00:13:50.159
Pick any of these to color down some of this way to do that.

160
00:13:50.959 --> 00:13:52.079
And I'm going to play in one.

161
00:13:58.159 --> 00:14:01.039
So I'm going to hem into the next element out

162
00:14:02.240 --> 00:14:06.480
and move it to theÃ­amosos Location Se understandable,

163
00:14:06.480 --> 00:14:08.879
because it has to see this entire section,

164
00:14:09.120 --> 00:14:13.159
but then I'm going to match all the appeared

165
00:14:13.959 --> 00:14:18.000
video pregunta with everything else that I made here.

166
00:14:18.199 --> 00:14:21.519
And what I'm doing now is a flow-ish exchange

167
00:14:21.519 --> 00:14:33.159
and control and see.

168
00:14:33.159 --> 00:14:39.480
And thanks for sticking with us with that one, then next up we're going to finish off

169
00:14:39.480 --> 00:14:41.800
some odds and sorts and get this up to Nuremberg.

