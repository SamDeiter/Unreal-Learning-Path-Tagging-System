[
  {
    "text": "Uh hello everyone. Um welcome to my talk",
    "start": 2.56,
    "duration": 6.24
  },
  {
    "text": "and thank you for coming. Uh my name is",
    "start": 5.839,
    "duration": 6.081
  },
  {
    "text": "Zang pronounced with a Z and I am an",
    "start": 8.8,
    "duration": 5.919
  },
  {
    "text": "engineer of the core tech team at Studio",
    "start": 11.92,
    "duration": 5.76
  },
  {
    "text": "Gobo and I am representing the team here",
    "start": 14.719,
    "duration": 6.4
  },
  {
    "text": "today to tell you the story of how we",
    "start": 17.68,
    "duration": 6.24
  },
  {
    "text": "bring the terrain of the game Lego",
    "start": 21.119,
    "duration": 5.121
  },
  {
    "text": "Horizon Adventures to the Nintendo",
    "start": 23.92,
    "duration": 5.32
  },
  {
    "text": "Switch.",
    "start": 26.24,
    "duration": 3.0
  },
  {
    "text": "So you may have heard I say the word",
    "start": 30.16,
    "duration": 5.36
  },
  {
    "text": "story and that is exactly what we're",
    "start": 32.88,
    "duration": 6.64
  },
  {
    "text": "having today. Um this is not your usual",
    "start": 35.52,
    "duration": 5.84
  },
  {
    "text": "success story talk in the sense that I",
    "start": 39.52,
    "duration": 4.16
  },
  {
    "text": "won't be telling you uh do this or do",
    "start": 41.36,
    "duration": 5.359
  },
  {
    "text": "that this will lead to success etc etc.",
    "start": 43.68,
    "duration": 6.32
  },
  {
    "text": "Uh but rather it focuses on iterations",
    "start": 46.719,
    "duration": 5.441
  },
  {
    "text": "uh about what we did to solve a",
    "start": 50.0,
    "duration": 4.079
  },
  {
    "text": "particular problem to ship for the",
    "start": 52.16,
    "duration": 3.84
  },
  {
    "text": "switch platform.",
    "start": 54.079,
    "duration": 4.081
  },
  {
    "text": "Uh this involves a couple of failed",
    "start": 56.0,
    "duration": 4.559
  },
  {
    "text": "experiments as we found some assumptions",
    "start": 58.16,
    "duration": 4.879
  },
  {
    "text": "didn't work as we expected. Uh so",
    "start": 60.559,
    "duration": 5.6
  },
  {
    "text": "ultimately I hope uh that what we",
    "start": 63.039,
    "duration": 6.001
  },
  {
    "text": "discovered may be helpful for you if you",
    "start": 66.159,
    "duration": 5.201
  },
  {
    "text": "ever encounter something like this. So",
    "start": 69.04,
    "duration": 4.399
  },
  {
    "text": "without further ado, let's embark on our",
    "start": 71.36,
    "duration": 5.68
  },
  {
    "text": "Lego terrain adventures.",
    "start": 73.439,
    "duration": 5.841
  },
  {
    "text": "So now first let's start with a few",
    "start": 77.04,
    "duration": 4.48
  },
  {
    "text": "gameplay footage of the game taken from",
    "start": 79.28,
    "duration": 6.04
  },
  {
    "text": "the Nintendo Switch.",
    "start": 81.52,
    "duration": 3.8
  },
  {
    "text": "Okay, I hope you like it.",
    "start": 143.2,
    "duration": 5.08
  },
  {
    "text": "Yeah, I hope you like what you saw. It's",
    "start": 149.92,
    "duration": 5.36
  },
  {
    "text": "pretty, if I wouldn't say so myself.",
    "start": 152.319,
    "duration": 7.601
  },
  {
    "text": "Uh, now the developer, we Studio Gobo,",
    "start": 155.28,
    "duration": 8.319
  },
  {
    "text": "uh, a team based in Brighton in the UK,",
    "start": 159.92,
    "duration": 6.08
  },
  {
    "text": "uh, with many members working remotely",
    "start": 163.599,
    "duration": 5.92
  },
  {
    "text": "inside and outside of the UK. Um, we",
    "start": 166.0,
    "duration": 6.16
  },
  {
    "text": "co-developed many titles before, but",
    "start": 169.519,
    "duration": 5.44
  },
  {
    "text": "with Lego Horizon Avengers, we did",
    "start": 172.16,
    "duration": 4.64
  },
  {
    "text": "something different being the full",
    "start": 174.959,
    "duration": 4.721
  },
  {
    "text": "developer uh alongside colleagues at",
    "start": 176.8,
    "duration": 5.68
  },
  {
    "text": "Guerilla, Klo, and other partners. Uh,",
    "start": 179.68,
    "duration": 6.08
  },
  {
    "text": "as for me, I am from Hanoi, Vietnam. Uh,",
    "start": 182.48,
    "duration": 6.32
  },
  {
    "text": "in in my first half of my career, I was",
    "start": 185.76,
    "duration": 4.72
  },
  {
    "text": "a gameplay programmers working on some",
    "start": 188.8,
    "duration": 4.4
  },
  {
    "text": "mobile games. And in when I moved to the",
    "start": 190.48,
    "duration": 4.72
  },
  {
    "text": "UK, I started to work on lower level",
    "start": 193.2,
    "duration": 6.319
  },
  {
    "text": "stuff and I start to enjoy it.",
    "start": 195.2,
    "duration": 8.0
  },
  {
    "text": "Uh, so as you saw from the game footage,",
    "start": 199.519,
    "duration": 6.321
  },
  {
    "text": "Lego Horizon Adventures features a",
    "start": 203.2,
    "duration": 6.319
  },
  {
    "text": "top-down view looking over a world built",
    "start": 205.84,
    "duration": 6.72
  },
  {
    "text": "fully from Lego bricks and yes, even the",
    "start": 209.519,
    "duration": 5.44
  },
  {
    "text": "water is also brick based.",
    "start": 212.56,
    "duration": 5.52
  },
  {
    "text": "What we set out to achieve uh is the",
    "start": 214.959,
    "duration": 6.0
  },
  {
    "text": "cinematic standards at real time. Uh so",
    "start": 218.08,
    "duration": 5.36
  },
  {
    "text": "the hope is that the player is immersed",
    "start": 220.959,
    "duration": 6.321
  },
  {
    "text": "in a miniaturized and realistic",
    "start": 223.44,
    "duration": 8.24
  },
  {
    "text": "brickuilt world. Um so the platform the",
    "start": 227.28,
    "duration": 8.4
  },
  {
    "text": "platforms that we target uh are PC, PS5",
    "start": 231.68,
    "duration": 9.8
  },
  {
    "text": "and Nintendo Switch using Unreal 5.3.",
    "start": 235.68,
    "duration": 5.8
  },
  {
    "text": "So now before getting to the actual",
    "start": 241.76,
    "duration": 4.88
  },
  {
    "text": "problem solving part uh let me take you",
    "start": 244.08,
    "duration": 5.2
  },
  {
    "text": "through how the terrain was built in",
    "start": 246.64,
    "duration": 6.519
  },
  {
    "text": "Lego Horizon Adventures.",
    "start": 249.28,
    "duration": 3.879
  },
  {
    "text": "So to begin we cannot go down the route",
    "start": 253.439,
    "duration": 7.121
  },
  {
    "text": "of many Lego games before us did uh but",
    "start": 256.88,
    "duration": 7.36
  },
  {
    "text": "with uh like with the Lego miniig being",
    "start": 260.56,
    "duration": 6.24
  },
  {
    "text": "placed into the usual game setting if",
    "start": 264.24,
    "duration": 4.56
  },
  {
    "text": "you get what I mean. Uh so our art",
    "start": 266.8,
    "duration": 4.32
  },
  {
    "text": "direction is built everything is built",
    "start": 268.8,
    "duration": 5.52
  },
  {
    "text": "from brick. So what we want is",
    "start": 271.12,
    "duration": 6.48
  },
  {
    "text": "essentially um horizon terrain in brick",
    "start": 274.32,
    "duration": 6.159
  },
  {
    "text": "form.",
    "start": 277.6,
    "duration": 6.24
  },
  {
    "text": "Uh initially we wanted to use uniquely",
    "start": 280.479,
    "duration": 6.16
  },
  {
    "text": "handcrafted terrain models like this but",
    "start": 283.84,
    "duration": 6.24
  },
  {
    "text": "this was quickly dismissed due to uh it",
    "start": 286.639,
    "duration": 6.241
  },
  {
    "text": "takes a lot of effort to make uh and",
    "start": 290.08,
    "duration": 5.44
  },
  {
    "text": "each model can easily take months to",
    "start": 292.88,
    "duration": 4.319
  },
  {
    "text": "build",
    "start": 295.52,
    "duration": 3.36
  },
  {
    "text": "and also it creates a lot of noise",
    "start": 297.199,
    "duration": 6.28
  },
  {
    "text": "looking from the gameplay camera.",
    "start": 298.88,
    "duration": 4.599
  },
  {
    "text": "So our artists opted for an approach",
    "start": 303.68,
    "duration": 7.68
  },
  {
    "text": "relying on modular tiles. These modular",
    "start": 307.68,
    "duration": 6.48
  },
  {
    "text": "tiles are snapped together using strict",
    "start": 311.36,
    "duration": 6.16
  },
  {
    "text": "strict rules on size and angles. Um it's",
    "start": 314.16,
    "duration": 5.44
  },
  {
    "text": "quite a long story how we ended up",
    "start": 317.52,
    "duration": 4.32
  },
  {
    "text": "designing the terrain this way in the",
    "start": 319.6,
    "duration": 4.64
  },
  {
    "text": "perspective of art direction uh which my",
    "start": 321.84,
    "duration": 5.04
  },
  {
    "text": "colleagues James and Rich covered in the",
    "start": 324.24,
    "duration": 4.959
  },
  {
    "text": "GDC talk.",
    "start": 326.88,
    "duration": 6.0
  },
  {
    "text": "Uh but anyway going back to our problem",
    "start": 329.199,
    "duration": 7.361
  },
  {
    "text": "uh hand placing terrain uh tiles is a",
    "start": 332.88,
    "duration": 6.4
  },
  {
    "text": "exhausting and boring process. So to",
    "start": 336.56,
    "duration": 4.96
  },
  {
    "text": "assist that we have a terrain tool that",
    "start": 339.28,
    "duration": 4.72
  },
  {
    "text": "lives alongside all the Unreal Engine",
    "start": 341.52,
    "duration": 6.16
  },
  {
    "text": "level design tools. It supports painting",
    "start": 344.0,
    "duration": 7.199
  },
  {
    "text": "style interactions. So with this tool,",
    "start": 347.68,
    "duration": 5.84
  },
  {
    "text": "artists and level designers can paint",
    "start": 351.199,
    "duration": 4.961
  },
  {
    "text": "terrain patches in different tile types",
    "start": 353.52,
    "duration": 5.519
  },
  {
    "text": "and tile sets that's designed for each",
    "start": 356.16,
    "duration": 5.599
  },
  {
    "text": "biomes. I will get into this later. Uh",
    "start": 359.039,
    "duration": 4.641
  },
  {
    "text": "and the important thing is that they",
    "start": 361.759,
    "duration": 3.761
  },
  {
    "text": "have instant feedback so that they can",
    "start": 363.68,
    "duration": 4.88
  },
  {
    "text": "do experiments and explorations easily",
    "start": 365.52,
    "duration": 7.28
  },
  {
    "text": "and quickly. So here's how it looks in",
    "start": 368.56,
    "duration": 7.24
  },
  {
    "text": "action.",
    "start": 372.8,
    "duration": 3.0
  },
  {
    "text": "Right, that was the terin tool from",
    "start": 394.56,
    "duration": 6.72
  },
  {
    "text": "users perspective. Uh from a slightly",
    "start": 397.759,
    "duration": 6.081
  },
  {
    "text": "more technical perspective, the tool",
    "start": 401.28,
    "duration": 6.4
  },
  {
    "text": "output grid data. Uh as you can see in",
    "start": 403.84,
    "duration": 6.32
  },
  {
    "text": "the left hand side, it tools the",
    "start": 407.68,
    "duration": 5.28
  },
  {
    "text": "coordinate the height and the type of",
    "start": 410.16,
    "duration": 5.759
  },
  {
    "text": "each corner of the tiles. uh this grid",
    "start": 412.96,
    "duration": 5.76
  },
  {
    "text": "this grid data is persistent and is what",
    "start": 415.919,
    "duration": 5.28
  },
  {
    "text": "the terin tool operates with under the",
    "start": 418.72,
    "duration": 5.44
  },
  {
    "text": "hood. Uh so we store this data in active",
    "start": 421.199,
    "duration": 5.601
  },
  {
    "text": "called the terrain patches.",
    "start": 424.16,
    "duration": 6.319
  },
  {
    "text": "Uh this data determined uh which kind of",
    "start": 426.8,
    "duration": 7.04
  },
  {
    "text": "visual does a tile have? Uh using the",
    "start": 430.479,
    "duration": 6.081
  },
  {
    "text": "tile data and the tile set we can",
    "start": 433.84,
    "duration": 4.72
  },
  {
    "text": "generate the final terrain",
    "start": 436.56,
    "duration": 5.759
  },
  {
    "text": "representation using this data. Uh so on",
    "start": 438.56,
    "duration": 7.039
  },
  {
    "text": "the far right you can see the final",
    "start": 442.319,
    "duration": 5.681
  },
  {
    "text": "terrain representation with the tile",
    "start": 445.599,
    "duration": 5.6
  },
  {
    "text": "corners annotated uh with a few example",
    "start": 448.0,
    "duration": 5.52
  },
  {
    "text": "tiles we use to construct the terrain",
    "start": 451.199,
    "duration": 4.481
  },
  {
    "text": "patches taken from the tile set in the",
    "start": 453.52,
    "duration": 4.959
  },
  {
    "text": "middle. So a tile set basically contains",
    "start": 455.68,
    "duration": 6.56
  },
  {
    "text": "configurations for what mesh to use for",
    "start": 458.479,
    "duration": 6.72
  },
  {
    "text": "each height combination. And to avoid",
    "start": 462.24,
    "duration": 5.12
  },
  {
    "text": "repetition each of these types have",
    "start": 465.199,
    "duration": 5.601
  },
  {
    "text": "their own variances as well.",
    "start": 467.36,
    "duration": 6.0
  },
  {
    "text": "So now let's get other stuff out of the",
    "start": 470.8,
    "duration": 4.88
  },
  {
    "text": "way and let's take a look at a few tiles",
    "start": 473.36,
    "duration": 4.88
  },
  {
    "text": "to demonstrate the idea.",
    "start": 475.68,
    "duration": 5.199
  },
  {
    "text": "Uh we can see this tile has three",
    "start": 478.24,
    "duration": 5.12
  },
  {
    "text": "corners being path uh and one corner",
    "start": 480.879,
    "duration": 5.281
  },
  {
    "text": "being ground. So we should use a tile",
    "start": 483.36,
    "duration": 4.959
  },
  {
    "text": "looking like this",
    "start": 486.16,
    "duration": 4.24
  },
  {
    "text": "and so on. For this tile, same",
    "start": 488.319,
    "duration": 6.201
  },
  {
    "text": "principle, different mesh.",
    "start": 490.4,
    "duration": 4.12
  },
  {
    "text": "We also have a larger tiles with 16 x 16",
    "start": 494.72,
    "duration": 7.039
  },
  {
    "text": "or 32 by 32 dimensions as well. For",
    "start": 498.56,
    "duration": 7.52
  },
  {
    "text": "example, this one. Um, notice that that",
    "start": 501.759,
    "duration": 7.28
  },
  {
    "text": "this is a case where a corner is higher",
    "start": 506.08,
    "duration": 5.519
  },
  {
    "text": "than other corners. So, a slope mesh is",
    "start": 509.039,
    "duration": 6.161
  },
  {
    "text": "chosen. Um, so same principles are",
    "start": 511.599,
    "duration": 6.641
  },
  {
    "text": "applied for opposite cases where we want",
    "start": 515.2,
    "duration": 5.44
  },
  {
    "text": "to create more pronounced edges of the",
    "start": 518.24,
    "duration": 6.4
  },
  {
    "text": "terrain by just lowering the height.",
    "start": 520.64,
    "duration": 6.56
  },
  {
    "text": "Uh, another benefit of having terrain",
    "start": 524.64,
    "duration": 5.52
  },
  {
    "text": "data splitted from representation is",
    "start": 527.2,
    "duration": 5.199
  },
  {
    "text": "that we have a few tile sets that",
    "start": 530.16,
    "duration": 4.4
  },
  {
    "text": "represents different biomes in the game",
    "start": 532.399,
    "duration": 4.401
  },
  {
    "text": "like you see here. Uh, so our designers",
    "start": 534.56,
    "duration": 4.8
  },
  {
    "text": "can rethe the terrain packages uh,",
    "start": 536.8,
    "duration": 5.56
  },
  {
    "text": "instantly.",
    "start": 539.36,
    "duration": 3.0
  },
  {
    "text": "Now let's take an closer look at the",
    "start": 542.88,
    "duration": 5.519
  },
  {
    "text": "tiles. Uh, the terrain tiles like all",
    "start": 545.839,
    "duration": 4.721
  },
  {
    "text": "other geometry in the game is powered by",
    "start": 548.399,
    "duration": 5.44
  },
  {
    "text": "the same mesh pipeline. uh behind this",
    "start": 550.56,
    "duration": 6.56
  },
  {
    "text": "pipeline is some procedural Houdini",
    "start": 553.839,
    "duration": 5.841
  },
  {
    "text": "black magic. Uh if you interested I",
    "start": 557.12,
    "duration": 3.6
  },
  {
    "text": "would recommend checking out my",
    "start": 559.68,
    "duration": 3.92
  },
  {
    "text": "colleague Simon's talk about this topic.",
    "start": 560.72,
    "duration": 6.559
  },
  {
    "text": "But for us all we care about is that it",
    "start": 563.6,
    "duration": 6.799
  },
  {
    "text": "generates an optimized mesh for us uh",
    "start": 567.279,
    "duration": 6.481
  },
  {
    "text": "from the models being built inside a",
    "start": 570.399,
    "duration": 6.961
  },
  {
    "text": "specialized Lego modeling software.",
    "start": 573.76,
    "duration": 7.44
  },
  {
    "text": "The generated mesh lo zero is used for",
    "start": 577.36,
    "duration": 6.24
  },
  {
    "text": "high-end platform where we leverage the",
    "start": 581.2,
    "duration": 5.759
  },
  {
    "text": "cool new stuff like nanite and lumen",
    "start": 583.6,
    "duration": 5.04
  },
  {
    "text": "while",
    "start": 586.959,
    "duration": 4.801
  },
  {
    "text": "for switch we use higer loss starting",
    "start": 588.64,
    "duration": 5.68
  },
  {
    "text": "from lot one and the traditional ways of",
    "start": 591.76,
    "duration": 5.6
  },
  {
    "text": "rendering by issuing draw calls. So you",
    "start": 594.32,
    "duration": 6.56
  },
  {
    "text": "may notice that higer lots geometry do",
    "start": 597.36,
    "duration": 6.32
  },
  {
    "text": "not have the trademark Lego studs",
    "start": 600.88,
    "duration": 5.2
  },
  {
    "text": "because for switch we render the studs",
    "start": 603.68,
    "duration": 5.12
  },
  {
    "text": "by ray tracing into camerafacing",
    "start": 606.08,
    "duration": 5.28
  },
  {
    "text": "billboards in a separate pass in one",
    "start": 608.8,
    "duration": 5.76
  },
  {
    "text": "draw call. Uh so instead of rendering",
    "start": 611.36,
    "duration": 5.76
  },
  {
    "text": "studs geometry naively. Uh this is",
    "start": 614.56,
    "duration": 4.64
  },
  {
    "text": "covered by my colleague Ali in his",
    "start": 617.12,
    "duration": 4.159
  },
  {
    "text": "digital dragons talk focusing on the",
    "start": 619.2,
    "duration": 6.04
  },
  {
    "text": "rendering side of the game.",
    "start": 621.279,
    "duration": 3.961
  },
  {
    "text": "Next up, the terrain patches can also be",
    "start": 626.24,
    "duration": 4.96
  },
  {
    "text": "painted on top using the recoloring",
    "start": 628.72,
    "duration": 6.0
  },
  {
    "text": "tool. The tool supports brush style",
    "start": 631.2,
    "duration": 6.16
  },
  {
    "text": "painting and bucket style painting. Uh,",
    "start": 634.72,
    "duration": 4.559
  },
  {
    "text": "and these custom colors can also be",
    "start": 637.36,
    "duration": 5.919
  },
  {
    "text": "saved as color presets to reuse later.",
    "start": 639.279,
    "duration": 7.201
  },
  {
    "text": "Um, recoloring basically allows more",
    "start": 643.279,
    "duration": 5.601
  },
  {
    "text": "visual variety. Uh, but the artists",
    "start": 646.48,
    "duration": 4.4
  },
  {
    "text": "don't have to duplicate the model",
    "start": 648.88,
    "duration": 5.68
  },
  {
    "text": "assets. Um this feature again is not",
    "start": 650.88,
    "duration": 8.079
  },
  {
    "text": "limited to the um terrain models but all",
    "start": 654.56,
    "duration": 7.519
  },
  {
    "text": "Lego models in the project. Uh at the",
    "start": 658.959,
    "duration": 6.401
  },
  {
    "text": "moment we will not dig any deeper into",
    "start": 662.079,
    "duration": 5.921
  },
  {
    "text": "how this works. Uh Ali's talk already",
    "start": 665.36,
    "duration": 5.039
  },
  {
    "text": "cover this in depth but we will re",
    "start": 668.0,
    "duration": 3.92
  },
  {
    "text": "revisit",
    "start": 670.399,
    "duration": 4.161
  },
  {
    "text": "this later in this talk. So please",
    "start": 671.92,
    "duration": 4.72
  },
  {
    "text": "remember recoloring is a cool piece of",
    "start": 674.56,
    "duration": 4.48
  },
  {
    "text": "tech.",
    "start": 676.64,
    "duration": 4.8
  },
  {
    "text": "So for now it's enough to say our",
    "start": 679.04,
    "duration": 5.12
  },
  {
    "text": "artists have several tools to achieve",
    "start": 681.44,
    "duration": 5.6
  },
  {
    "text": "visual varieties for the terrain. Um",
    "start": 684.16,
    "duration": 5.52
  },
  {
    "text": "they have biome specific tile sets where",
    "start": 687.04,
    "duration": 5.359
  },
  {
    "text": "they can apply visual identity to each",
    "start": 689.68,
    "duration": 6.719
  },
  {
    "text": "biome using a dedicated color palette",
    "start": 692.399,
    "duration": 6.0
  },
  {
    "text": "and even shapes of bricks. For example,",
    "start": 696.399,
    "duration": 5.44
  },
  {
    "text": "the forest and Nora regions use softer",
    "start": 698.399,
    "duration": 6.481
  },
  {
    "text": "and more rounded uh brick tiles for more",
    "start": 701.839,
    "duration": 5.841
  },
  {
    "text": "friendly feel while the desert and",
    "start": 704.88,
    "duration": 6.959
  },
  {
    "text": "jungle use more angular shapes. Uh and",
    "start": 707.68,
    "duration": 6.159
  },
  {
    "text": "on top of this for each level, the color",
    "start": 711.839,
    "duration": 4.721
  },
  {
    "text": "can be painted over without adding more",
    "start": 713.839,
    "duration": 4.641
  },
  {
    "text": "stress on managing the tile models and",
    "start": 716.56,
    "duration": 5.56
  },
  {
    "text": "the tile set library.",
    "start": 718.48,
    "duration": 3.64
  },
  {
    "text": "Okay, that's a quick summary of how we",
    "start": 722.48,
    "duration": 5.2
  },
  {
    "text": "built the terrain for this project. And",
    "start": 724.959,
    "duration": 6.241
  },
  {
    "text": "the terin tool is widely used by level",
    "start": 727.68,
    "duration": 5.599
  },
  {
    "text": "designers and environment artists and it",
    "start": 731.2,
    "duration": 4.879
  },
  {
    "text": "massively sped up the work comparing to",
    "start": 733.279,
    "duration": 7.12
  },
  {
    "text": "hand placing tile models by hand.",
    "start": 736.079,
    "duration": 7.041
  },
  {
    "text": "So on high-end platforms we again we use",
    "start": 740.399,
    "duration": 4.961
  },
  {
    "text": "nanite which does a lot of heavy lifting",
    "start": 743.12,
    "duration": 4.959
  },
  {
    "text": "for us. So essentially it allows us to",
    "start": 745.36,
    "duration": 5.279
  },
  {
    "text": "not having to worry about poly poly",
    "start": 748.079,
    "duration": 5.76
  },
  {
    "text": "count or draw call or having over",
    "start": 750.639,
    "duration": 6.081
  },
  {
    "text": "overlapped models.",
    "start": 753.839,
    "duration": 5.281
  },
  {
    "text": "But on switch as you can see here in our",
    "start": 756.72,
    "duration": 5.28
  },
  {
    "text": "draw call visualization you can see that",
    "start": 759.12,
    "duration": 5.44
  },
  {
    "text": "there's a lot of unique draw calls and",
    "start": 762.0,
    "duration": 5.519
  },
  {
    "text": "sometimes draw call count on switch is",
    "start": 764.56,
    "duration": 6.079
  },
  {
    "text": "very very high reaching 8,000 straw",
    "start": 767.519,
    "duration": 6.32
  },
  {
    "text": "calls. uh and terrain like you see here",
    "start": 770.639,
    "duration": 5.841
  },
  {
    "text": "plays a good part of this due to each",
    "start": 773.839,
    "duration": 5.521
  },
  {
    "text": "terrain part uh each terrain patch",
    "start": 776.48,
    "duration": 7.56
  },
  {
    "text": "consists of many individual tiles.",
    "start": 779.36,
    "duration": 4.68
  },
  {
    "text": "So here's a screenshot of our automated",
    "start": 784.16,
    "duration": 6.72
  },
  {
    "text": "performance dashboard. Uh the top is",
    "start": 787.519,
    "duration": 5.601
  },
  {
    "text": "render thread time and the bottom is",
    "start": 790.88,
    "duration": 5.759
  },
  {
    "text": "stroal. So this shows a correlation",
    "start": 793.12,
    "duration": 6.88
  },
  {
    "text": "between these values.",
    "start": 796.639,
    "duration": 6.401
  },
  {
    "text": "So these graphs indicate we would like",
    "start": 800.0,
    "duration": 6.56
  },
  {
    "text": "to keep draw counts under 2.5,000 to",
    "start": 803.04,
    "duration": 6.08
  },
  {
    "text": "reduce stress on the render thread while",
    "start": 806.56,
    "duration": 4.8
  },
  {
    "text": "leaving some headrooms for the render",
    "start": 809.12,
    "duration": 4.959
  },
  {
    "text": "thread to do other tasks.",
    "start": 811.36,
    "duration": 4.32
  },
  {
    "text": "So this is something that we need to",
    "start": 814.079,
    "duration": 5.361
  },
  {
    "text": "sort out and while doing so we must keep",
    "start": 815.68,
    "duration": 6.48
  },
  {
    "text": "the usual workflow unchanged because the",
    "start": 819.44,
    "duration": 4.16
  },
  {
    "text": "last thing we want to do is to have",
    "start": 822.16,
    "duration": 3.52
  },
  {
    "text": "artists rebuilding different levels for",
    "start": 823.6,
    "duration": 4.799
  },
  {
    "text": "different platforms and not that we can",
    "start": 825.68,
    "duration": 4.56
  },
  {
    "text": "afford to do so either because many",
    "start": 828.399,
    "duration": 4.24
  },
  {
    "text": "levels have already got the terrain",
    "start": 830.24,
    "duration": 4.64
  },
  {
    "text": "almost finalized at this point with all",
    "start": 832.639,
    "duration": 4.161
  },
  {
    "text": "thing considered like the vista and the",
    "start": 834.88,
    "duration": 4.88
  },
  {
    "text": "play space.",
    "start": 836.8,
    "duration": 5.839
  },
  {
    "text": "So now you're somewhat familiar with the",
    "start": 839.76,
    "duration": 5.04
  },
  {
    "text": "re relevant background information. It's",
    "start": 842.639,
    "duration": 3.76
  },
  {
    "text": "time for the main part of the talk, the",
    "start": 844.8,
    "duration": 4.92
  },
  {
    "text": "terrain optimization.",
    "start": 846.399,
    "duration": 3.321
  },
  {
    "text": "So to begin with, our artists did a lot",
    "start": 849.839,
    "duration": 4.56
  },
  {
    "text": "of work to bring down the drawable",
    "start": 852.639,
    "duration": 5.2
  },
  {
    "text": "counts to they designed the level for",
    "start": 854.399,
    "duration": 6.0
  },
  {
    "text": "the switch first and then they scale up",
    "start": 857.839,
    "duration": 5.921
  },
  {
    "text": "to uh more capable platforms which is",
    "start": 860.399,
    "duration": 6.961
  },
  {
    "text": "the good mentality to start with.",
    "start": 863.76,
    "duration": 6.4
  },
  {
    "text": "To do that, they made the most use of",
    "start": 867.36,
    "duration": 5.12
  },
  {
    "text": "the fixed camera angle. So they use",
    "start": 870.16,
    "duration": 4.239
  },
  {
    "text": "larger tiles where possible. For",
    "start": 872.48,
    "duration": 6.24
  },
  {
    "text": "example, they use 32 by 32 or 16 by 16",
    "start": 874.399,
    "duration": 7.68
  },
  {
    "text": "tiles instead of 8 by8 tiles.",
    "start": 878.72,
    "duration": 7.2
  },
  {
    "text": "They also did a lot of manual iterations",
    "start": 882.079,
    "duration": 7.361
  },
  {
    "text": "to keep um the number of overlapping",
    "start": 885.92,
    "duration": 6.96
  },
  {
    "text": "terin patches or large patches with a",
    "start": 889.44,
    "duration": 7.04
  },
  {
    "text": "tiny visible portion to the minimum. Um,",
    "start": 892.88,
    "duration": 6.0
  },
  {
    "text": "so up to this point, you can tell our",
    "start": 896.48,
    "duration": 4.56
  },
  {
    "text": "artists worked under a lot of",
    "start": 898.88,
    "duration": 4.56
  },
  {
    "text": "constraints, but they were able to",
    "start": 901.04,
    "duration": 6.72
  },
  {
    "text": "optimize the draw count to around 5.6K.",
    "start": 903.44,
    "duration": 6.24
  },
  {
    "text": "Very impressive given the initial",
    "start": 907.76,
    "duration": 4.079
  },
  {
    "text": "numbers like 8Ks, but still very",
    "start": 909.68,
    "duration": 3.92
  },
  {
    "text": "offtarget,",
    "start": 911.839,
    "duration": 3.601
  },
  {
    "text": "but there's only so much that they can",
    "start": 913.6,
    "duration": 4.0
  },
  {
    "text": "do before visual quality starts to",
    "start": 915.44,
    "duration": 4.32
  },
  {
    "text": "degrade. So, they needed extra help from",
    "start": 917.6,
    "duration": 5.2
  },
  {
    "text": "us engineers.",
    "start": 919.76,
    "duration": 5.519
  },
  {
    "text": "So the first idea we had obviously to",
    "start": 922.8,
    "duration": 5.599
  },
  {
    "text": "reduce roll call instant tiles. This is",
    "start": 925.279,
    "duration": 5.601
  },
  {
    "text": "simple to integrate uh because we",
    "start": 928.399,
    "duration": 4.481
  },
  {
    "text": "already have the terin tool working on",
    "start": 930.88,
    "duration": 3.92
  },
  {
    "text": "the patch data. So instead of spawning",
    "start": 932.88,
    "duration": 3.68
  },
  {
    "text": "different static mesh components, we can",
    "start": 934.8,
    "duration": 5.12
  },
  {
    "text": "just spawn a single hierarchical",
    "start": 936.56,
    "duration": 5.68
  },
  {
    "text": "instance static mesh component and",
    "start": 939.92,
    "duration": 7.52
  },
  {
    "text": "containing all the instances of a tile.",
    "start": 942.24,
    "duration": 8.399
  },
  {
    "text": "But unfortunately a quick test shoulders",
    "start": 947.44,
    "duration": 5.92
  },
  {
    "text": "is not the case. The performance is even",
    "start": 950.639,
    "duration": 5.2
  },
  {
    "text": "worse than the non-instance versions in",
    "start": 953.36,
    "duration": 5.76
  },
  {
    "text": "many cases. Um with the render thread",
    "start": 955.839,
    "duration": 6.0
  },
  {
    "text": "cost uh particularly high in some level",
    "start": 959.12,
    "duration": 5.12
  },
  {
    "text": "for example the hub level on the top",
    "start": 961.839,
    "duration": 4.8
  },
  {
    "text": "have a stalking 19 milliseconds",
    "start": 964.24,
    "duration": 4.399
  },
  {
    "text": "increase.",
    "start": 966.639,
    "duration": 4.161
  },
  {
    "text": "So looking a bit more closely the render",
    "start": 968.639,
    "duration": 4.401
  },
  {
    "text": "thread new bottlenecks are mostly caused",
    "start": 970.8,
    "duration": 7.76
  },
  {
    "text": "by HISM from the view visibility work to",
    "start": 973.04,
    "duration": 8.4
  },
  {
    "text": "the dynamic shadow work. So that is one",
    "start": 978.56,
    "duration": 5.279
  },
  {
    "text": "part of the problem the CPU side. How",
    "start": 981.44,
    "duration": 5.36
  },
  {
    "text": "about the GPU side?",
    "start": 983.839,
    "duration": 5.44
  },
  {
    "text": "Well the GPU side is also suffering as",
    "start": 986.8,
    "duration": 5.68
  },
  {
    "text": "well. Um probably related to the higer",
    "start": 989.279,
    "duration": 6.961
  },
  {
    "text": "primitive count uh because sometimes the",
    "start": 992.48,
    "duration": 6.32
  },
  {
    "text": "entire instance cluster is render",
    "start": 996.24,
    "duration": 4.88
  },
  {
    "text": "despite only having a few pixels end up",
    "start": 998.8,
    "duration": 4.56
  },
  {
    "text": "being visible",
    "start": 1001.12,
    "duration": 6.56
  },
  {
    "text": "and in addition uh HISM has a few extra",
    "start": 1003.36,
    "duration": 7.36
  },
  {
    "text": "vertex attributes like you see here. Um",
    "start": 1007.68,
    "duration": 5.44
  },
  {
    "text": "so it cost more stores fetching all",
    "start": 1010.72,
    "duration": 6.32
  },
  {
    "text": "these vertex attributes into GPU. Uh a",
    "start": 1013.12,
    "duration": 5.839
  },
  {
    "text": "background information is that vertex",
    "start": 1017.04,
    "duration": 4.32
  },
  {
    "text": "cost is a big problem for us in this",
    "start": 1018.959,
    "duration": 5.281
  },
  {
    "text": "project and multiple teams have chipped",
    "start": 1021.36,
    "duration": 5.92
  },
  {
    "text": "in to solve this. For example, take art",
    "start": 1024.24,
    "duration": 5.839
  },
  {
    "text": "helped bringing mesh complexity down uh",
    "start": 1027.28,
    "duration": 5.039
  },
  {
    "text": "while the rendering team employed some",
    "start": 1030.079,
    "duration": 5.6
  },
  {
    "text": "optimization such as 16 bit floating",
    "start": 1032.319,
    "duration": 6.081
  },
  {
    "text": "point vertex position. So anything that",
    "start": 1035.679,
    "duration": 5.52
  },
  {
    "text": "causes more stress on the memory",
    "start": 1038.4,
    "duration": 4.48
  },
  {
    "text": "bandwidth side of thing is not going to",
    "start": 1041.199,
    "duration": 3.921
  },
  {
    "text": "fly because essentially it's just undo",
    "start": 1042.88,
    "duration": 5.84
  },
  {
    "text": "all that other optimization.",
    "start": 1045.12,
    "duration": 7.04
  },
  {
    "text": "So sadly we had to park this direction",
    "start": 1048.72,
    "duration": 6.4
  },
  {
    "text": "but uh your mileage may vary uh because",
    "start": 1052.16,
    "duration": 4.16
  },
  {
    "text": "I heard that there were a lot of",
    "start": 1055.12,
    "duration": 3.28
  },
  {
    "text": "improvements on how the engine handles",
    "start": 1056.32,
    "duration": 5.04
  },
  {
    "text": "instancing since 5.3. So make sure to",
    "start": 1058.4,
    "duration": 5.84
  },
  {
    "text": "profile in your case. um perhaps your",
    "start": 1061.36,
    "duration": 5.6
  },
  {
    "text": "vertex processing cost is not as high as",
    "start": 1064.24,
    "duration": 5.52
  },
  {
    "text": "ours. So the cost for extra attributes",
    "start": 1066.96,
    "duration": 6.48
  },
  {
    "text": "is not even a concern.",
    "start": 1069.76,
    "duration": 6.48
  },
  {
    "text": "So the second idea we had is to generate",
    "start": 1073.44,
    "duration": 6.16
  },
  {
    "text": "a unique Lego model per terin patch.",
    "start": 1076.24,
    "duration": 5.2
  },
  {
    "text": "However, it would involve somewhat a",
    "start": 1079.6,
    "duration": 4.4
  },
  {
    "text": "complicated data transformation process",
    "start": 1081.44,
    "duration": 4.88
  },
  {
    "text": "as you can see here and that is not very",
    "start": 1084.0,
    "duration": 4.559
  },
  {
    "text": "efficient.",
    "start": 1086.32,
    "duration": 5.04
  },
  {
    "text": "But more importantly the sheer number of",
    "start": 1088.559,
    "duration": 5.841
  },
  {
    "text": "assets uh being added is what going to",
    "start": 1091.36,
    "duration": 6.48
  },
  {
    "text": "put us off. So to demonstrate we have",
    "start": 1094.4,
    "duration": 7.68
  },
  {
    "text": "around 150 levels containing the terrain",
    "start": 1097.84,
    "duration": 7.839
  },
  {
    "text": "with number of terrain patches per level",
    "start": 1102.08,
    "duration": 6.0
  },
  {
    "text": "uh around a few dozens.",
    "start": 1105.679,
    "duration": 4.801
  },
  {
    "text": "This means we will have thousands of",
    "start": 1108.08,
    "duration": 4.0
  },
  {
    "text": "Lego models each of them very",
    "start": 1110.48,
    "duration": 3.92
  },
  {
    "text": "complicated as they are merged together",
    "start": 1112.08,
    "duration": 5.839
  },
  {
    "text": "from simpler models. uh to compare we",
    "start": 1114.4,
    "duration": 7.04
  },
  {
    "text": "have around 500 tile models across all",
    "start": 1117.919,
    "duration": 6.481
  },
  {
    "text": "tile sets we have in the entire project.",
    "start": 1121.44,
    "duration": 5.44
  },
  {
    "text": "So all of these already cost us around",
    "start": 1124.4,
    "duration": 5.68
  },
  {
    "text": "800 megabytes for the asset size in",
    "start": 1126.88,
    "duration": 6.08
  },
  {
    "text": "editor. So the prospect of having uh",
    "start": 1130.08,
    "duration": 5.2
  },
  {
    "text": "thousands of extra terin models looks",
    "start": 1132.96,
    "duration": 5.28
  },
  {
    "text": "very scary.",
    "start": 1135.28,
    "duration": 6.0
  },
  {
    "text": "So at this point we took a step back and",
    "start": 1138.24,
    "duration": 6.64
  },
  {
    "text": "look at our scene. Uh so here is a",
    "start": 1141.28,
    "duration": 6.48
  },
  {
    "text": "example scene I have having the close by",
    "start": 1144.88,
    "duration": 5.52
  },
  {
    "text": "terrain patches rendering in high detail",
    "start": 1147.76,
    "duration": 5.68
  },
  {
    "text": "is not an issue for us",
    "start": 1150.4,
    "duration": 6.0
  },
  {
    "text": "but it is more of an issue for distant",
    "start": 1153.44,
    "duration": 5.76
  },
  {
    "text": "patches and with the help of depth of",
    "start": 1156.4,
    "duration": 4.48
  },
  {
    "text": "field they are going to be blurry",
    "start": 1159.2,
    "duration": 4.88
  },
  {
    "text": "anyway. So we set out to explore the",
    "start": 1160.88,
    "duration": 6.24
  },
  {
    "text": "third idea which we call proxy mesh. Uh",
    "start": 1164.08,
    "duration": 5.36
  },
  {
    "text": "the idea is similar to the hitch loss",
    "start": 1167.12,
    "duration": 5.6
  },
  {
    "text": "system in Unreal's world partition uh in",
    "start": 1169.44,
    "duration": 5.68
  },
  {
    "text": "a sense that far away patches are",
    "start": 1172.72,
    "duration": 5.44
  },
  {
    "text": "swapped to a merged and simplified",
    "start": 1175.12,
    "duration": 5.76
  },
  {
    "text": "version.",
    "start": 1178.16,
    "duration": 5.04
  },
  {
    "text": "So to do this the first part of the",
    "start": 1180.88,
    "duration": 4.799
  },
  {
    "text": "puzzle is obviously how to merge these",
    "start": 1183.2,
    "duration": 5.2
  },
  {
    "text": "meshes together. Here are a few options",
    "start": 1185.679,
    "duration": 5.441
  },
  {
    "text": "available for us. Uh so Houdini probably",
    "start": 1188.4,
    "duration": 6.56
  },
  {
    "text": "needs no introduction but for other two",
    "start": 1191.12,
    "duration": 6.24
  },
  {
    "text": "in case you don't know uh mesh merge",
    "start": 1194.96,
    "duration": 5.12
  },
  {
    "text": "utilities is the logic toolkit behind",
    "start": 1197.36,
    "duration": 5.84
  },
  {
    "text": "the engine's built-in actor merging tool",
    "start": 1200.08,
    "duration": 7.44
  },
  {
    "text": "while dynamic mesh powers many in engine",
    "start": 1203.2,
    "duration": 8.08
  },
  {
    "text": "um mesh editing operations from the uh",
    "start": 1207.52,
    "duration": 6.159
  },
  {
    "text": "modeling tool to the ability to",
    "start": 1211.28,
    "duration": 5.04
  },
  {
    "text": "manipulate geometry using scripting like",
    "start": 1213.679,
    "duration": 4.481
  },
  {
    "text": "blueprint",
    "start": 1216.32,
    "duration": 4.4
  },
  {
    "text": "or python.",
    "start": 1218.16,
    "duration": 2.56
  },
  {
    "text": "So long story short, we ended up",
    "start": 1221.2,
    "duration": 4.32
  },
  {
    "text": "choosing to work with the dynamic mesh",
    "start": 1223.039,
    "duration": 5.281
  },
  {
    "text": "format. Uh it stands out for this use",
    "start": 1225.52,
    "duration": 5.6
  },
  {
    "text": "case because it provides some sorts of",
    "start": 1228.32,
    "duration": 5.359
  },
  {
    "text": "balancing because it provides more",
    "start": 1231.12,
    "duration": 5.76
  },
  {
    "text": "flexibility than mesh merge utilities",
    "start": 1233.679,
    "duration": 5.601
  },
  {
    "text": "but it doesn't require invoking an",
    "start": 1236.88,
    "duration": 4.88
  },
  {
    "text": "accidental process or requiring any sort",
    "start": 1239.28,
    "duration": 6.0
  },
  {
    "text": "of um data round trip like Hudini. So I",
    "start": 1241.76,
    "duration": 5.44
  },
  {
    "text": "prepared a few snippets to demonstrate",
    "start": 1245.28,
    "duration": 6.0
  },
  {
    "text": "it in action. So let's see how it goes.",
    "start": 1247.2,
    "duration": 6.64
  },
  {
    "text": "Cool. So here is the first snippet I I",
    "start": 1251.28,
    "duration": 5.04
  },
  {
    "text": "added for merging the individual tiles",
    "start": 1253.84,
    "duration": 5.04
  },
  {
    "text": "together. It's very simple because like",
    "start": 1256.32,
    "duration": 5.44
  },
  {
    "text": "I said there are many built-in engine",
    "start": 1258.88,
    "duration": 5.679
  },
  {
    "text": "operations that works with the dynamic",
    "start": 1261.76,
    "duration": 6.56
  },
  {
    "text": "mesh format including a few geometry",
    "start": 1264.559,
    "duration": 5.6
  },
  {
    "text": "script helper functions that you see",
    "start": 1268.32,
    "duration": 5.52
  },
  {
    "text": "here. All this snippet does is to take",
    "start": 1270.159,
    "duration": 7.681
  },
  {
    "text": "the individual static meshes, copy it to",
    "start": 1273.84,
    "duration": 6.88
  },
  {
    "text": "a dynamic mesh.",
    "start": 1277.84,
    "duration": 6.0
  },
  {
    "text": "You can also choose the lot of the",
    "start": 1280.72,
    "duration": 5.6
  },
  {
    "text": "source mesh to copy over to the dynamic",
    "start": 1283.84,
    "duration": 5.28
  },
  {
    "text": "mesh as well.",
    "start": 1286.32,
    "duration": 5.599
  },
  {
    "text": "Then I just append the current tile mesh",
    "start": 1289.12,
    "duration": 7.2
  },
  {
    "text": "to a merge mesh. So which later gets",
    "start": 1291.919,
    "duration": 6.961
  },
  {
    "text": "copied to a static mesh asset when",
    "start": 1296.32,
    "duration": 5.76
  },
  {
    "text": "finished. So at this point it's ready to",
    "start": 1298.88,
    "duration": 6.24
  },
  {
    "text": "use in engine.",
    "start": 1302.08,
    "duration": 5.76
  },
  {
    "text": "And yay this is what we have the the",
    "start": 1305.12,
    "duration": 5.12
  },
  {
    "text": "first part of the puzzle solved. Uh I'm",
    "start": 1307.84,
    "duration": 5.68
  },
  {
    "text": "using lot zero to demonstrate the idea",
    "start": 1310.24,
    "duration": 5.76
  },
  {
    "text": "but in reality we use the highest",
    "start": 1313.52,
    "duration": 6.8
  },
  {
    "text": "possible lot to reduce poly count.",
    "start": 1316.0,
    "duration": 6.48
  },
  {
    "text": "So the second part of the puzzle is to",
    "start": 1320.32,
    "duration": 4.719
  },
  {
    "text": "actually display the merged mesh at",
    "start": 1322.48,
    "duration": 5.28
  },
  {
    "text": "runtime. I use a very simple algorithm",
    "start": 1325.039,
    "duration": 4.88
  },
  {
    "text": "based on the bounding box of the terrain",
    "start": 1327.76,
    "duration": 5.68
  },
  {
    "text": "patch uh to determine if the size is",
    "start": 1329.919,
    "duration": 5.521
  },
  {
    "text": "below a certain threshold is going to be",
    "start": 1333.44,
    "duration": 4.8
  },
  {
    "text": "small. If all the vertices of the",
    "start": 1335.44,
    "duration": 5.44
  },
  {
    "text": "bounding box is behind a far depth of",
    "start": 1338.24,
    "duration": 5.919
  },
  {
    "text": "field plane a an imaginary plane uh like",
    "start": 1340.88,
    "duration": 6.159
  },
  {
    "text": "the image in the bottom left it would be",
    "start": 1344.159,
    "duration": 6.241
  },
  {
    "text": "considered distant as well. So if a",
    "start": 1347.039,
    "duration": 5.841
  },
  {
    "text": "patch is either outside the of the",
    "start": 1350.4,
    "duration": 5.44
  },
  {
    "text": "viewport completely or either distant",
    "start": 1352.88,
    "duration": 5.36
  },
  {
    "text": "and small uh we will show it in proxy",
    "start": 1355.84,
    "duration": 4.88
  },
  {
    "text": "mode. So by showing in proxy mode I just",
    "start": 1358.24,
    "duration": 4.0
  },
  {
    "text": "mean that hiding all the individual",
    "start": 1360.72,
    "duration": 3.839
  },
  {
    "text": "tiles and showing the merge mesh and",
    "start": 1362.24,
    "duration": 5.64
  },
  {
    "text": "vice versa.",
    "start": 1364.559,
    "duration": 3.321
  },
  {
    "text": "So this allows us to whip up a very",
    "start": 1368.08,
    "duration": 4.959
  },
  {
    "text": "quick prototype to test out the number",
    "start": 1370.72,
    "duration": 6.319
  },
  {
    "text": "on device with a constant depth of field",
    "start": 1373.039,
    "duration": 6.801
  },
  {
    "text": "distance. So this is a test level where",
    "start": 1377.039,
    "duration": 4.88
  },
  {
    "text": "I get all the terrain patches in our hub",
    "start": 1379.84,
    "duration": 4.4
  },
  {
    "text": "level. Uh which is the most complicated",
    "start": 1381.919,
    "duration": 4.961
  },
  {
    "text": "level in the project in terms of terrain",
    "start": 1384.24,
    "duration": 6.08
  },
  {
    "text": "or in general sorry.",
    "start": 1386.88,
    "duration": 7.2
  },
  {
    "text": "Um we can see that um the draw thread",
    "start": 1390.32,
    "duration": 6.4
  },
  {
    "text": "cost uh is already coming down. Uh it",
    "start": 1394.08,
    "duration": 6.4
  },
  {
    "text": "ranging anywhere from 0.5 to 2.5",
    "start": 1396.72,
    "duration": 5.92
  },
  {
    "text": "milliseconds depending on where the",
    "start": 1400.48,
    "duration": 4.88
  },
  {
    "text": "character stands of course. uh but it",
    "start": 1402.64,
    "duration": 6.72
  },
  {
    "text": "does kick up GPU time and triangle count",
    "start": 1405.36,
    "duration": 6.48
  },
  {
    "text": "uh but that is expected and we have some",
    "start": 1409.36,
    "duration": 5.52
  },
  {
    "text": "ideas to improve.",
    "start": 1411.84,
    "duration": 6.16
  },
  {
    "text": "So the first idea is that as a patch can",
    "start": 1414.88,
    "duration": 6.08
  },
  {
    "text": "get quite big uh but just a fraction of",
    "start": 1418.0,
    "duration": 5.28
  },
  {
    "text": "it being visible in the viewport. So",
    "start": 1420.96,
    "duration": 4.8
  },
  {
    "text": "sending a big mesh over is kind of",
    "start": 1423.28,
    "duration": 5.2
  },
  {
    "text": "wasteful. Uh so the issue here is",
    "start": 1425.76,
    "duration": 5.36
  },
  {
    "text": "similar to the instancing cluster",
    "start": 1428.48,
    "duration": 5.28
  },
  {
    "text": "problem that we faced earlier. uh",
    "start": 1431.12,
    "duration": 6.24
  },
  {
    "text": "because CPU side cooling cannot reliably",
    "start": 1433.76,
    "duration": 6.399
  },
  {
    "text": "decide if this mesh is worth sending",
    "start": 1437.36,
    "duration": 5.76
  },
  {
    "text": "over to the GPU to render. So we can aid",
    "start": 1440.159,
    "duration": 6.481
  },
  {
    "text": "this process by splitting the patches in",
    "start": 1443.12,
    "duration": 7.679
  },
  {
    "text": "into smaller chunks. So doing this alone",
    "start": 1446.64,
    "duration": 5.919
  },
  {
    "text": "already helps bringing the poly count",
    "start": 1450.799,
    "duration": 4.48
  },
  {
    "text": "and GPU time down closer to the base",
    "start": 1452.559,
    "duration": 6.24
  },
  {
    "text": "level. So if you look into the primitive",
    "start": 1455.279,
    "duration": 6.721
  },
  {
    "text": "count is very close to the base level as",
    "start": 1458.799,
    "duration": 6.321
  },
  {
    "text": "well. And with teard releasing more",
    "start": 1462.0,
    "duration": 6.32
  },
  {
    "text": "optimized version of the higer lords the",
    "start": 1465.12,
    "duration": 4.64
  },
  {
    "text": "poly count will be brought out even",
    "start": 1468.32,
    "duration": 3.28
  },
  {
    "text": "further as well. So this is not",
    "start": 1469.76,
    "duration": 6.039
  },
  {
    "text": "something we're too worried about.",
    "start": 1471.6,
    "duration": 4.199
  },
  {
    "text": "Okay now we are content with the",
    "start": 1475.84,
    "duration": 5.76
  },
  {
    "text": "performance characteristics of this",
    "start": 1479.6,
    "duration": 4.319
  },
  {
    "text": "direction. We can start to think about",
    "start": 1481.6,
    "duration": 4.72
  },
  {
    "text": "how we can rule this out without",
    "start": 1483.919,
    "duration": 5.36
  },
  {
    "text": "affecting the artist workflow.",
    "start": 1486.32,
    "duration": 6.4
  },
  {
    "text": "So with what we have so far, it's quite",
    "start": 1489.279,
    "duration": 6.4
  },
  {
    "text": "easy to employ the auto regenerate on",
    "start": 1492.72,
    "duration": 5.52
  },
  {
    "text": "safe mechanism uh similar to how",
    "start": 1495.679,
    "duration": 7.521
  },
  {
    "text": "Unreal's hord handles is proxy measures.",
    "start": 1498.24,
    "duration": 7.84
  },
  {
    "text": "And to avoid generating everything in a",
    "start": 1503.2,
    "duration": 5.92
  },
  {
    "text": "level unsafe, which can take a while and",
    "start": 1506.08,
    "duration": 6.16
  },
  {
    "text": "more scary piss off the artists, we",
    "start": 1509.12,
    "duration": 5.439
  },
  {
    "text": "store the checksum of the terrain",
    "start": 1512.24,
    "duration": 5.6
  },
  {
    "text": "patches to quickly determine those that",
    "start": 1514.559,
    "duration": 7.201
  },
  {
    "text": "were changed during the edit.",
    "start": 1517.84,
    "duration": 7.12
  },
  {
    "text": "We also have a nightly team city job",
    "start": 1521.76,
    "duration": 5.2
  },
  {
    "text": "that does a scan through all the levels",
    "start": 1524.96,
    "duration": 4.16
  },
  {
    "text": "of the game and update the terrain",
    "start": 1526.96,
    "duration": 5.52
  },
  {
    "text": "patches in these levels as needed.",
    "start": 1529.12,
    "duration": 5.28
  },
  {
    "text": "Um, occasionally we still need to",
    "start": 1532.48,
    "duration": 4.64
  },
  {
    "text": "manually trigger the job where these",
    "start": 1534.4,
    "duration": 6.24
  },
  {
    "text": "proxy meshes can be forced regenerated.",
    "start": 1537.12,
    "duration": 6.4
  },
  {
    "text": "Uh, for instance, if we want to do some",
    "start": 1540.64,
    "duration": 5.2
  },
  {
    "text": "breaking changes in the code or in any",
    "start": 1543.52,
    "duration": 4.48
  },
  {
    "text": "of the data uh, but that is something we",
    "start": 1545.84,
    "duration": 5.199
  },
  {
    "text": "do overnight. Uh, and we can live with",
    "start": 1548.0,
    "duration": 5.76
  },
  {
    "text": "this inconvenience every once in a",
    "start": 1551.039,
    "duration": 5.721
  },
  {
    "text": "while.",
    "start": 1553.76,
    "duration": 3.0
  },
  {
    "text": "Then we want to be a bit more mindful",
    "start": 1557.039,
    "duration": 6.64
  },
  {
    "text": "about the asset size. Uh to do this we",
    "start": 1560.08,
    "duration": 7.76
  },
  {
    "text": "did several things. Um the hagest lots",
    "start": 1563.679,
    "duration": 7.041
  },
  {
    "text": "as I mentioned sever several slides ago",
    "start": 1567.84,
    "duration": 5.52
  },
  {
    "text": "has been very optimized at this stage",
    "start": 1570.72,
    "duration": 4.4
  },
  {
    "text": "thanks to the work our takeoff team put",
    "start": 1573.36,
    "duration": 5.52
  },
  {
    "text": "in. But once the mesh is merged there's",
    "start": 1575.12,
    "duration": 7.12
  },
  {
    "text": "always extra room for further reduction",
    "start": 1578.88,
    "duration": 6.08
  },
  {
    "text": "settings.",
    "start": 1582.24,
    "duration": 5.52
  },
  {
    "text": "uh unused UV channels are stripped out",
    "start": 1584.96,
    "duration": 5.04
  },
  {
    "text": "as well. I will touch on this in a",
    "start": 1587.76,
    "duration": 4.08
  },
  {
    "text": "minute. But in the meantime, let's see",
    "start": 1590.0,
    "duration": 5.6
  },
  {
    "text": "others other options. Um we can strip",
    "start": 1591.84,
    "duration": 6.8
  },
  {
    "text": "out ray tracing acceleration structure",
    "start": 1595.6,
    "duration": 4.64
  },
  {
    "text": "uh for the generated mesh as well",
    "start": 1598.64,
    "duration": 3.12
  },
  {
    "text": "because it's not like we are doing any",
    "start": 1600.24,
    "duration": 6.24
  },
  {
    "text": "fancy realtime ray tracing or switch.",
    "start": 1601.76,
    "duration": 8.159
  },
  {
    "text": "Uh next up, navigation and collision is",
    "start": 1606.48,
    "duration": 5.76
  },
  {
    "text": "not needed either. uh because these",
    "start": 1609.919,
    "duration": 5.36
  },
  {
    "text": "meshes are only displayed at a very far",
    "start": 1612.24,
    "duration": 4.72
  },
  {
    "text": "distance and the character does not",
    "start": 1615.279,
    "duration": 3.681
  },
  {
    "text": "stand on them. And furthermore, the",
    "start": 1616.96,
    "duration": 4.8
  },
  {
    "text": "original tiles with navigation and",
    "start": 1618.96,
    "duration": 4.88
  },
  {
    "text": "collision enabled is still there.",
    "start": 1621.76,
    "duration": 5.919
  },
  {
    "text": "They're just hidden.",
    "start": 1623.84,
    "duration": 6.48
  },
  {
    "text": "And also earlier in the project, we made",
    "start": 1627.679,
    "duration": 5.201
  },
  {
    "text": "a decision not to use the mesh distance",
    "start": 1630.32,
    "duration": 4.719
  },
  {
    "text": "field on switch as well. If I recall",
    "start": 1632.88,
    "duration": 5.039
  },
  {
    "text": "correctly, it was adding like 2.5",
    "start": 1635.039,
    "duration": 4.801
  },
  {
    "text": "milliseconds for the base pass or",
    "start": 1637.919,
    "duration": 3.76
  },
  {
    "text": "something like that.",
    "start": 1639.84,
    "duration": 4.64
  },
  {
    "text": "So that goes as well.",
    "start": 1641.679,
    "duration": 4.801
  },
  {
    "text": "The the thing to take away from this is",
    "start": 1644.48,
    "duration": 5.28
  },
  {
    "text": "the last four items are turned on by",
    "start": 1646.48,
    "duration": 6.319
  },
  {
    "text": "default. So this can be easily missed",
    "start": 1649.76,
    "duration": 6.08
  },
  {
    "text": "and take a lot of space unnecessarily in",
    "start": 1652.799,
    "duration": 5.521
  },
  {
    "text": "our cartridge. So this is something",
    "start": 1655.84,
    "duration": 6.64
  },
  {
    "text": "probably worth looking out for.",
    "start": 1658.32,
    "duration": 8.0
  },
  {
    "text": "So all of these save like 90%",
    "start": 1662.48,
    "duration": 6.079
  },
  {
    "text": "of the asset size. For example, all the",
    "start": 1666.32,
    "duration": 5.76
  },
  {
    "text": "proxy measures in the hub went from um",
    "start": 1668.559,
    "duration": 8.441
  },
  {
    "text": "100 megabytes to 8 mgabytes.",
    "start": 1672.08,
    "duration": 4.92
  },
  {
    "text": "Okay, so with all of this, we can be",
    "start": 1677.52,
    "duration": 4.399
  },
  {
    "text": "more confident in the idea and start",
    "start": 1679.84,
    "duration": 5.199
  },
  {
    "text": "tying up loose knots in terms of quality",
    "start": 1681.919,
    "duration": 5.441
  },
  {
    "text": "and correctness. So I hope that you",
    "start": 1685.039,
    "duration": 5.52
  },
  {
    "text": "still remember our recoloring feature.",
    "start": 1687.36,
    "duration": 5.28
  },
  {
    "text": "uh because the first issue we notice is",
    "start": 1690.559,
    "duration": 4.961
  },
  {
    "text": "the correctness of the recolored terrain",
    "start": 1692.64,
    "duration": 6.72
  },
  {
    "text": "patches as highlighted here.",
    "start": 1695.52,
    "duration": 6.72
  },
  {
    "text": "So now is the time for a super quick",
    "start": 1699.36,
    "duration": 5.679
  },
  {
    "text": "explanation of how recoloring works. So",
    "start": 1702.24,
    "duration": 6.72
  },
  {
    "text": "to start with the Houdini mesh pipeline",
    "start": 1705.039,
    "duration": 7.281
  },
  {
    "text": "stores the Lego color ID in UV channel",
    "start": 1708.96,
    "duration": 6.719
  },
  {
    "text": "one and brick ID in UV channel 2 of the",
    "start": 1712.32,
    "duration": 5.839
  },
  {
    "text": "vertex.",
    "start": 1715.679,
    "duration": 5.201
  },
  {
    "text": "If a model is recolored, it scene proxy",
    "start": 1718.159,
    "duration": 5.52
  },
  {
    "text": "has a lookup buffer specifying which",
    "start": 1720.88,
    "duration": 7.36
  },
  {
    "text": "color does the brick has eventually.",
    "start": 1723.679,
    "duration": 8.0
  },
  {
    "text": "Then the color ID either from UV1 as a",
    "start": 1728.24,
    "duration": 5.76
  },
  {
    "text": "base color or looked up from the",
    "start": 1731.679,
    "duration": 4.801
  },
  {
    "text": "recoloring buffer is then used to look",
    "start": 1734.0,
    "duration": 5.679
  },
  {
    "text": "up the actual RGB value in a material",
    "start": 1736.48,
    "duration": 6.079
  },
  {
    "text": "parameter collection.",
    "start": 1739.679,
    "duration": 5.041
  },
  {
    "text": "So for proxy meshes, we don't want any",
    "start": 1742.559,
    "duration": 4.561
  },
  {
    "text": "of these dynamic lookup. we will just",
    "start": 1744.72,
    "duration": 5.36
  },
  {
    "text": "write everything down to UV1 and we can",
    "start": 1747.12,
    "duration": 7.76
  },
  {
    "text": "reuse the existing uh material. Um aside",
    "start": 1750.08,
    "duration": 7.839
  },
  {
    "text": "from cheaper runtime rendering cost, we",
    "start": 1754.88,
    "duration": 6.159
  },
  {
    "text": "can reduce memory footprint and package",
    "start": 1757.919,
    "duration": 6.561
  },
  {
    "text": "size by removing UV2 as well. So this is",
    "start": 1761.039,
    "duration": 5.841
  },
  {
    "text": "the remove unused UV thing that I",
    "start": 1764.48,
    "duration": 4.559
  },
  {
    "text": "mentioned a few slides ago among other",
    "start": 1766.88,
    "duration": 4.399
  },
  {
    "text": "stuff.",
    "start": 1769.039,
    "duration": 5.201
  },
  {
    "text": "So here is a test I'm I'm going to use.",
    "start": 1771.279,
    "duration": 6.4
  },
  {
    "text": "It's like the worst case scenario test",
    "start": 1774.24,
    "duration": 6.159
  },
  {
    "text": "because for terrain our artists mostly",
    "start": 1777.679,
    "duration": 5.521
  },
  {
    "text": "use bucket coloring instead of painting",
    "start": 1780.399,
    "duration": 5.441
  },
  {
    "text": "them into arbitrary color strips like",
    "start": 1783.2,
    "duration": 5.839
  },
  {
    "text": "this. So if this test case passes we",
    "start": 1785.84,
    "duration": 6.16
  },
  {
    "text": "should be good in production.",
    "start": 1789.039,
    "duration": 6.0
  },
  {
    "text": "So circling back to our mesh merging",
    "start": 1792.0,
    "duration": 6.08
  },
  {
    "text": "code so far dynamic mesh does not",
    "start": 1795.039,
    "duration": 5.841
  },
  {
    "text": "standing out uh comparing to simple",
    "start": 1798.08,
    "duration": 5.12
  },
  {
    "text": "utilities like the mesh merge. uh but",
    "start": 1800.88,
    "duration": 4.24
  },
  {
    "text": "now it start to do so by providing the",
    "start": 1803.2,
    "duration": 4.959
  },
  {
    "text": "mesh editing mechanism. The edit mesh",
    "start": 1805.12,
    "duration": 5.76
  },
  {
    "text": "function is quite flexible. All it",
    "start": 1808.159,
    "duration": 5.361
  },
  {
    "text": "requires is just a lambda to define what",
    "start": 1810.88,
    "duration": 6.0
  },
  {
    "text": "do you want to do with the mesh.",
    "start": 1813.52,
    "duration": 6.159
  },
  {
    "text": "So here's how the lambda being passed to",
    "start": 1816.88,
    "duration": 5.519
  },
  {
    "text": "the edit mesh looks like. Uh the logic",
    "start": 1819.679,
    "duration": 5.841
  },
  {
    "text": "is what we discussed before. uh we just",
    "start": 1822.399,
    "duration": 5.76
  },
  {
    "text": "fetch the expected color value using",
    "start": 1825.52,
    "duration": 5.44
  },
  {
    "text": "brick id from UV2 and then the",
    "start": 1828.159,
    "duration": 4.801
  },
  {
    "text": "recoloring buffer and then write the",
    "start": 1830.96,
    "duration": 5.76
  },
  {
    "text": "value down to UV1.",
    "start": 1832.96,
    "duration": 6.959
  },
  {
    "text": "So with a very few simple function pools",
    "start": 1836.72,
    "duration": 5.76
  },
  {
    "text": "we can manipulate the mesh in engine. So",
    "start": 1839.919,
    "duration": 4.801
  },
  {
    "text": "we just touching like scratching the",
    "start": 1842.48,
    "duration": 5.679
  },
  {
    "text": "surface in here. Um the dyn dynamic mesh",
    "start": 1844.72,
    "duration": 6.88
  },
  {
    "text": "is a very powerful format which uh the",
    "start": 1848.159,
    "duration": 7.361
  },
  {
    "text": "potential is very large.",
    "start": 1851.6,
    "duration": 6.319
  },
  {
    "text": "So one little tip here is to make sure",
    "start": 1855.52,
    "duration": 4.32
  },
  {
    "text": "to access the elements via the",
    "start": 1857.919,
    "duration": 4.961
  },
  {
    "text": "persistent vertex and triangle IDs. The",
    "start": 1859.84,
    "duration": 5.439
  },
  {
    "text": "reason is that the vertex the same",
    "start": 1862.88,
    "duration": 4.799
  },
  {
    "text": "vertex may end up uh in different",
    "start": 1865.279,
    "duration": 5.76
  },
  {
    "text": "element ID in different UV layers.",
    "start": 1867.679,
    "duration": 5.681
  },
  {
    "text": "So if you assume the same element ID",
    "start": 1871.039,
    "duration": 4.24
  },
  {
    "text": "across different UV layers pointing to",
    "start": 1873.36,
    "duration": 4.24
  },
  {
    "text": "the same vertex, the result will be",
    "start": 1875.279,
    "duration": 4.4
  },
  {
    "text": "wrong because I found out about this the",
    "start": 1877.6,
    "duration": 3.6
  },
  {
    "text": "hard way by actually making the",
    "start": 1879.679,
    "duration": 4.24
  },
  {
    "text": "mistakes. So this is how the mistake",
    "start": 1881.2,
    "duration": 5.76
  },
  {
    "text": "looks like. The final vertex color gets",
    "start": 1883.919,
    "duration": 5.441
  },
  {
    "text": "written to the wrong element uh causing",
    "start": 1886.96,
    "duration": 4.0
  },
  {
    "text": "we a triangle to show up in the final",
    "start": 1889.36,
    "duration": 4.6
  },
  {
    "text": "mesh.",
    "start": 1890.96,
    "duration": 3.0
  },
  {
    "text": "So the next improvement we made is a",
    "start": 1894.0,
    "duration": 4.799
  },
  {
    "text": "dynamic draw distance because so far",
    "start": 1896.88,
    "duration": 5.36
  },
  {
    "text": "what we have here is a constant uh doof",
    "start": 1898.799,
    "duration": 6.081
  },
  {
    "text": "distance. So this aims to utilize our",
    "start": 1902.24,
    "duration": 5.52
  },
  {
    "text": "awesome camera framework. Uh it's",
    "start": 1904.88,
    "duration": 5.279
  },
  {
    "text": "dynamic because many things can",
    "start": 1907.76,
    "duration": 4.72
  },
  {
    "text": "influence the camera such as player one",
    "start": 1910.159,
    "duration": 5.201
  },
  {
    "text": "and two in co-op mode uh or interesting",
    "start": 1912.48,
    "duration": 7.6
  },
  {
    "text": "points on the map or entities in combat.",
    "start": 1915.36,
    "duration": 7.36
  },
  {
    "text": "It is also very customizable because the",
    "start": 1920.08,
    "duration": 4.56
  },
  {
    "text": "designers have lots of tweaks to",
    "start": 1922.72,
    "duration": 5.36
  },
  {
    "text": "showcase the world. Um, and lastly, it",
    "start": 1924.64,
    "duration": 6.8
  },
  {
    "text": "covers a very large range of context",
    "start": 1928.08,
    "duration": 7.52
  },
  {
    "text": "from usual map discovering uh to combat",
    "start": 1931.44,
    "duration": 7.839
  },
  {
    "text": "to boss fight and cinematics and etc.",
    "start": 1935.6,
    "duration": 7.679
  },
  {
    "text": "So, it's very thorough.",
    "start": 1939.279,
    "duration": 8.4
  },
  {
    "text": "So, we need a dynamic distance. Um, so",
    "start": 1943.279,
    "duration": 6.481
  },
  {
    "text": "it turns out to be easier than I thought",
    "start": 1947.679,
    "duration": 4.081
  },
  {
    "text": "because everything eventually get based",
    "start": 1949.76,
    "duration": 3.919
  },
  {
    "text": "down to the built-in scenic camera",
    "start": 1951.76,
    "duration": 4.24
  },
  {
    "text": "component which already has all kind of",
    "start": 1953.679,
    "duration": 5.761
  },
  {
    "text": "info. Um, so I hijacked this formula in",
    "start": 1956.0,
    "duration": 6.96
  },
  {
    "text": "the doof post-process shader and then I",
    "start": 1959.44,
    "duration": 5.68
  },
  {
    "text": "whack in a kind of buffer distance in",
    "start": 1962.96,
    "duration": 4.24
  },
  {
    "text": "there just to be sure that the doof",
    "start": 1965.12,
    "duration": 4.399
  },
  {
    "text": "distance is far enough to avoid any",
    "start": 1967.2,
    "duration": 4.479
  },
  {
    "text": "noticeable popping. Uh, and we're ready",
    "start": 1969.519,
    "duration": 4.801
  },
  {
    "text": "to go. That buffer distance is totally",
    "start": 1971.679,
    "duration": 5.761
  },
  {
    "text": "optional. if you can have that or not.",
    "start": 1974.32,
    "duration": 7.599
  },
  {
    "text": "So, here's the dynamic draw in action.",
    "start": 1977.44,
    "duration": 6.8
  },
  {
    "text": "Um, you can see that the purple plane",
    "start": 1981.919,
    "duration": 4.961
  },
  {
    "text": "does move around in different camera",
    "start": 1984.24,
    "duration": 4.159
  },
  {
    "text": "situations",
    "start": 1986.88,
    "duration": 4.56
  },
  {
    "text": "uh based on the camera settings in each",
    "start": 1988.399,
    "duration": 6.041
  },
  {
    "text": "frame.",
    "start": 1991.44,
    "duration": 3.0
  },
  {
    "text": "We're nearly there. We started rolling",
    "start": 1995.84,
    "duration": 6.16
  },
  {
    "text": "this tech out to several levels as a",
    "start": 1998.64,
    "duration": 6.32
  },
  {
    "text": "final step test. Starting with levels",
    "start": 2002.0,
    "duration": 6.32
  },
  {
    "text": "like the hub or a few most raw cobbound",
    "start": 2004.96,
    "duration": 6.0
  },
  {
    "text": "levels in the project according to our",
    "start": 2008.32,
    "duration": 5.359
  },
  {
    "text": "performance dashboard. We were very",
    "start": 2010.96,
    "duration": 4.719
  },
  {
    "text": "happy to see the relevant performance",
    "start": 2013.679,
    "duration": 5.84
  },
  {
    "text": "metric starts to pick up overnight. Then",
    "start": 2015.679,
    "duration": 6.0
  },
  {
    "text": "the the promising signs are there. It's",
    "start": 2019.519,
    "duration": 3.921
  },
  {
    "text": "just a matter of rolling it out for",
    "start": 2021.679,
    "duration": 3.6
  },
  {
    "text": "other levels for more win across the",
    "start": 2023.44,
    "duration": 5.2
  },
  {
    "text": "board. So in the end it added about 90",
    "start": 2025.279,
    "duration": 6.0
  },
  {
    "text": "megabytes for all generated terrain",
    "start": 2028.64,
    "duration": 4.8
  },
  {
    "text": "proxy meshes in the project which is",
    "start": 2031.279,
    "duration": 4.64
  },
  {
    "text": "still acceptable given the uh",
    "start": 2033.44,
    "duration": 7.0
  },
  {
    "text": "improvement in runtime that it brings.",
    "start": 2035.919,
    "duration": 4.521
  },
  {
    "text": "Okay. So before we close off I want to",
    "start": 2040.48,
    "duration": 8.639
  },
  {
    "text": "introduce a fun problem. We observe that",
    "start": 2045.76,
    "duration": 7.68
  },
  {
    "text": "for some levels um the terrain proxy",
    "start": 2049.119,
    "duration": 7.921
  },
  {
    "text": "runtime code uh which toggle uh the",
    "start": 2053.44,
    "duration": 6.8
  },
  {
    "text": "proxy meshes on and off causes and a",
    "start": 2057.04,
    "duration": 6.16
  },
  {
    "text": "frame hitches. Uh this is reproducible",
    "start": 2060.24,
    "duration": 5.839
  },
  {
    "text": "for dense areas with lots of static mesh",
    "start": 2063.2,
    "duration": 4.719
  },
  {
    "text": "component being set visible invisible at",
    "start": 2066.079,
    "duration": 5.84
  },
  {
    "text": "any time. So turns out set visibility is",
    "start": 2067.919,
    "duration": 7.2
  },
  {
    "text": "not exactly free. So allow me to explain",
    "start": 2071.919,
    "duration": 6.561
  },
  {
    "text": "what happens here. So number one is",
    "start": 2075.119,
    "duration": 6.72
  },
  {
    "text": "where the terrain system issuing set",
    "start": 2078.48,
    "duration": 7.439
  },
  {
    "text": "visibility calls. These calls are not",
    "start": 2081.839,
    "duration": 7.601
  },
  {
    "text": "processed uh individually but the game",
    "start": 2085.919,
    "duration": 5.92
  },
  {
    "text": "thread will send them into the render",
    "start": 2089.44,
    "duration": 4.32
  },
  {
    "text": "thread in a batch as you can see in",
    "start": 2091.839,
    "duration": 4.881
  },
  {
    "text": "number two at the end of the frame. In",
    "start": 2093.76,
    "duration": 5.2
  },
  {
    "text": "number three is the render thread",
    "start": 2096.72,
    "duration": 6.72
  },
  {
    "text": "actually process these requests. Uh so",
    "start": 2098.96,
    "duration": 7.68
  },
  {
    "text": "it does it by firstly deallocating the",
    "start": 2103.44,
    "duration": 6.0
  },
  {
    "text": "proxies for components being set",
    "start": 2106.64,
    "duration": 6.16
  },
  {
    "text": "invisible and allocate and setting up",
    "start": 2109.44,
    "duration": 6.159
  },
  {
    "text": "new proxies for uh components being set",
    "start": 2112.8,
    "duration": 6.559
  },
  {
    "text": "visible. Uh so what we have in return is",
    "start": 2115.599,
    "duration": 6.0
  },
  {
    "text": "number four where the game thread has to",
    "start": 2119.359,
    "duration": 4.641
  },
  {
    "text": "wait for an huge amount of time for the",
    "start": 2121.599,
    "duration": 6.721
  },
  {
    "text": "render thread to finish the work.",
    "start": 2124.0,
    "duration": 7.2
  },
  {
    "text": "So there's a obvious solution is to cap",
    "start": 2128.32,
    "duration": 4.72
  },
  {
    "text": "the number of components being set",
    "start": 2131.2,
    "duration": 4.72
  },
  {
    "text": "visible visible or invisible every frame",
    "start": 2133.04,
    "duration": 5.52
  },
  {
    "text": "or if you prefer the posh name",
    "start": 2135.92,
    "duration": 5.84
  },
  {
    "text": "staggering update. Um",
    "start": 2138.56,
    "duration": 5.44
  },
  {
    "text": "but there's a question almost all",
    "start": 2141.76,
    "duration": 4.56
  },
  {
    "text": "programmers out there will ask can we do",
    "start": 2144.0,
    "duration": 4.88
  },
  {
    "text": "any better than this?",
    "start": 2146.32,
    "duration": 5.68
  },
  {
    "text": "So I embark on this journey. Uh I",
    "start": 2148.88,
    "duration": 5.92
  },
  {
    "text": "searched through the Unreal codebase. I",
    "start": 2152.0,
    "duration": 5.119
  },
  {
    "text": "found out that something potentially",
    "start": 2154.8,
    "duration": 5.36
  },
  {
    "text": "useful which is the scene views",
    "start": 2157.119,
    "duration": 6.96
  },
  {
    "text": "primitive visibility map which um get",
    "start": 2160.16,
    "duration": 6.48
  },
  {
    "text": "used in several different passes in the",
    "start": 2164.079,
    "duration": 5.04
  },
  {
    "text": "render thread such as occlusion cooling",
    "start": 2166.64,
    "duration": 4.56
  },
  {
    "text": "or fading primitive. So seems like a",
    "start": 2169.119,
    "duration": 5.121
  },
  {
    "text": "natural fit to this. So I tried a custom",
    "start": 2171.2,
    "duration": 5.76
  },
  {
    "text": "visibility pass which the sin view",
    "start": 2174.24,
    "duration": 5.76
  },
  {
    "text": "extensions can override. This is running",
    "start": 2176.96,
    "duration": 4.879
  },
  {
    "text": "somewhere in the render thread where it",
    "start": 2180.0,
    "duration": 4.24
  },
  {
    "text": "makes sense. But the general idea is",
    "start": 2181.839,
    "duration": 5.201
  },
  {
    "text": "that in the terrain system I don't issue",
    "start": 2184.24,
    "duration": 5.599
  },
  {
    "text": "set visibility calls but to use that",
    "start": 2187.04,
    "duration": 5.52
  },
  {
    "text": "custom uh scene extension to show and",
    "start": 2189.839,
    "duration": 6.881
  },
  {
    "text": "hide the components. Um the idea is that",
    "start": 2192.56,
    "duration": 6.96
  },
  {
    "text": "all components proxies are kept alive in",
    "start": 2196.72,
    "duration": 4.96
  },
  {
    "text": "the render thread. So what I hope to see",
    "start": 2199.52,
    "duration": 4.96
  },
  {
    "text": "is that now I don't have to pay the cost",
    "start": 2201.68,
    "duration": 5.12
  },
  {
    "text": "for allocating and setting up these",
    "start": 2204.48,
    "duration": 4.4
  },
  {
    "text": "scene proxies every now and then. It",
    "start": 2206.8,
    "duration": 6.4
  },
  {
    "text": "would be less hitchy. So the answer is",
    "start": 2208.88,
    "duration": 7.12
  },
  {
    "text": "well yes and no. Uh it does become less",
    "start": 2213.2,
    "duration": 5.919
  },
  {
    "text": "hitchy. Problem solved, right? But um if",
    "start": 2216.0,
    "duration": 4.72
  },
  {
    "text": "you look into the far right, but the",
    "start": 2219.119,
    "duration": 5.121
  },
  {
    "text": "base cost is much higher due to more",
    "start": 2220.72,
    "duration": 6.24
  },
  {
    "text": "primitives being processed every frame.",
    "start": 2224.24,
    "duration": 4.879
  },
  {
    "text": "So we can try different solutions here",
    "start": 2226.96,
    "duration": 4.159
  },
  {
    "text": "like moving the custom visibility",
    "start": 2229.119,
    "duration": 4.72
  },
  {
    "text": "visibility pass around uh before or",
    "start": 2231.119,
    "duration": 5.841
  },
  {
    "text": "after the cooling passes to uh reduce",
    "start": 2233.839,
    "duration": 5.441
  },
  {
    "text": "the number of primitives being",
    "start": 2236.96,
    "duration": 5.44
  },
  {
    "text": "processed. Um but that doesn't really",
    "start": 2239.28,
    "duration": 5.839
  },
  {
    "text": "help either at we as we found on the",
    "start": 2242.4,
    "duration": 5.679
  },
  {
    "text": "real tests uh the sheer number of",
    "start": 2245.119,
    "duration": 5.201
  },
  {
    "text": "primitives being processed is simply too",
    "start": 2248.079,
    "duration": 6.0
  },
  {
    "text": "high and also it ask like 40 megabytes",
    "start": 2250.32,
    "duration": 6.4
  },
  {
    "text": "into the runtime memory.",
    "start": 2254.079,
    "duration": 5.28
  },
  {
    "text": "So to answer the previous question well",
    "start": 2256.72,
    "duration": 7.119
  },
  {
    "text": "unfortunately unfortunately not",
    "start": 2259.359,
    "duration": 7.121
  },
  {
    "text": "okay that's really it that has been a",
    "start": 2263.839,
    "duration": 7.041
  },
  {
    "text": "while. Um, so what went well here is",
    "start": 2266.48,
    "duration": 7.2
  },
  {
    "text": "that we did hit the performance target",
    "start": 2270.88,
    "duration": 5.04
  },
  {
    "text": "with very little quality loss and our",
    "start": 2273.68,
    "duration": 4.32
  },
  {
    "text": "artists with their trained eyes cannot",
    "start": 2275.92,
    "duration": 4.96
  },
  {
    "text": "see any popping either. So good. Uh, the",
    "start": 2278.0,
    "duration": 4.8
  },
  {
    "text": "only price that we pay is some extra",
    "start": 2280.88,
    "duration": 4.32
  },
  {
    "text": "megabytes in the final package. That's",
    "start": 2282.8,
    "duration": 5.44
  },
  {
    "text": "not something too outrageous. Um, and it",
    "start": 2285.2,
    "duration": 6.879
  },
  {
    "text": "is automated for the most part. So zero",
    "start": 2288.24,
    "duration": 6.48
  },
  {
    "text": "artist overhead is required and artists",
    "start": 2292.079,
    "duration": 4.481
  },
  {
    "text": "can focus on doing what they are good",
    "start": 2294.72,
    "duration": 4.84
  },
  {
    "text": "at.",
    "start": 2296.56,
    "duration": 3.0
  },
  {
    "text": "Okay. In closing, I have walked you",
    "start": 2299.599,
    "duration": 7.121
  },
  {
    "text": "through our thought process into solving",
    "start": 2304.24,
    "duration": 5.28
  },
  {
    "text": "one specific problem take into account",
    "start": 2306.72,
    "duration": 6.32
  },
  {
    "text": "all of our goals and constraints.",
    "start": 2309.52,
    "duration": 6.64
  },
  {
    "text": "And we sometimes stumbled into failed",
    "start": 2313.04,
    "duration": 5.12
  },
  {
    "text": "experiments. But in my opinion, that's",
    "start": 2316.16,
    "duration": 3.84
  },
  {
    "text": "okay because sometimes it's just helpful",
    "start": 2318.16,
    "duration": 4.56
  },
  {
    "text": "to know a way that doesn't work as we",
    "start": 2320.0,
    "duration": 5.2
  },
  {
    "text": "expected.",
    "start": 2322.72,
    "duration": 5.76
  },
  {
    "text": "Uh when it comes to optimization",
    "start": 2325.2,
    "duration": 5.68
  },
  {
    "text": "experimenting, I think nothing beats",
    "start": 2328.48,
    "duration": 5.2
  },
  {
    "text": "iteration. So as you can see, we did it",
    "start": 2330.88,
    "duration": 5.04
  },
  {
    "text": "frequently during this journey and we",
    "start": 2333.68,
    "duration": 5.2
  },
  {
    "text": "look into the results in an analytical",
    "start": 2335.92,
    "duration": 6.72
  },
  {
    "text": "way to guide us to the next step.",
    "start": 2338.88,
    "duration": 6.64
  },
  {
    "text": "Also, as you can see, our solutions are",
    "start": 2342.64,
    "duration": 6.08
  },
  {
    "text": "not rocket science at all. They are just",
    "start": 2345.52,
    "duration": 6.319
  },
  {
    "text": "very small, simple solutions string",
    "start": 2348.72,
    "duration": 5.359
  },
  {
    "text": "together into a bigger solution that",
    "start": 2351.839,
    "duration": 4.961
  },
  {
    "text": "works, but they will turn out to be the",
    "start": 2354.079,
    "duration": 6.641
  },
  {
    "text": "solution that we are looking for.",
    "start": 2356.8,
    "duration": 6.48
  },
  {
    "text": "And lastly, time for some sentimental",
    "start": 2360.72,
    "duration": 5.68
  },
  {
    "text": "remarks. Uh, optimization is a team",
    "start": 2363.28,
    "duration": 5.68
  },
  {
    "text": "effort. This is one of many problems",
    "start": 2366.4,
    "duration": 4.56
  },
  {
    "text": "that we solved to ship the game on",
    "start": 2368.96,
    "duration": 4.8
  },
  {
    "text": "switch and it already involves people",
    "start": 2370.96,
    "duration": 5.2
  },
  {
    "text": "from this different disciplines uh from",
    "start": 2373.76,
    "duration": 5.04
  },
  {
    "text": "tech art to environment art to",
    "start": 2376.16,
    "duration": 4.48
  },
  {
    "text": "engineering. So I would like to take",
    "start": 2378.8,
    "duration": 4.64
  },
  {
    "text": "this opportunity to thank them to be",
    "start": 2380.64,
    "duration": 5.04
  },
  {
    "text": "awesome teammates and make all of this",
    "start": 2383.44,
    "duration": 5.72
  },
  {
    "text": "process enjoyable.",
    "start": 2385.68,
    "duration": 3.48
  },
  {
    "text": "Ah, I lied. That was the last uh the",
    "start": 2389.44,
    "duration": 5.28
  },
  {
    "text": "last tip is to never name anything with",
    "start": 2392.0,
    "duration": 4.56
  },
  {
    "text": "common names like primitive or proxies",
    "start": 2394.72,
    "duration": 5.639
  },
  {
    "text": "to avoid name collisions.",
    "start": 2396.56,
    "duration": 3.799
  },
  {
    "text": "So here you can find the info about the",
    "start": 2401.2,
    "duration": 5.2
  },
  {
    "text": "talks my colleagues did in various other",
    "start": 2404.079,
    "duration": 4.481
  },
  {
    "text": "conferences that I use as a reference",
    "start": 2406.4,
    "duration": 6.24
  },
  {
    "text": "today. Uh so this deck should be",
    "start": 2408.56,
    "duration": 6.0
  },
  {
    "text": "available online as well. Here's a QR",
    "start": 2412.64,
    "duration": 4.4
  },
  {
    "text": "code that you can scan to download it.",
    "start": 2414.56,
    "duration": 6.64
  },
  {
    "text": "Um, yep. I believe I have a few minutes",
    "start": 2417.04,
    "duration": 7.28
  },
  {
    "text": "for questions, but if we don't have the",
    "start": 2421.2,
    "duration": 5.12
  },
  {
    "text": "time for it, feel free to reach out to",
    "start": 2424.32,
    "duration": 4.56
  },
  {
    "text": "me via LinkedIn later. And yes, that's",
    "start": 2426.32,
    "duration": 7.48
  },
  {
    "text": "it. Thank you for listening. Come on in.",
    "start": 2428.88,
    "duration": 4.92
  }
]