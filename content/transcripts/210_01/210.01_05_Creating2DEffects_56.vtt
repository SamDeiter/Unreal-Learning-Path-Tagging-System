WEBVTT

1
00:00:00.000 --> 00:00:06.600
Now that we understand a little bit more about the basics of Niagara liquids, including enabling

2
00:00:06.600 --> 00:00:12.359
the plugin and how Niagara liquids are built based out of multiple modules, let's take

3
00:00:12.359 --> 00:00:19.240
a look at creating some Niagara liquid effects now by creating some 2D smoke, liquid and fire

4
00:00:19.240 --> 00:00:20.240
effects.

5
00:00:20.240 --> 00:00:26.240
For this example, we're going to be first starting off creating some 2D liquid, but the steps

6
00:00:26.239 --> 00:00:31.239
that we're going to be using can be applied to the smoke, liquid or fire depending on what

7
00:00:31.239 --> 00:00:32.239
you are doing.

8
00:00:32.239 --> 00:00:35.679
To do this, what we're going to do is right click inside of the content browser, select

9
00:00:35.679 --> 00:00:42.079
Niagara system, and then from the create Niagara system dialog box that comes up, we are going

10
00:00:42.079 --> 00:00:43.959
to go over here to Niagara fluids.

11
00:00:43.959 --> 00:00:48.000
Now if we click on Niagara fluids, just the main folder is going to show us every single

12
00:00:48.000 --> 00:00:52.359
thing that's inside of here, which is good if you want to see everything that is available.

13
00:00:52.359 --> 00:00:55.479
We are going to expose the folder, we're going to uncollapse it so that we can see

14
00:00:55.479 --> 00:01:01.039
the 2D gas, 2D liquid, 3D gas, 3D liquid, grid utility and shallow water, and then click

15
00:01:01.039 --> 00:01:05.359
on our 2D liquid and select the grid 2D flip hose.

16
00:01:05.359 --> 00:01:07.120
So let's go ahead and pop over here to the editor.

17
00:01:07.120 --> 00:01:11.640
We're going to right click inside of here, go to Niagara system, and I'm already there,

18
00:01:11.640 --> 00:01:12.760
but we can click on this.

19
00:01:12.760 --> 00:01:13.760
So there's our Niagara fluids.

20
00:01:13.760 --> 00:01:15.599
We're going to click down here to our 2D liquid.

21
00:01:15.599 --> 00:01:19.799
I'm going to select this grid flip hose and hit create.

22
00:01:19.799 --> 00:01:26.879
I'm going to call this NS underscore 2D liquid.

23
00:01:26.879 --> 00:01:28.759
All right.

24
00:01:28.759 --> 00:01:33.399
Now before I open it up, there's a couple of things that I want to talk about.

25
00:01:33.399 --> 00:01:40.200
Now when you first click on your Niagara system and you open it up, one of the things to make

26
00:01:40.200 --> 00:01:46.840
note of is that liquid smoke and fire simulations are extraordinarily complex and they are built

27
00:01:46.840 --> 00:01:49.759
out of multiple modules.

28
00:01:49.760 --> 00:01:53.480
While we're starting off with one that's relatively simple, you're going to see here in a few

29
00:01:53.480 --> 00:01:58.400
examples they start to build in complexity and in order to cut down on the amount of settings

30
00:01:58.400 --> 00:02:04.960
that you have to mess with or look for, there's this thing called an Admitter Summary.

31
00:02:04.960 --> 00:02:12.319
And the Admitter Summary is used to highlight some of the most useful properties that are

32
00:02:12.319 --> 00:02:14.879
available to work with this particular system.

33
00:02:14.879 --> 00:02:18.159
So when we click on the Admitter and we go to the Details panel, we're going to see something

34
00:02:18.159 --> 00:02:20.960
that looks like this, the Admitter Summary here.

35
00:02:20.960 --> 00:02:24.840
It's got some different categories, SIM, grid, collisions and all.

36
00:02:24.840 --> 00:02:28.439
It's going to be different based on the liquid that you have selected.

37
00:02:28.439 --> 00:02:32.759
And then there's all these properties in here that are, again, the properties that you are

38
00:02:32.759 --> 00:02:37.280
going to use to adjust this are the most common properties.

39
00:02:37.280 --> 00:02:42.159
Now if you want to expose more to the Admitter, you can still do that.

40
00:02:42.159 --> 00:02:46.000
All you got to do is just hit this little triangle right here.

41
00:02:46.000 --> 00:02:49.639
And what that's going to do is it's going to un-collapse the Admitter stack right here

42
00:02:49.639 --> 00:02:54.599
and we're going to see an Admitter that looks at something similar to what we are used to.

43
00:02:54.599 --> 00:02:56.039
So let's just take a look at that now.

44
00:02:56.039 --> 00:02:59.360
So I'm going to double click on my 2D liquid to open it up.

45
00:02:59.360 --> 00:03:01.000
Let's just expand this.

46
00:03:01.000 --> 00:03:05.120
And then right here, if I click on it, you can see here on my Details panel, I have just

47
00:03:05.120 --> 00:03:11.319
the properties I'm going to find super useful, like for example, number of cells max axis.

48
00:03:11.319 --> 00:03:15.680
This is how we control the resolution of this.

49
00:03:15.680 --> 00:03:19.960
So increasing this number is going to make the water have a higher resolution to work

50
00:03:19.960 --> 00:03:20.960
with.

51
00:03:20.960 --> 00:03:22.159
It's going to make it more realistic and things like that.

52
00:03:22.159 --> 00:03:26.200
Lowering this is going to make it run a little faster and look a little blockier.

53
00:03:26.200 --> 00:03:32.400
For us, what I want you to do now is just expose the other properties of our Admitter,

54
00:03:32.400 --> 00:03:39.560
again, just by hitting this little drop down here to un-collapse and re-collapse.

55
00:03:39.560 --> 00:03:43.319
And now once it's un-collapsed, we can see all of the properties.

56
00:03:43.319 --> 00:03:46.239
What we're going to be doing is we're going to go to Particle Spawn and then we're going

57
00:03:46.239 --> 00:03:51.159
to adjust the Lifetime and then the Spawn Radius and the Offset.

58
00:03:51.159 --> 00:03:58.239
And this is going to basically make the particles take a little bit less time to die off.

59
00:03:58.239 --> 00:03:59.239
Move the Spawn Radius down.

60
00:03:59.239 --> 00:04:01.479
We're going to move the Offset way far back.

61
00:04:01.479 --> 00:04:02.959
So let's just take a look at that now.

62
00:04:02.959 --> 00:04:04.919
So make more sense once we do this.

63
00:04:04.919 --> 00:04:07.840
So we're going to, again, come to our Particle Spawn Lifetime.

64
00:04:07.840 --> 00:04:09.240
We're going to set this to a value of 3.

65
00:04:09.240 --> 00:04:12.840
And you can see here what it's going to do is those particles are just going to die off

66
00:04:12.879 --> 00:04:16.280
a lot sooner than they normally would.

67
00:04:16.280 --> 00:04:18.280
Sphear Radius, I'm going to set this to 100.

68
00:04:18.280 --> 00:04:22.920
It's just going to give us a little bit of a larger area to have things admit.

69
00:04:22.920 --> 00:04:29.100
And then right here in the Offset, what we're going to do is I'm going to go negative 900.

70
00:04:29.100 --> 00:04:34.280
And that should push this up and it pushed a little bit too far out of our volume.

71
00:04:34.280 --> 00:04:35.280
So that is okay.

72
00:04:35.280 --> 00:04:38.399
What we're going to do here is we're going to come back to this and we're going to go

73
00:04:38.399 --> 00:04:40.840
down to our World Grid Extents right here.

74
00:04:41.039 --> 00:04:43.719
We're just going to set this to 2048.

75
00:04:43.719 --> 00:04:44.799
And there we go.

76
00:04:44.799 --> 00:04:50.159
So the World Grid Extents will come to that in the next slide, but that's going to basically

77
00:04:50.159 --> 00:04:56.120
work as our boundary for our particle system.

78
00:04:56.120 --> 00:04:59.759
So let's go ahead and just pop back over here.

79
00:04:59.759 --> 00:05:04.679
Now what we're going to do is we're going to re-collapse everything and we're going to enable

80
00:05:04.679 --> 00:05:06.479
the Use Depth Map Collisions.

81
00:05:06.480 --> 00:05:15.040
This is going to set it up so that the particles will react to collisions that have been placed

82
00:05:15.040 --> 00:05:18.600
into the world via static meshes or skeletal meshes.

83
00:05:18.600 --> 00:05:19.840
So let's go ahead and do that now.

84
00:05:19.840 --> 00:05:22.600
So we're going to come back over here to the editor.

85
00:05:22.600 --> 00:05:27.560
We are going to, remember, collapse this and now we have this available.

86
00:05:27.560 --> 00:05:32.120
So the other thing we're going to do here is we're going to go Use Depth Map Collisions.

87
00:05:32.120 --> 00:05:34.840
And then we've already done this, but the World Grid Extents here, we want to set that

88
00:05:34.919 --> 00:05:37.879
to 2048, which is going to push this thing out.

89
00:05:37.879 --> 00:05:39.359
Let's do one other thing here.

90
00:05:39.359 --> 00:05:40.639
We're going to come back to this.

91
00:05:40.639 --> 00:05:42.959
Let's go to our particle spawn real quick.

92
00:05:42.959 --> 00:05:47.719
And let's go ahead and set this offset to like 300.

93
00:05:47.719 --> 00:05:51.359
Yeah, that looks about good.

94
00:05:51.359 --> 00:05:53.839
So remember to pile and save.

95
00:05:53.839 --> 00:05:59.000
And what's going to happen now is when we place this into the world like so, we are going

96
00:05:59.000 --> 00:06:04.439
to be able to have it not only collide with the world, but also objects that we have manipulated

97
00:06:04.439 --> 00:06:05.439
in the world.

98
00:06:05.439 --> 00:06:06.439
So let's check that out.

99
00:06:06.439 --> 00:06:07.439
All right.

100
00:06:07.439 --> 00:06:08.439
So I'm going to close this down.

101
00:06:08.439 --> 00:06:13.240
I'm going to hit Control Space and just drag my particle into the world here.

102
00:06:13.240 --> 00:06:14.240
And there we go.

103
00:06:14.240 --> 00:06:17.639
I'm going to just move it on over a little bit and then watch this.

104
00:06:17.639 --> 00:06:21.319
Soon as I put this up, boom, got it ramping right off there.

105
00:06:21.319 --> 00:06:28.319
So that's really working right out of the gate with everything set up and ready to go.

106
00:06:28.319 --> 00:06:34.319
Now the next thing that we're going to take a look at is creating a smoke and fire effect

107
00:06:34.360 --> 00:06:39.319
kind of getting smoke and fire in the same one because actually smoke and fire are kind

108
00:06:39.319 --> 00:06:40.319
of the same thing.

109
00:06:40.319 --> 00:06:44.959
You can't have smoke without a fire source or something like that or so I'm told.

110
00:06:44.959 --> 00:06:47.199
So let's go ahead and create this new one.

111
00:06:47.199 --> 00:06:49.839
So I'm actually going to delete this out of the scene.

112
00:06:49.839 --> 00:06:52.759
Whenever you're dealing with any types of liquids, you want to make sure that your scene

113
00:06:52.759 --> 00:06:56.439
stays as clean as possible for performance sake.

114
00:06:56.439 --> 00:07:00.579
So I'm going to hit Control Space and then we're going to right click Niagara System.

115
00:07:00.579 --> 00:07:07.579
And then this time from Niagara fluids, we're going to go to a 2D gas and we want this 2D

116
00:07:07.699 --> 00:07:08.740
gas moving fire.

117
00:07:08.740 --> 00:07:15.740
We're going to hit create and then we're going to call this NS underscore 2D fire gas.

118
00:07:19.139 --> 00:07:22.740
And let's go ahead and double click on it to open it up.

119
00:07:22.740 --> 00:07:27.699
Now when we open this up, we're going to see things that look a little bit different.

120
00:07:27.699 --> 00:07:31.379
First off, we're going to have a new node here, which is going to look like this and

121
00:07:31.379 --> 00:07:34.740
it's going to be similar to our source particles node.

122
00:07:34.740 --> 00:07:39.060
But this additional node, what this is actually taking care of is all of the information from

123
00:07:39.060 --> 00:07:41.939
the fluid sim is going to happen inside of this node.

124
00:07:41.939 --> 00:07:46.500
We're also going to have our Niagara overview node, which is going to allow us to add things

125
00:07:46.500 --> 00:07:53.099
like user parameters and other interesting bits that we want to expose when this is either

126
00:07:53.100 --> 00:07:57.860
added to a world or it's spawned through blueprints and then our source particles.

127
00:07:57.860 --> 00:07:59.620
So again, it works like this.

128
00:07:59.620 --> 00:08:03.860
Our source particles are how we are going to shape our particles as they move through

129
00:08:03.860 --> 00:08:04.860
the world.

130
00:08:04.860 --> 00:08:09.260
We might want to skin them to something within the world or we might want to have them admit

131
00:08:09.260 --> 00:08:10.260
from something.

132
00:08:10.260 --> 00:08:12.900
All of that's going to happen here in our source particles.

133
00:08:12.900 --> 00:08:16.340
Then once those particles have been spawned, we're going to take the information from this

134
00:08:16.340 --> 00:08:23.060
grid 2D gas smoke simulation and skin that to those particles locations, giving us a

135
00:08:23.060 --> 00:08:27.339
the illusion that this really complicated fluid simulation is happening.

136
00:08:27.339 --> 00:08:31.740
But where in reality, what's really going on is we're running this Niagara SIM and then

137
00:08:31.740 --> 00:08:34.659
we're putting the fluid simulation on top of that.

138
00:08:34.659 --> 00:08:39.620
And the reason we do it in this manner is it allows us full control over where the particles

139
00:08:39.620 --> 00:08:40.779
are going.

140
00:08:40.779 --> 00:08:44.740
And as the particles move, we apply that fluid simulation.

141
00:08:44.740 --> 00:08:49.700
So again, we don't have to worry about making the fluid simulation go in that direction.

142
00:08:49.700 --> 00:08:53.060
It will go in that direction because it's attached to the particles that are already

143
00:08:53.060 --> 00:08:54.300
headed that way.

144
00:08:54.300 --> 00:09:01.060
So let's go ahead and just pop into the editor here real quick and have a look at our 2D

145
00:09:01.060 --> 00:09:02.180
fire.

146
00:09:02.180 --> 00:09:03.700
So there's our 2D fire effect.

147
00:09:03.700 --> 00:09:10.780
Again, we have our source here and then our fluid simulation.

148
00:09:10.780 --> 00:09:14.140
And notice that the fluid simulation is set into the Admitter Summary.

149
00:09:14.140 --> 00:09:19.580
If I was to expose this, you're going to see here it is a very, very, very complex system.

150
00:09:19.580 --> 00:09:24.340
There's all types of different pressure solves and compute shaders and things like that.

151
00:09:24.340 --> 00:09:29.620
But using it just like this will allow me to see the properties that I'm going to use

152
00:09:29.620 --> 00:09:31.100
most often.

153
00:09:31.100 --> 00:09:35.740
Again, our Admitter Summary right up here at the top, we can also edit this by clicking

154
00:09:35.740 --> 00:09:40.460
on Admitter Summary and then adjusting the things that are inside of here.

155
00:09:40.460 --> 00:09:44.180
As for what the Admitter Summary is going to contain, well, each one is going to be

156
00:09:44.180 --> 00:09:48.580
broken down into a different area.

157
00:09:49.379 --> 00:09:51.700
Each liquid is going to also be slightly different.

158
00:09:51.700 --> 00:09:55.100
So you might find some of these and you might not find some of these.

159
00:09:55.100 --> 00:10:00.940
So simulation is going to be dealing with how the simulation changes over time.

160
00:10:00.940 --> 00:10:07.700
Forces is, I'm sorry, sources is going to be adjusting source parameters to control information

161
00:10:07.700 --> 00:10:09.900
based off incoming particles.

162
00:10:09.900 --> 00:10:15.540
Our forces is going to affect on properties like density, temperature, buoyancy.

163
00:10:15.699 --> 00:10:21.579
Collisions will deal with how this will collide with the world, other and other effects.

164
00:10:21.579 --> 00:10:26.379
And then finally, our renderer is how this will work with rendering and lighting.

165
00:10:26.379 --> 00:10:32.579
So again, it's all been set up to work in a way that makes it easier to kind of digest

166
00:10:32.579 --> 00:10:33.899
each one of the parameters.

167
00:10:33.899 --> 00:10:39.860
Now, one of the other things to note about this, since we are simulating how smoke and

168
00:10:39.860 --> 00:10:46.659
fire work, which is our natural phenomena, we don't need to adjust that many parameters

169
00:10:46.659 --> 00:10:55.740
to get something that looks realistic or something that behaves in a realistic manner, but still

170
00:10:55.740 --> 00:10:57.740
is artistically driven.

171
00:10:57.740 --> 00:11:02.500
So oftentimes it just comes down to simply maybe changing something like the temperature

172
00:11:02.500 --> 00:11:10.059
to like 0.1 or 0.5 or, you know, if I set it to 2, it gets extraordinarily hot.

173
00:11:10.059 --> 00:11:15.139
So maybe I have this temperature multiplier, maybe it's something that I have exposed

174
00:11:15.139 --> 00:11:17.259
so that I can scale it over time.

175
00:11:17.259 --> 00:11:24.700
So it starts at 0.1 and then goes to 2 and 3 and 4 and 5 and 6 and so on, and will increase

176
00:11:24.700 --> 00:11:27.059
over time.

177
00:11:27.059 --> 00:11:32.460
There isn't a magic property in here that's also going to make your fire look better or

178
00:11:32.460 --> 00:11:33.860
more realistic.

179
00:11:33.860 --> 00:11:41.019
What is going to help give you the most realistic options are very subtle changes in your numbers.

180
00:11:41.019 --> 00:11:46.980
I'm talking like, you know, maybe I set this to 5 to see what happens, maybe set it to

181
00:11:46.980 --> 00:11:53.060
1, but doing something like maybe 100 or 500, these are all going to give you values that

182
00:11:53.060 --> 00:11:54.660
don't really look that realistic.

183
00:11:54.660 --> 00:11:58.180
So just be careful when doing things like that.

184
00:11:58.180 --> 00:12:02.220
Now, the next thing that I want to talk about is collision.

185
00:12:02.220 --> 00:12:08.860
So your 2D and your 3D particles will all collide with objects that have placed in the

186
00:12:08.860 --> 00:12:09.860
world.

187
00:12:09.860 --> 00:12:10.860
We saw that with the water.

188
00:12:10.860 --> 00:12:15.259
Now, one thing to note, if you're using an older version of Unreal or for some reason

189
00:12:15.259 --> 00:12:21.379
things are not working, check that the object that you wish to collide with your effect.

190
00:12:21.379 --> 00:12:26.700
So in this case here, we have this static mesh that we want to collide and the actor

191
00:12:26.700 --> 00:12:35.500
tags, we put this tag collider all lowercase c-o-l-l-i-d-e-r that will make this object

192
00:12:35.500 --> 00:12:37.900
collide with your smoke effects.

193
00:12:37.900 --> 00:12:42.740
Now the reason that I bring this up is in Unreal 5.6, apparently you do not need to do this

194
00:12:42.740 --> 00:12:43.740
anymore.

195
00:12:43.740 --> 00:12:45.259
So let me show you what I'm talking about.

196
00:12:45.259 --> 00:12:46.259
We're going to come here.

197
00:12:46.259 --> 00:12:47.259
I'm going to re-rotate that.

198
00:12:47.259 --> 00:12:51.060
We're going to go to add geometry, not geometry, I'm sorry, shapes.

199
00:12:51.060 --> 00:12:56.060
I'm going to add a cube here and just move this cube over and down.

200
00:12:56.059 --> 00:13:01.659
And then we're going to grab our gas 2D, put that in here and check this out.

201
00:13:01.659 --> 00:13:05.459
If I bring this over like so, it's kind of cool.

202
00:13:05.459 --> 00:13:11.259
It makes it almost like I'm dampening the fire here.

203
00:13:11.259 --> 00:13:12.859
And it's actually blocking it.

204
00:13:12.859 --> 00:13:16.859
The reason it comes through from the top is because we're using the depth to block it.

205
00:13:16.859 --> 00:13:20.779
And from this particular viewpoint, my depth information is signifying there isn't anything

206
00:13:20.779 --> 00:13:21.779
up there.

207
00:13:21.779 --> 00:13:23.459
That's why it's working in this view.

208
00:13:23.460 --> 00:13:27.340
But you can see here, I can block half of the smoke.

209
00:13:27.340 --> 00:13:33.139
And again, if that's not working, just come here, look for your tag, add a tag called

210
00:13:33.139 --> 00:13:36.139
Collider.

211
00:13:36.139 --> 00:13:38.139
And you should see the exact same results.

212
00:13:38.139 --> 00:13:42.700
And again, this is going to work with any static mesh that you have.

213
00:13:42.700 --> 00:13:45.379
It will also work with the...

214
00:13:45.379 --> 00:13:49.500
Let me just actually move that out of the way because I can't move the player with that,

215
00:13:49.500 --> 00:13:51.019
but it's also going to work with the player as well.

216
00:13:51.059 --> 00:13:52.659
Let's look at that right out of the box.

217
00:13:52.659 --> 00:13:53.659
It's working.

218
00:13:53.659 --> 00:13:58.220
You can see here, the player is kind of disrupting the gas of...or I should say the smoke of the

219
00:13:58.220 --> 00:13:59.220
fire.

220
00:13:59.220 --> 00:14:00.779
And it's actually very, very cool.

221
00:14:00.779 --> 00:14:04.179
And it gets even cooler when we add a 3D effect to it.

222
00:14:04.179 --> 00:14:07.100
So that is going to wrap up our 2D section.

223
00:14:07.100 --> 00:14:12.939
We're going to look next at creating 3D versions of our smoke and fire in the next part of

224
00:14:12.939 --> 00:14:13.620
this tutorial.

