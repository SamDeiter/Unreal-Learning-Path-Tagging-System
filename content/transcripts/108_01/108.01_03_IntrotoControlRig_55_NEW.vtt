WEBVTT

1
00:00:00.000 --> 00:00:06.000
Once your rig becomes a bit more complex, you might find that you spend a bit of time

2
00:00:06.000 --> 00:00:10.080
customizing the look and the position of your controls, and you might want to consider how

3
00:00:10.080 --> 00:00:13.560
you can speed up some of that workflow so that you're not repeating the same steps every

4
00:00:13.560 --> 00:00:16.359
time you make a new control.

5
00:00:16.359 --> 00:00:20.679
Something that works really well here is initially setting up the controls for one-half of your

6
00:00:20.679 --> 00:00:25.240
body and then using the mirror function to copy and mirror all of the controls to the

7
00:00:25.240 --> 00:00:26.240
other side.

8
00:00:26.240 --> 00:00:29.980
Now, this will save you a lot of time when you're setting up your controls and it maintains

9
00:00:29.980 --> 00:00:34.020
how you've customized the look of the money copies them over.

10
00:00:34.020 --> 00:00:37.460
So let's take a look at how to mirror some controls.

11
00:00:37.460 --> 00:00:41.380
We have a slightly more complex rig here where, as you can see, we've set up the controls

12
00:00:41.380 --> 00:00:46.379
on one-half of the body and for each of the controls, we have customized them in a different

13
00:00:46.379 --> 00:00:47.380
way.

14
00:00:47.380 --> 00:00:50.340
So they're a different color and they're a different shape.

15
00:00:50.340 --> 00:00:53.659
And we're going to mirror these over from the character's right-hand side to the left

16
00:00:53.659 --> 00:00:55.500
side.

17
00:00:55.500 --> 00:01:01.780
So to do that, if we select all of our controls by shift-selecting, right-click and then choose

18
00:01:01.780 --> 00:01:03.060
mirror.

19
00:01:03.060 --> 00:01:07.219
And this is going to ask you, what axis do you want to mirror the controls across?

20
00:01:07.219 --> 00:01:11.900
And if we look at our little gizmo down here, we want to mirror along the x-axis, so this

21
00:01:11.900 --> 00:01:18.780
is correct, and we want to flip along the z-axis, so we want to flip them 180 along

22
00:01:18.780 --> 00:01:20.539
that vertical axis.

23
00:01:20.539 --> 00:01:23.500
So the axis to flip is also correct.

24
00:01:23.500 --> 00:01:27.739
Now the search and replace options are to do with the naming of the controls.

25
00:01:27.739 --> 00:01:31.459
So currently, because this is the right side, within the control name, you can see we have

26
00:01:31.459 --> 00:01:32.659
underscore R underscore.

27
00:01:32.659 --> 00:01:39.140
I'm going to copy and replace with underscore L underscore.

28
00:01:39.140 --> 00:01:45.140
So in search, we put underscore R underscore and replace underscore L underscore.

29
00:01:45.140 --> 00:01:50.379
When we hit OK, you can see that our controls are mirrored across from left to right.

30
00:01:50.379 --> 00:01:54.899
They look exactly the same, they're the same color and same shapes and any sort of positional

31
00:01:54.899 --> 00:02:01.699
updates we've made to the shapes transforms, you can see they've been updated as well.

32
00:02:01.699 --> 00:02:05.379
Now we need to make sure that our controls transforms are matching with their corresponding

33
00:02:05.379 --> 00:02:07.259
bones.

34
00:02:07.259 --> 00:02:11.460
And to test whether or not the controls are aligned with the bones transforms, there's

35
00:02:11.460 --> 00:02:13.859
a nice way to visualize this.

36
00:02:13.859 --> 00:02:19.259
So if I search for upper arm, for example, we know that this upper left-hand arm is the

37
00:02:19.259 --> 00:02:23.579
one that we've just created a new control for with the mirror function.

38
00:02:23.579 --> 00:02:30.139
And if we right-click and choose control bone transform, we can see with our manipulator

39
00:02:30.139 --> 00:02:37.699
handle here, our gizmo, that we've got the x-axis pointing down the bone, the y-forward

40
00:02:37.699 --> 00:02:43.060
and the z-sort of up to the right-hand side here.

41
00:02:43.060 --> 00:02:48.739
Now if I select the control we just created, you can see that that's flipped slightly.

42
00:02:49.580 --> 00:02:52.500
So what you'll find is that the same thing has happened with each of these controls

43
00:02:52.500 --> 00:02:54.260
that we've created.

44
00:02:54.260 --> 00:02:59.500
So the position in space will be correct, but the orientation might be flipped.

45
00:02:59.500 --> 00:03:07.140
So we choose the lower arm, right-click, control bone transform, and then if I select the control,

46
00:03:07.140 --> 00:03:10.500
you'll see that this flips slightly.

47
00:03:10.500 --> 00:03:16.820
So what we need to do here is set out offset transforms from the closest bone, like we

48
00:03:16.819 --> 00:03:19.819
did with the controls in the other rig.

49
00:03:19.819 --> 00:03:23.780
But if we do that while all of the controls are in hierarchy, you'll find that things

50
00:03:23.780 --> 00:03:26.379
go a little bit wonky.

51
00:03:26.379 --> 00:03:28.939
So I'll just show you an example of this.

52
00:03:28.939 --> 00:03:33.819
If I select all of these controls here, I choose right-click and then set offset from

53
00:03:33.819 --> 00:03:39.340
closest bone, you'll see that the controls kind of jump around all over the place.

54
00:03:39.340 --> 00:03:43.139
And that's because the parent is having an effect on each of the children.

55
00:03:43.139 --> 00:03:50.139
So if I control Z to undo that, if I select each control and press Shift P, you could

56
00:03:50.139 --> 00:03:53.739
also select multiple controls together and press Shift P. That will bring them out of

57
00:03:53.739 --> 00:03:55.899
the hierarchy.

58
00:03:55.899 --> 00:04:01.099
We can then select all of our left side controls, if I zoom out a little bit here.

59
00:04:01.099 --> 00:04:07.179
Right-click, set offset transforms from closest bone, and you can see that the controls haven't

60
00:04:07.180 --> 00:04:13.219
moved their world position, but the orientations have updated to match the bones.

61
00:04:13.219 --> 00:04:20.139
So now if we just fix the hierarchy again, putting our arms and legs back together, if

62
00:04:20.139 --> 00:04:29.420
we were to select the upper arm, for example, right-click, control bone transform, we can

63
00:04:29.420 --> 00:04:35.300
see that it's still set up the same way that it was, so X pointing down the bone, Y forwards.

64
00:04:35.300 --> 00:04:42.220
And if we now select our upper arm, control, you'll see that set up exactly the same way,

65
00:04:42.220 --> 00:04:48.860
which means that when you set up your logic, everything should work correctly.

66
00:04:48.860 --> 00:04:53.139
Coming back to our basic IK setup here, what I've done is I've used the mirror function

67
00:04:53.139 --> 00:04:57.980
to duplicate and mirror our hand and our pole vector controls from the right-hand side to

68
00:04:57.980 --> 00:04:59.740
the left-hand side.

69
00:04:59.740 --> 00:05:03.259
Now I wanted to show you one more thing in relation to mirroring that's available on

70
00:05:03.259 --> 00:05:07.139
the basic IK node itself, and this might speed you up when you're setting up the rest

71
00:05:07.139 --> 00:05:09.779
of your rig logic.

72
00:05:09.779 --> 00:05:14.740
If we duplicate our node here, what you can do is right-click the node itself towards

73
00:05:14.740 --> 00:05:20.259
the top here and choose search and replace mirror.

74
00:05:20.259 --> 00:05:24.019
And this will give us the same sort of mirror options that we had when right-clicking in

75
00:05:24.019 --> 00:05:26.860
the rig hierarchy.

76
00:05:26.860 --> 00:05:31.259
So we want the same options again, we want to mirror along the X axis and then flip along

77
00:05:31.259 --> 00:05:32.860
the Z axis.

78
00:05:32.980 --> 00:05:37.259
This time we're searching and replacing the name of the bones that we have inside the

79
00:05:37.259 --> 00:05:39.020
node here.

80
00:05:39.020 --> 00:05:46.060
So we'll search for underscore R and we want to replace with underscore L.

81
00:05:46.060 --> 00:05:50.900
And when we hit OK, you'll see that these bone names update inside the node.

82
00:05:50.900 --> 00:05:55.180
And then we just need to create the same setup as we have with the other basic IK node.

83
00:05:55.180 --> 00:06:00.780
So drag these two controls in and choose get control.

84
00:06:00.779 --> 00:06:06.419
Remember that our transform of our hand control is going to go into the effector pin and the

85
00:06:06.419 --> 00:06:11.539
translation of our pole vector node is going to plug into pole vector.

86
00:06:11.539 --> 00:06:16.339
And something we want to do as well because it's mirrored is change our primary axis from

87
00:06:16.339 --> 00:06:25.019
minus one to one and then also flip our secondary axis from one to minus one.

88
00:06:25.019 --> 00:06:31.699
And when we connect up the logic and hit compile, if I select our left hand control here, you'll

89
00:06:31.699 --> 00:06:39.019
see that we now have two IK hand controls working pretty quickly after just updating

90
00:06:39.019 --> 00:06:44.019
a few mirror search and replace options and copying over the right hand controls to the

91
00:06:44.019 --> 00:06:46.899
left hand side.

92
00:06:46.899 --> 00:06:51.139
The last thing we're going to look at is setting up some sort of aim control using the aim

93
00:06:51.139 --> 00:06:52.620
function.

94
00:06:52.620 --> 00:06:56.500
And this is a really handy tool if you want part of your skeletal mesh to always point

95
00:06:56.500 --> 00:06:58.139
towards something.

96
00:06:58.139 --> 00:07:02.340
So that could be creating a head look system for your character or maybe something like

97
00:07:02.340 --> 00:07:06.740
making the turret of a gun always point towards a target.

98
00:07:06.740 --> 00:07:11.220
So the aim function works a lot like the pole vector setup we had just a moment ago.

99
00:07:11.220 --> 00:07:15.379
Now we need to tell the function what bone we want to affect and give it a control as

100
00:07:15.379 --> 00:07:17.500
a target to aim at.

101
00:07:17.500 --> 00:07:22.819
And then make sure that we have our primary and secondary axes set up correctly.

102
00:07:22.819 --> 00:07:30.060
So if I come back to our rig graph here, right click and search for aim.

103
00:07:30.060 --> 00:07:33.939
This is the aim function that we're going to use.

104
00:07:33.939 --> 00:07:37.740
Now we need to give our aim function something to target at.

105
00:07:37.740 --> 00:07:46.379
So I'm going to select our head bone, right click, new control.

106
00:07:46.779 --> 00:07:51.420
Put that inside the hierarchy of our root control.

107
00:07:51.420 --> 00:07:55.779
And the same as we did with the pole vector, I'm just going to drag this out along the

108
00:07:55.779 --> 00:07:58.899
y-axis.

109
00:07:58.899 --> 00:08:06.459
Right click and choose set offset transform from current.

110
00:08:06.459 --> 00:08:08.459
So back to the aim node.

111
00:08:08.459 --> 00:08:13.100
The bone that we're trying to control is going to be the head.

112
00:08:13.100 --> 00:08:20.460
And our target, if I drag our head control in here, is going to be the position of our

113
00:08:20.460 --> 00:08:23.820
head control.

114
00:08:23.820 --> 00:08:29.540
So if we plug our translation pin in here to our target pin there, and then I'll connect

115
00:08:29.540 --> 00:08:31.420
up the logic.

116
00:08:31.420 --> 00:08:37.220
And you can see already we're aiming towards our control, but again we haven't quite got

117
00:08:37.220 --> 00:08:41.060
the primary and secondary axes correct.

118
00:08:41.059 --> 00:08:48.219
So if I select our head control, or our head bone should I say, and press F to zoom in on

119
00:08:48.219 --> 00:08:53.019
that.

120
00:08:53.019 --> 00:08:57.979
Just so we're not getting some misleading results here, I'm going to disconnect the logic

121
00:08:57.979 --> 00:09:01.219
to get it back to its default pose.

122
00:09:01.219 --> 00:09:05.579
And we can see that our y-axis is pointing in the positive direction.

123
00:09:05.579 --> 00:09:08.739
So that'll be our primary axis.

124
00:09:08.740 --> 00:09:18.180
So underneath the axis tab here, we'll change x to zero and then y to one.

125
00:09:18.180 --> 00:09:22.779
And underneath the secondary axis tab here, we're currently set to Z.

126
00:09:22.779 --> 00:09:27.379
Now this is our up axis, or the axis that's pointing towards this bone's parent.

127
00:09:27.379 --> 00:09:32.740
So if we select the head here, and I just zoom in a bit, we can see that the pointing

128
00:09:32.740 --> 00:09:37.379
towards our parent is the negative x-axis.

129
00:09:37.379 --> 00:09:44.980
So if I put negative one inside here, and then zero in there, whoops not ten, zero.

130
00:09:44.980 --> 00:09:48.059
And then reconnect up the logic.

131
00:09:48.059 --> 00:09:52.500
When we compile, you can see that the head is pointing in the right direction.

132
00:09:52.500 --> 00:09:58.460
And when we move the head control here, our head continues to point towards it.

133
00:09:58.460 --> 00:10:01.500
And this is super super useful for things like setting up a head control system like

134
00:10:01.500 --> 00:10:03.419
I mentioned earlier.

135
00:10:03.419 --> 00:10:07.860
Or even just animating your character's head to look left and right, and always aim towards

136
00:10:07.860 --> 00:10:13.539
something maybe as they're walking around.

137
00:10:13.539 --> 00:10:18.219
Now that we've seen how to create a simple FK setup and a simple IK setup, as well as

138
00:10:18.219 --> 00:10:22.539
using the aim function to give your character a target to always aim towards, let's go

139
00:10:22.539 --> 00:10:28.379
into sequencer and see how we can now animate with it.

140
00:10:28.379 --> 00:10:31.579
There are two ways we can get started with our animation.

141
00:10:31.580 --> 00:10:35.780
The first would be to grab our control rig here and drag it straight into the level.

142
00:10:35.780 --> 00:10:41.060
And what this will do is create a new level sequence for us, including our character and

143
00:10:41.060 --> 00:10:43.500
the rig that's connected to them.

144
00:10:43.500 --> 00:10:49.220
The second way we could do this is to add our character to a pre-existing sequence.

145
00:10:49.220 --> 00:10:53.340
So if I come back to the content browser, we have a pre-existing sequence here called

146
00:10:53.340 --> 00:10:55.860
my level sequence.

147
00:10:55.860 --> 00:10:58.180
Double click that to open it.

148
00:10:58.180 --> 00:11:00.620
Come back to our content browser.

149
00:11:00.620 --> 00:11:05.299
I can grab our character mesh here and I can click and hold and drag it on top of the

150
00:11:05.299 --> 00:11:09.539
sequencer window here.

151
00:11:09.539 --> 00:11:16.139
That gives us a new character and also includes a control rig with the character.

152
00:11:16.139 --> 00:11:19.700
Now this isn't the control rig that we initially created.

153
00:11:19.700 --> 00:11:23.620
So we'd have to delete that control rig by highlighting and press delete.

154
00:11:23.620 --> 00:11:27.419
We could hit the plus next to our character's name here.

155
00:11:27.419 --> 00:11:36.019
Come to control rig and go into untick filter asset by skeleton and search for the control

156
00:11:36.019 --> 00:11:45.379
rig that we just created, which is skm quen simple control rig.

157
00:11:45.379 --> 00:11:48.659
Now there's one big difference when you add assets to sequences in these two different

158
00:11:48.659 --> 00:11:50.299
ways.

159
00:11:50.299 --> 00:11:54.259
If you drag them in from the content browser like we just did, that asset becomes what's

160
00:11:54.259 --> 00:12:00.219
known as spawnable and it only exists in the level when you have the sequence open.

161
00:12:00.219 --> 00:12:04.259
This is great for if you're working with some sort of shot based workflow.

162
00:12:04.259 --> 00:12:08.859
When you add an asset to the sequencer from the level instead, these assets are known as

163
00:12:08.859 --> 00:12:13.519
possessible, which means they are persistent within the level and you need to have the

164
00:12:13.519 --> 00:12:17.019
level open for the sequencer to reference that asset.

165
00:12:17.019 --> 00:12:21.220
This is useful if you have multiple level sequences that want to reference the same

166
00:12:21.220 --> 00:12:22.819
asset.

167
00:12:22.819 --> 00:12:27.019
An indication of a spawnable asset will be inside the sequence here where you see the

168
00:12:27.019 --> 00:12:29.939
lightning bolt icon.

169
00:12:29.939 --> 00:12:37.019
If we open our sequence that was created when we dragged the control rig into the level,

170
00:12:37.019 --> 00:12:40.220
you'll see that this character doesn't have that icon.

171
00:12:40.220 --> 00:12:44.579
So this character is possessible, meaning that the sequence is referencing this character

172
00:12:44.579 --> 00:12:46.500
saved in the level.

173
00:12:46.500 --> 00:12:49.100
So let's get started with our animation.

174
00:12:49.100 --> 00:12:53.179
I'm going to briefly go over some of the core components of a sequencer so we know how to

175
00:12:53.179 --> 00:12:58.179
select our controls and how to set a key on those controls and then how to bake our animation

176
00:12:58.179 --> 00:13:02.860
out and save that as its own animation sequence.

177
00:13:02.860 --> 00:13:07.500
So as you can see, we have our control rig track just inside the sequencer here.

178
00:13:07.500 --> 00:13:11.700
And if I pop that open, this shows us all the controls that are inside that control

179
00:13:11.700 --> 00:13:13.580
rig.

180
00:13:13.580 --> 00:13:17.820
Let's just zoom in on our character a little bit here.

181
00:13:17.820 --> 00:13:22.780
Now I could select the controls from inside the sequence here, which isn't too bad if

182
00:13:22.780 --> 00:13:27.580
you've only got a few controls, but this list can get quite long.

183
00:13:27.580 --> 00:13:35.379
So you can also select them from the viewport or from the anim outliner here.

184
00:13:35.379 --> 00:13:40.060
Now to set a key on our controls, we could set a key on everything in the control rig

185
00:13:40.059 --> 00:13:43.779
by hitting this plus on the parent track.

186
00:13:43.779 --> 00:13:48.459
Or if you just want to add a key to individual controls, you would just use the plus on the

187
00:13:48.459 --> 00:13:50.819
individual control track.

188
00:13:50.819 --> 00:13:54.859
So let's set a key on everything with the plus here.

189
00:13:54.859 --> 00:13:59.339
And what we're going to do is just make a simple animation of our character waving.

190
00:13:59.339 --> 00:14:03.659
Now something that's really useful to turn on here that we already have active currently

191
00:14:03.659 --> 00:14:05.899
is auto key.

192
00:14:05.899 --> 00:14:10.340
So whenever you make a change to a control, whether that's translating it or rotating

193
00:14:10.340 --> 00:14:17.819
it, what auto key is going to do is set a key when you make that change.

194
00:14:17.819 --> 00:14:19.980
So we've dragged our time slider across here.

195
00:14:19.980 --> 00:14:27.019
And what I'm going to do is grab our control here, bring it up in the viewport and just

196
00:14:27.019 --> 00:14:33.379
rotate it so it looks like the start of a wave.

197
00:14:34.259 --> 00:14:40.740
Now something to make working with control rig a little easier in the viewport.

198
00:14:40.740 --> 00:14:45.860
Under the animation tab here, you can turn on select, which only selects the control

199
00:14:45.860 --> 00:14:47.700
rig controls.

200
00:14:47.700 --> 00:14:53.019
So if we activate that, now when I click on the mesh or the skydome, none of this gets

201
00:14:53.019 --> 00:14:57.700
selected, which is just super handy so that you can only select the controls and you don't

202
00:14:57.700 --> 00:15:00.980
accidentally select a mesh or something else in the viewport.

203
00:15:01.580 --> 00:15:09.019
But if I select our control again, come along a little further and we'll just make our wave

204
00:15:09.019 --> 00:15:11.019
animation.

205
00:15:21.420 --> 00:15:28.899
And I think what we might do here is if we grab the head control, we could have that

206
00:15:28.899 --> 00:15:32.819
look towards us on the camera over here.

207
00:15:38.059 --> 00:15:44.019
And then if we set a key again, we could bring that back to default just by resetting

208
00:15:44.019 --> 00:15:53.939
all the location values and the same with the hand here to finish off our animation.

209
00:15:53.940 --> 00:15:59.140
So if we play this animation back, we've got a quick wave and a head look over here

210
00:15:59.140 --> 00:16:04.700
that we can now save out as its own animation sequence and use elsewhere in the project.

211
00:16:04.700 --> 00:16:09.060
So if I press this little red button here, what that's going to do is bring the end of

212
00:16:09.060 --> 00:16:13.340
the playback range down to where my time slider is.

213
00:16:13.340 --> 00:16:18.540
And if we scroll up to select our character here, right click and choose bake animation

214
00:16:18.540 --> 00:16:20.940
sequence.

215
00:16:20.940 --> 00:16:25.060
This will then bake the animation down to its own animation sequence that we could use

216
00:16:25.060 --> 00:16:27.500
elsewhere in the project.

217
00:16:27.500 --> 00:16:32.700
So if I just use the content browser as the default location to save this and I just call

218
00:16:32.700 --> 00:16:41.820
this a underscore wave and hit OK, we get another option box comes up and depending

219
00:16:41.820 --> 00:16:45.820
whether or not any of these properties are relevant to your character like having morph

220
00:16:45.820 --> 00:16:49.740
targets or material curves or anything, you can tick these on and off.

221
00:16:50.180 --> 00:16:55.340
For now, I'll just leave them at default and choose export to animation sequence.

222
00:16:55.340 --> 00:17:01.980
Now if we go back to our content browser, inside the default content folder is our wave

223
00:17:01.980 --> 00:17:05.700
that we just created.

224
00:17:05.700 --> 00:17:10.740
And we can see our character waving to us, looking at us and then going back to the default

225
00:17:10.740 --> 00:17:13.059
pose.

226
00:17:13.059 --> 00:17:14.059
And that's it.

227
00:17:14.059 --> 00:17:18.579
So you can now access this animation as an animation sequence or bring it back into sequence

228
00:17:18.579 --> 00:17:23.099
and edit it further and then use elsewhere in your project.

229
00:17:23.099 --> 00:17:26.339
Hopefully you now have an understanding of how control rig works and how to set up a

230
00:17:26.339 --> 00:17:31.460
simple FK and IK rig as well as learning how to create a name target for your rig and

231
00:17:31.460 --> 00:17:34.419
then animate it in sequencer.

232
00:17:34.419 --> 00:17:39.619
We have more courses that cover rigging in much more depth as well as animating in sequencer.

233
00:17:39.619 --> 00:17:43.379
So if those are some skills that you want to develop, be sure to check those out.

234
00:17:43.379 --> 00:17:45.819
But for now, good luck with your rigging and animating.

