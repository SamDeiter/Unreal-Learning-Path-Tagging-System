WEBVTT

1
00:00:00.000 --> 00:00:06.500
In this section, we will continue going over the steps for using the custom body workflow

2
00:00:06.500 --> 00:00:09.080
by executing step 3 and 4.

3
00:00:09.080 --> 00:00:13.740
In the previous section, we executed step 1, where we positioned and scaled the head

4
00:00:13.740 --> 00:00:20.800
rig, and then executed step 2, where we updated the DNA using the new neutral mesh and aligned

5
00:00:20.800 --> 00:00:23.140
the head and body skeletons.

6
00:00:23.140 --> 00:00:28.440
The step 3 portion of the script will check the body and head skin weights, and step 4

7
00:00:28.440 --> 00:00:31.200
will merge the body and head skin weights.

8
00:00:31.200 --> 00:00:35.560
So let's return to Maya and execute step 3.

9
00:00:35.560 --> 00:00:41.000
Back inside of Maya, step 3 will check and validate the body and head skin weights.

10
00:00:41.000 --> 00:00:46.200
This will check if the skin weight influences on the neck region only contain influences

11
00:00:46.200 --> 00:00:51.680
that are supported by the standard metahuman head rig DNA description.

12
00:00:51.680 --> 00:00:56.340
In the script editor, I will scroll down here to step 3.

13
00:00:56.340 --> 00:01:04.939
I will select these lines here from 183 to 185 and execute this.

14
00:01:04.939 --> 00:01:08.579
If the check fails, we will get this warning pop up.

15
00:01:08.579 --> 00:01:14.180
This notifies us that the head area contains skin weight influences not supported by the

16
00:01:14.180 --> 00:01:20.300
standard DNA description, and that gaps may appear at the seam during deformation.

17
00:01:20.300 --> 00:01:25.300
It recommends that we modify the body skin weights so that only influences included in

18
00:01:25.299 --> 00:01:29.459
the metahuman head rig are used in this region.

19
00:01:29.459 --> 00:01:31.899
Select I will fix this.

20
00:01:31.899 --> 00:01:36.659
Now the body skin weights that need to be adjusted are going to be highlighted.

21
00:01:36.659 --> 00:01:43.340
I will go up here and select this tool in order to isolate the highlighted sections.

22
00:01:43.340 --> 00:01:50.299
Now with the selected, I will go up here to the top left and change this to rigging.

23
00:01:51.299 --> 00:01:58.620
Next go up here to skin and then select paint skin weights and click on this to open up

24
00:01:58.620 --> 00:02:00.620
the options.

25
00:02:00.620 --> 00:02:03.819
Now I'm going to move this over here.

26
00:02:03.819 --> 00:02:10.460
In the script editor, over here, it has listed the names of the unsupported influences.

27
00:02:10.460 --> 00:02:15.139
I will copy the first one which is for the right upper arm.

28
00:02:15.139 --> 00:02:21.019
In the paint skin weight tool settings, I will paste the name in the search option to

29
00:02:21.019 --> 00:02:25.379
locate the selection and select it.

30
00:02:25.379 --> 00:02:27.979
Next I want to adjust the values.

31
00:02:27.979 --> 00:02:34.219
For the opacity, I want to ensure that this is set to 1 and for the value, I want to ensure

32
00:02:34.219 --> 00:02:37.259
this is set to 0.

33
00:02:37.259 --> 00:02:40.139
And now I can select flood.

34
00:02:40.139 --> 00:02:46.539
In the viewport, I will click on the highlighted selection and now I will repeat this for the

35
00:02:46.539 --> 00:02:48.179
other section.

36
00:02:48.179 --> 00:02:54.899
I'm going to go to the script editor and copy the name of the other unsupported influence

37
00:02:54.899 --> 00:03:00.979
and then paste it in the search option to locate the selection.

38
00:03:00.979 --> 00:03:07.139
I'm going to leave everything the same and select flood again and then click on the highlighted

39
00:03:07.139 --> 00:03:10.819
selection in the viewport.

40
00:03:10.819 --> 00:03:16.779
Now before we continue, let's do a quick review of the steps we just went through.

41
00:03:16.779 --> 00:03:20.259
Step 3 validates the skin weights on the head and body.

42
00:03:20.259 --> 00:03:25.139
It will check whether the skin weight influences on the neck region only contain influences

43
00:03:25.139 --> 00:03:27.939
that can be described in the DNA file.

44
00:03:27.939 --> 00:03:34.419
To check the body and head skin weights, select line 183 to 185 and execute it.

45
00:03:34.419 --> 00:03:39.379
After a few moments, if the check fails, a pop-up will appear letting us know that we

46
00:03:39.379 --> 00:03:44.299
need to modify the body skin weights so that only influences included in the metahuman

47
00:03:44.299 --> 00:03:46.899
head rig are used in this region.

48
00:03:46.899 --> 00:03:52.259
Otherwise, this may cause gaps to appear at the seam during deformation.

49
00:03:52.259 --> 00:03:57.219
We will need to modify the combined body rig skin weights in this case.

50
00:03:57.219 --> 00:04:02.699
Once we see the warning pop up and click on I will fix this, the skin weight sections

51
00:04:02.699 --> 00:04:07.060
on the combined body rig that need to be modified will be highlighted.

52
00:04:07.060 --> 00:04:12.219
We will need to remove the skin weight values associated with these selected vertices.

53
00:04:12.219 --> 00:04:19.300
To do this, isolate the selection, then go to skin and then select the paint skin weights

54
00:04:19.300 --> 00:04:22.860
and open up the skin weight tool settings.

55
00:04:22.860 --> 00:04:28.060
In the script editor, copy the name of the unsupported influence and then in the paint

56
00:04:28.060 --> 00:04:34.060
skin weight tool setting, paste the name in the search option to locate the selection.

57
00:04:34.060 --> 00:04:39.939
Ensure that opacity is set to 1, value is set to 0 and then select flood and click on

58
00:04:39.939 --> 00:04:41.500
the selection.

59
00:04:41.500 --> 00:04:44.620
Then repeat these steps for the other selection.

60
00:04:44.620 --> 00:04:50.259
With the combined body rig skin weights adjusted, we can now rerun the skin weight check.

61
00:04:50.259 --> 00:04:54.660
So let's return to Maya and continue with step 3.

62
00:04:54.660 --> 00:05:01.380
Back in Maya, now that we have modified the body skin weights, we can rerun the validation.

63
00:05:01.380 --> 00:05:05.660
Select this section again and execute it.

64
00:05:05.660 --> 00:05:10.620
Now we will see a pop up letting us know that no issues were found and that the skin weight

65
00:05:10.620 --> 00:05:12.900
influence is complete.

66
00:05:12.900 --> 00:05:17.740
Now before we move on to step 4, since we have updated the skin weights on the combined

67
00:05:17.740 --> 00:05:23.060
body, we want to copy the skin weights to the body only mesh as that will be the mesh

68
00:05:23.060 --> 00:05:25.899
that will be brought into Unreal Engine.

69
00:05:25.899 --> 00:05:31.939
To transfer the updated skin weights from the combined body to the separated body mesh,

70
00:05:31.939 --> 00:05:36.420
first make the separated body visible.

71
00:05:36.420 --> 00:05:40.720
We will need to change over to rigging mode.

72
00:05:40.720 --> 00:05:49.019
And now select the combined mesh and then select the separated body mesh, go up here

73
00:05:49.019 --> 00:05:56.779
to skin and then select copy skin weights and click on this to open up the options.

74
00:05:56.779 --> 00:06:02.339
In the skin options, check the settings, the default settings are fine and now select

75
00:06:02.339 --> 00:06:04.099
apply.

76
00:06:04.099 --> 00:06:10.899
I'm going to get out of this mode and now I want to export this as an FBX.

77
00:06:10.899 --> 00:06:19.679
To do this, select the separated body mesh and then select the root, go to file and choose

78
00:06:19.679 --> 00:06:21.859
export selection.

79
00:06:21.859 --> 00:06:27.120
Now before we move on, let's do a quick review of what we just covered.

80
00:06:27.120 --> 00:06:32.659
In the script editor, we can rerun the body and head skin weights validation and if no

81
00:06:32.659 --> 00:06:38.500
issues are found, a notification will appear letting us know that the check is complete.

82
00:06:38.500 --> 00:06:43.259
Now since the skin weights on the combined body have been updated, we will want the body

83
00:06:43.259 --> 00:06:49.819
only mesh to also be updated as that is the body we will be bringing into Unreal Engine.

84
00:06:49.819 --> 00:06:54.939
To transfer the updated skin weights from the combined body to the separated body, we will

85
00:06:54.939 --> 00:06:57.500
need to change over to rigging mode.

86
00:06:57.500 --> 00:07:04.100
Then select the combined body mesh and then the separated body mesh, then go to skin and

87
00:07:04.100 --> 00:07:08.339
select copy skin weights and open up the options.

88
00:07:08.339 --> 00:07:11.060
Select the settings and then select apply.

89
00:07:11.060 --> 00:07:18.219
From there, select the separated body mesh and root and export the selection as an FBX.

90
00:07:18.219 --> 00:07:22.419
Now let's return to Maya and execute step 4.

91
00:07:22.419 --> 00:07:27.819
Back inside of Maya, now that we have validated the head and body skin weights and saved the

92
00:07:27.819 --> 00:07:33.739
separated body and skeleton as an FBX, we can now run step 4 which will merge the body

93
00:07:33.739 --> 00:07:35.659
and head skin weights.

94
00:07:35.660 --> 00:07:43.220
I will select step 4 from line 191 to 197 and execute this.

95
00:07:43.220 --> 00:07:48.560
Step 4 will create new skin weights using the neck falloff weight blend mask that is

96
00:07:48.560 --> 00:07:52.620
located in the custom body integration workflow folder.

97
00:07:52.620 --> 00:07:58.100
This process writes new skin weights back into the DNA file and once it's complete,

98
00:07:58.100 --> 00:08:01.300
the DNA will be added to the export folder.

99
00:08:01.300 --> 00:08:05.500
Now this process may take up to 8 or 9 minutes to complete.

100
00:08:05.500 --> 00:08:10.620
I have sped up the recording for this process and left the script editor visible so that

101
00:08:10.620 --> 00:08:13.459
you can see what this will look like.

102
00:08:13.459 --> 00:08:19.139
As we wait for this to finish, let's do a quick review of step 4.

103
00:08:19.139 --> 00:08:24.019
Once the head and body skin weights have been validated, step 4 creates new skin weights

104
00:08:24.019 --> 00:08:27.860
using the neck falloff weight blend mask.

105
00:08:27.860 --> 00:08:33.440
Select all of step 4 from line 191 to 197 and execute it.

106
00:08:33.440 --> 00:08:38.680
This process writes the new skin weights to the DNA file and it may take several minutes

107
00:08:38.680 --> 00:08:41.280
to complete.

108
00:08:41.280 --> 00:08:43.600
Now that's it for this section.

109
00:08:43.600 --> 00:08:48.000
In the next section we will wrap up this workflow by executing step 5.

