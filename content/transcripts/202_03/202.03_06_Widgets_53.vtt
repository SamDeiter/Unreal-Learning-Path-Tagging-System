WEBVTT

1
00:00:00.000 --> 00:00:06.000
Hello and welcome to this video on Editor Utility Widgets.

2
00:00:06.000 --> 00:00:12.000
For this exercise we'll be making a tool that will quickly spawn actors into the world.

3
00:00:12.000 --> 00:00:15.000
For this tool I'm going to create a new asset.

4
00:00:15.000 --> 00:00:20.000
So if I right-hand click and I come up to Editor Utilities

5
00:00:20.000 --> 00:00:24.000
you'll see that there is an option for an Editor Utility Widget.

6
00:00:25.000 --> 00:00:28.000
I will select this

7
00:00:28.000 --> 00:00:34.000
and it's going to ask us to pick our root widget for the new Editor Utility Widget.

8
00:00:34.000 --> 00:00:38.000
We have a choice of a stack box or a grid panel straight away.

9
00:00:38.000 --> 00:00:41.000
But I'd actually like to use a canvas panel.

10
00:00:41.000 --> 00:00:44.000
So I'm going to come down to All Classes

11
00:00:44.000 --> 00:00:48.000
and you'll see here we have a canvas panel a little way down.

12
00:00:48.000 --> 00:00:53.000
So we're going to select the canvas panel and push select.

13
00:00:54.000 --> 00:01:02.000
Now that we've created it I'm going to rename this E-U-W for Editor Utility Widget

14
00:01:02.000 --> 00:01:07.000
underscore quick spawn.

15
00:01:11.000 --> 00:01:15.000
Now if I double click on this to open it up

16
00:01:17.000 --> 00:01:21.000
we'll get a window that looks like this.

17
00:01:21.000 --> 00:01:27.000
Now if you have used the UNG which is Unreal Motion Graphics

18
00:01:27.000 --> 00:01:31.000
then this will look pretty familiar to you at this point.

19
00:01:31.000 --> 00:01:38.000
What we have in the left-hand corner here which we have a library and a palette

20
00:01:38.000 --> 00:01:39.000
kind of do the same things.

21
00:01:39.000 --> 00:01:43.000
They just give you access to any of the components that you can add.

22
00:01:44.000 --> 00:01:47.000
Down here we will have the hierarchy.

23
00:01:47.000 --> 00:01:51.000
We're not going to do anything particularly complicated in this case.

24
00:01:51.000 --> 00:01:54.000
We're just going to be adding buttons to the canvas panel.

25
00:01:54.000 --> 00:01:57.000
Not going to have to go into too much detail here.

26
00:01:58.000 --> 00:02:06.000
And in the center we have the viewport which will show what our menu system is going to ultimately look like.

27
00:02:08.000 --> 00:02:12.000
Now on the right-hand side we have the details panel like usual.

28
00:02:12.000 --> 00:02:15.000
This is contextual depending on what you have selected.

29
00:02:15.000 --> 00:02:17.000
Like in the rest of Unreal Engine.

30
00:02:17.000 --> 00:02:21.000
The animations panel at the bottom we are not going to use.

31
00:02:21.000 --> 00:02:23.000
I'll just get rid of that for the time being.

32
00:02:24.000 --> 00:02:28.000
One of the things you'll notice is in the top right-hand corner

33
00:02:28.000 --> 00:02:32.000
we have a blue designer selected.

34
00:02:32.000 --> 00:02:34.000
These are actually tabs.

35
00:02:34.000 --> 00:02:36.000
Next to this there is a graph option.

36
00:02:36.000 --> 00:02:43.000
If we go into graph this is going to look more like the blueprinting graphs that we've had before.

37
00:02:43.000 --> 00:02:50.000
So this is the logic and the designer is what our widget is going to look like.

38
00:02:52.000 --> 00:02:56.000
So as mentioned I am going to add a button in.

39
00:02:56.000 --> 00:03:00.000
So if you look down here at the top here we have an option for an editor utility button.

40
00:03:00.000 --> 00:03:06.000
I'm just going to drag that in to our canvas panel.

41
00:03:06.000 --> 00:03:07.000
Drop it down.

42
00:03:07.000 --> 00:03:11.000
You now see that we've got this in our top right-hand corner.

43
00:03:12.000 --> 00:03:16.000
I'm quite happy with this being anchored to the top right-hand corner.

44
00:03:16.000 --> 00:03:23.000
This isn't a class on the UMG so we're not really going to go over how to make this look pretty at this point.

45
00:03:23.000 --> 00:03:27.000
So what I'm going to do is I'm also going to grab the text here

46
00:03:27.000 --> 00:03:31.000
and I'm going to place that on top of my button.

47
00:03:32.000 --> 00:03:36.000
I'm going to, and I want to change some of the details.

48
00:03:36.000 --> 00:03:44.000
So the text here I'm going to change that to have the words Spawn Bush.

49
00:03:48.000 --> 00:03:53.000
And I'm also going to reduce down the size of the font to 12.

50
00:03:53.000 --> 00:03:58.000
You can see I need to do a drop down of the font to get that down.

51
00:04:00.000 --> 00:04:04.000
Then what I'm going to do is I'm going to expand out the box a little bit.

52
00:04:04.000 --> 00:04:10.000
So we now have a button which says Spawn Bush.

53
00:04:11.000 --> 00:04:16.000
Now we want something to happen when we push this button.

54
00:04:16.000 --> 00:04:20.000
So in order to do that I need to select the button.

55
00:04:20.000 --> 00:04:24.000
If I come to the details panel and go all the way to the bottom,

56
00:04:24.000 --> 00:04:27.000
you can see here we have a number of events.

57
00:04:27.000 --> 00:04:33.000
So we can connect logic to any of these events we have on our canvas.

58
00:04:34.000 --> 00:04:39.000
On clicked, on pressed, on released, on hovered, on unhovered.

59
00:04:39.000 --> 00:04:43.000
We're just going to keep this simple and use on clicked.

60
00:04:43.000 --> 00:04:49.000
So if you push the plus button, you're going to see we get an event

61
00:04:49.000 --> 00:04:52.000
which is tied to that button click.

62
00:04:52.000 --> 00:04:56.000
Now let's drag off of this and type print string.

63
00:04:56.000 --> 00:04:59.000
Again we have our hello.

64
00:04:59.000 --> 00:05:03.000
I'm going to compile and save and jump back to here.

65
00:05:03.000 --> 00:05:09.000
Now to show an editor utility widget, what I'll need to do is right-hand click

66
00:05:09.000 --> 00:05:14.000
and you can see there is an option here for run editor utility widget.

67
00:05:14.000 --> 00:05:20.000
And as soon as I do, a new menu will appear with the Spawn Bush button.

68
00:05:20.000 --> 00:05:25.000
If I push this, you can see that we get the hello coming up in the top left-hand corner.

69
00:05:25.000 --> 00:05:31.000
I'm going to drag this and I'm going to dock it up here.

70
00:05:33.000 --> 00:05:38.000
So that I can see this button when I'm working on it.

71
00:05:38.000 --> 00:05:43.000
Right, so let's add some more code to this.

72
00:05:43.000 --> 00:05:49.000
Delete the print string.

73
00:05:49.000 --> 00:05:56.000
So the goal of this tool is to quickly spawn a bush in front of the camera.

74
00:05:56.000 --> 00:06:00.000
Now we're going to use a line trace to do that.

75
00:06:00.000 --> 00:06:05.000
The first thing we're going to need to do is get access to the camera.

76
00:06:05.000 --> 00:06:09.000
And that's not necessarily easy.

77
00:06:09.000 --> 00:06:19.000
If you right-hand click and you type in Unreal, that will give you access to the get Unreal editor subsystem.

78
00:06:19.000 --> 00:06:23.000
And this is a very useful subsystem.

79
00:06:23.000 --> 00:06:26.000
Primarily because you can do two things with it.

80
00:06:26.000 --> 00:06:38.000
You can either get the level viewport camera info or you can set the level viewport camera.

81
00:06:38.000 --> 00:06:44.000
So this is going to allow you control over the viewport camera.

82
00:06:44.000 --> 00:06:53.000
So, for example, if I was to connect the set up to this button.

83
00:06:53.000 --> 00:07:00.000
And whenever I push the spawn bush, it's going to move the camera to zero zero zero.

84
00:07:00.000 --> 00:07:04.000
So that's what would happen if we had set the camera.

85
00:07:04.000 --> 00:07:06.000
We're not actually going to set the camera.

86
00:07:06.000 --> 00:07:08.000
I'm going to delete that.

87
00:07:08.000 --> 00:07:13.000
We need to get its location.

88
00:07:13.000 --> 00:07:20.000
The reason we want its location is because we're going to do a line trace again out the front of the camera.

89
00:07:20.000 --> 00:07:27.000
So I want to get level viewport information.

90
00:07:27.000 --> 00:07:30.000
And let's add our line tracing again.

91
00:07:30.000 --> 00:07:39.000
So line trace by channel.

92
00:07:39.000 --> 00:07:45.000
The camera is going to be the start location for this line trace.

93
00:07:45.000 --> 00:08:01.000
Now, in order to get the end point, what we're going to need to do is we're going to have to add a thousand or however long we want to be able to trace to the vector location.

94
00:08:01.000 --> 00:08:07.000
But in order to do that, we're going to need the direction that the camera is pointing it.

95
00:08:07.000 --> 00:08:10.000
We don't really want it as a rotator.

96
00:08:10.000 --> 00:08:15.000
We want it as a vector so that we can easily work with it.

97
00:08:15.000 --> 00:08:28.000
And we can do that by dragging off of the camera rotation and type in get forward vector.

98
00:08:28.000 --> 00:08:37.000
And so this is going to give us a one centimeter vector in the direction forward of the camera.

99
00:08:37.000 --> 00:08:47.000
Now what we can do is we can multiply this, converting this to a float.

100
00:08:47.000 --> 00:08:55.000
And I am going to multiply that by 1000.

101
00:08:55.000 --> 00:09:04.000
And then I have to add that to the original camera location.

102
00:09:04.000 --> 00:09:07.000
That gives us our line trace.

103
00:09:07.000 --> 00:09:12.000
I can check this is working by drawing the debug.

104
00:09:12.000 --> 00:09:15.000
I'm going to make it forward duration.

105
00:09:15.000 --> 00:09:19.000
I'm going to increase draw time five should be fine.

106
00:09:19.000 --> 00:09:22.000
And hit compile, save.

107
00:09:22.000 --> 00:09:29.000
And now if I push spawn bush, I move, you can see the line trace.

108
00:09:29.000 --> 00:09:35.000
Spawn bush is the line trace there coming out of the camera.

109
00:09:35.000 --> 00:09:45.000
So the reason we're doing that is so that we can figure out the location that we want to place this spawned bush.

110
00:09:45.000 --> 00:09:50.000
So I'm going to chop back in.

111
00:09:50.000 --> 00:10:03.000
So the next thing that I'm going to want to do is spawn actor from class.

112
00:10:03.000 --> 00:10:14.000
This class is going to be a static mesh actor.

113
00:10:14.000 --> 00:10:18.000
And the spawn location is going to be a bit more difficult in this case.

114
00:10:18.000 --> 00:10:30.000
So I have right clicked on the spawn location and I have split the pins because I'm just going to work with the location at this point.

115
00:10:30.000 --> 00:10:33.000
There are two conditions in this instance.

116
00:10:33.000 --> 00:10:43.000
If the line trace does hit something, we will want to spawn the actor in the location that it hit.

117
00:10:43.000 --> 00:10:51.000
If it hasn't hit anything, we would want to spawn the actor in front of the camera.

118
00:10:51.000 --> 00:11:03.000
So in order to do that, rather than writing a branch dependent on the return value, I'm going to do this all in the input to the location.

119
00:11:03.000 --> 00:11:13.000
So if I drag off, I can type select vector.

120
00:11:13.000 --> 00:11:24.000
Now with the select vector, the return value, I can plug in to the pick A.

121
00:11:24.000 --> 00:11:30.000
So now if we hit something, it is going to place the bush in the first location.

122
00:11:30.000 --> 00:11:35.000
If we don't hit something, it will place it in the second location.

123
00:11:35.000 --> 00:11:40.000
So I am going to split the struct pin again.

124
00:11:40.000 --> 00:11:44.000
I'm going to find the out hit location.

125
00:11:44.000 --> 00:11:49.000
And that's A. So if the hit was successful, it would create it at A.

126
00:11:49.000 --> 00:11:53.000
If it was unsuccessful, I'm going to do that.

127
00:11:53.000 --> 00:11:56.000
I'm going to take the end of the line here.

128
00:11:56.000 --> 00:12:06.000
So that would be a thousand centimeters in front of the camera.

129
00:12:06.000 --> 00:12:17.000
Again, we won't be able to see anything unless we set the static mesh.

130
00:12:17.000 --> 00:12:24.000
I'm going to type set static mesh.

131
00:12:24.000 --> 00:12:32.000
That gives us our static mesh component.

132
00:12:32.000 --> 00:12:40.000
And the mesh itself, I'm going to drop down, I'm going to search for bush.

133
00:12:40.000 --> 00:12:43.000
And save and compile.

134
00:12:43.000 --> 00:12:46.000
Now let's test this out.

135
00:12:46.000 --> 00:12:51.000
So now if I'm down low and I push spawn bush, it will create the bush in front of me.

136
00:12:51.000 --> 00:12:55.000
If I look into the sky and push spawn bush, it's going to create the bush

137
00:12:55.000 --> 00:12:59.000
thousand centimeters in front of me.

138
00:12:59.000 --> 00:13:04.000
So you can see how this is quite a simple tool where you can query the environment

139
00:13:04.000 --> 00:13:10.000
and quickly create a bush in front of you.

140
00:13:10.000 --> 00:13:12.000
Now that's good. That's just one button.

141
00:13:12.000 --> 00:13:16.000
What I would like to do is convert this into a function so that we can create

142
00:13:16.000 --> 00:13:20.000
multiple buttons all that spawn different things.

143
00:13:20.000 --> 00:13:27.000
The way I'm going to do that is I'm going to zoom out a little bit here using the mouse wheel.

144
00:13:27.000 --> 00:13:34.000
I'm then going to left click and draw a line around the whole section.

145
00:13:34.000 --> 00:13:42.000
Then I will right click and select collapse to function.

146
00:13:42.000 --> 00:13:47.000
And that's going to create a new function here.

147
00:13:47.000 --> 00:14:01.000
And I am going to call this spawn static mesh.

148
00:14:01.000 --> 00:14:07.000
There's one more thing I'd like to do. Let's jump into this.

149
00:14:07.000 --> 00:14:12.000
And we have hard coded the SM underscore bush.

150
00:14:12.000 --> 00:14:16.000
I'd like to choose this every time we run the function.

151
00:14:16.000 --> 00:14:20.000
So I am going to make this easier to see.

152
00:14:20.000 --> 00:14:30.000
What I'm going to do is I'm going to drag the new mesh and I'm going to drag it onto the input purple node here.

153
00:14:30.000 --> 00:14:35.000
And you can now see that is set as an input.

154
00:14:35.000 --> 00:14:46.000
If I compile, jump back to the event graph here, I can select bush.

155
00:14:46.000 --> 00:14:51.000
And we have the spawn static mesh here.

156
00:14:51.000 --> 00:14:56.000
Now, if I was to jump back to the designer.

157
00:14:56.000 --> 00:14:59.000
So I duplicated this button.

158
00:14:59.000 --> 00:15:05.000
I duplicate this button, move it over here, change the text.

159
00:15:05.000 --> 00:15:12.000
So it says spawn chair.

160
00:15:12.000 --> 00:15:15.000
And I come down to the bottom.

161
00:15:15.000 --> 00:15:18.000
Oh, no, with the button selected, I come down to the bottom.

162
00:15:18.000 --> 00:15:22.000
Add another event on clicked.

163
00:15:22.000 --> 00:15:27.000
Then I can grab this function.

164
00:15:27.000 --> 00:15:33.000
Press control and D for duplicate.

165
00:15:33.000 --> 00:15:39.000
Connect it up. Now change that to share.

166
00:15:39.000 --> 00:15:44.000
And hey, Presto, we have SM underscore chair.

167
00:15:44.000 --> 00:15:50.000
And you can now see we have a new button up in the top here that says spawn chair.

168
00:15:50.000 --> 00:16:00.000
And now with one button, I will spawn a chair and with the other button, I will spawn a bush.

169
00:16:00.000 --> 00:16:07.000
Now, it's a very straightforward example here, but you can see how something like this could be built out.

170
00:16:07.000 --> 00:16:15.000
And this is often used in conjunction with more complicated assets, which have different settings required.

171
00:16:15.000 --> 00:16:21.000
So excellent. That is our second tool completely created, the quick spawn.

172
00:16:21.000 --> 00:16:26.000
Now, again, what I'm illustrating here is the trigger points.

173
00:16:26.000 --> 00:16:32.000
There's a big focus on the trigger points because there's lots of different functions, lots of different things that you can do with tools.

174
00:16:32.000 --> 00:16:43.000
But what's useful to understand is what kind of tool you create so that you know how to trigger it, where the best option is for triggering it.

175
00:16:46.000 --> 00:16:53.000
Thank you very much. In the next video, we will be looking at working with assets in the browser.

176
00:16:53.000 --> 00:16:57.000
We will be creating an editor asset utility.
