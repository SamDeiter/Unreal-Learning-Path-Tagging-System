WEBVTT

1
00:00:00.000 --> 00:00:05.260
In our final chapter here, let's look at some optimization tools.

2
00:00:05.260 --> 00:00:07.480
So first we'll talk about some UMG.

3
00:00:07.480 --> 00:00:11.880
This command will make it so that UMG widgets are only redrawn if and when they are changed

4
00:00:11.880 --> 00:00:13.080
or updated.

5
00:00:13.080 --> 00:00:18.600
So the command is enabled by doing the following and number one is enabled.

6
00:00:18.600 --> 00:00:22.980
So this slight enable global validation, invalidation.

7
00:00:22.980 --> 00:00:28.560
If you have space number one, it will enable it and zero will disable.

8
00:00:28.560 --> 00:00:32.260
So you can see the result of this when you have to do the following.

9
00:00:32.260 --> 00:00:38.360
So if we run the game in a new editor window, which is very important, don't just play in

10
00:00:38.360 --> 00:00:43.200
play in editor as part of the viewport there because you'll be rendering the editor as

11
00:00:43.200 --> 00:00:44.620
well as your project.

12
00:00:44.620 --> 00:00:49.400
So run the game in a new editor window, super important.

13
00:00:49.400 --> 00:00:51.560
Enable the stat slate.

14
00:00:51.560 --> 00:00:57.640
So open your console by pressing the tilde key and type stat slate and then input the

15
00:00:57.680 --> 00:01:00.280
command and watch the numbers.

16
00:01:00.280 --> 00:01:03.740
So this is a good one for UMG.

17
00:01:03.740 --> 00:01:06.640
We also want to check it on the device.

18
00:01:06.640 --> 00:01:11.480
So PC is great for emulation, but you'll always want to check on your target device.

19
00:01:11.480 --> 00:01:16.000
So the PC will give you a rough estimation of what's going on, but it's not going to

20
00:01:16.000 --> 00:01:20.140
be true for your project on that specific platform.

21
00:01:20.140 --> 00:01:26.440
So especially in HMI, check early and check often.

22
00:01:26.440 --> 00:01:30.720
We also have a tool called size map, which you can right click and find in this property

23
00:01:30.720 --> 00:01:31.720
here.

24
00:01:31.720 --> 00:01:38.840
Size map, you can also see the console shortcut alt shift and M and the size map will show

25
00:01:38.840 --> 00:01:42.800
you the size of the selected asset, including anything that it's linked to.

26
00:01:42.800 --> 00:01:48.160
So it's a visual representation and it really helps narrow down really large assets.

27
00:01:48.160 --> 00:01:53.760
So the tool will tell you both the size on disk and then also the memory and asset or

28
00:01:53.760 --> 00:01:54.860
groups will take up.

29
00:01:54.860 --> 00:02:00.700
So that's really useful when trying to optimize the package content there.

30
00:02:00.700 --> 00:02:02.420
Next we have statistics.

31
00:02:02.420 --> 00:02:07.340
So in our level editor window, we can also see statistics there and this window will

32
00:02:07.340 --> 00:02:10.740
break down the number of assets in our level files.

33
00:02:10.740 --> 00:02:15.980
So we can display that either on all levels or only specific levels.

34
00:02:15.980 --> 00:02:21.940
And the primitive stats information on the list here is about the number of triangles

35
00:02:21.940 --> 00:02:24.060
and memory consumption and count.

36
00:02:24.060 --> 00:02:30.780
So other data that's displayed on this list include things like texture usage and static

37
00:02:30.780 --> 00:02:32.620
mesh lighting information.

38
00:02:32.620 --> 00:02:38.860
But this window can quickly illustrate which assets are consuming the most memory.

39
00:02:38.860 --> 00:02:45.380
So it's definitely worth looking at this when looking to optimize your projects.

40
00:02:45.380 --> 00:02:48.300
There's also a merge actor tool inside of Unreal Engine.

41
00:02:48.300 --> 00:02:54.660
So when we're looking at the merge actor tool, it's just a way to combine multiple

42
00:02:54.660 --> 00:02:57.860
meshes into one static mesh and one material.

43
00:02:57.860 --> 00:03:03.900
So the tool will take all of the selected meshes and materials and merge them into a

44
00:03:03.900 --> 00:03:06.280
mesh and into one material.

45
00:03:06.280 --> 00:03:09.840
So you used to have to do this inside your DCC, but you don't need to do that anymore.

46
00:03:09.840 --> 00:03:14.860
You can do it inside of Unreal Engine, which makes it way less time consuming and doing

47
00:03:14.940 --> 00:03:18.620
it will reduce the amount of draw calls, as we were speaking about before in reference

48
00:03:18.620 --> 00:03:19.620
to draw calls.

49
00:03:19.620 --> 00:03:24.380
It just makes things cheaper to render, which is especially important for especially things

50
00:03:24.380 --> 00:03:27.300
like VR and mobile applications.

51
00:03:27.300 --> 00:03:32.620
So each material is an object, which means that it has to be rendered each time.

52
00:03:32.620 --> 00:03:36.820
And so an object with three materials will be rendered a minimum of three times, which

53
00:03:36.820 --> 00:03:41.420
is why you want to reduce as many draw calls as you can.

54
00:03:41.420 --> 00:03:46.820
So this tool will take all your selected static meshes and materials.

55
00:03:46.820 --> 00:03:52.820
It'll create an atlas out of them, reducing it down into one mesh with one material.

56
00:03:52.820 --> 00:03:56.700
So how this tool works depends on your content setup.

57
00:03:56.700 --> 00:04:02.220
So content, you know, as long as it's all set up in the zero to one UV space, that will

58
00:04:02.220 --> 00:04:04.660
help it work better.

59
00:04:04.660 --> 00:04:09.820
Assets that use world position offset or world based texturing will not bake down correctly.

60
00:04:09.820 --> 00:04:15.340
And then also, if you don't like the results, try using something like a substance pater

61
00:04:15.340 --> 00:04:17.220
to combine the meshes.

62
00:04:17.220 --> 00:04:21.620
So an external DCC you might have better mileage with as well.

63
00:04:21.620 --> 00:04:24.780
So let's look at some of the settings of the Merge Actor tool.

64
00:04:24.780 --> 00:04:29.720
So it's found by going to Window, Developer Tools, Merge Actor.

65
00:04:29.720 --> 00:04:35.060
And again, if you just click Window and type in what you're looking for, it'll automatically

66
00:04:35.580 --> 00:04:40.180
select the pane as well that you're wanting to open.

67
00:04:40.180 --> 00:04:43.620
So you'll need to do a few things here.

68
00:04:43.620 --> 00:04:47.080
We want to make sure the Merge Actor tool is open.

69
00:04:47.080 --> 00:04:51.060
Then select all the items we want to merge into one static mesh.

70
00:04:51.060 --> 00:04:53.340
Make sure that the following options are checked.

71
00:04:53.340 --> 00:04:57.900
So we've got on the bottom here, we've got pivot point at zero.

72
00:04:57.900 --> 00:05:02.560
We've got Merge Physics Data and also Generate Lightmap UV.

73
00:05:02.560 --> 00:05:09.160
We also want to set the LOD selection type to use a specific LOD level.

74
00:05:09.160 --> 00:05:16.640
And then in the materials, we want to set the texture size to 2048 by 2048.

75
00:05:16.640 --> 00:05:22.480
We want to size the type to use bias based on the texture size.

76
00:05:22.480 --> 00:05:25.300
And then also enable all the maps we have.

77
00:05:25.300 --> 00:05:29.860
So check replace source actors and then press the Merge Actors button.

78
00:05:29.860 --> 00:05:33.740
And then tool can take anywhere between a few seconds to a few minutes, depending on

79
00:05:33.740 --> 00:05:35.720
what you're trying to merge.

80
00:05:35.720 --> 00:05:38.400
And it depends what you had selected.

81
00:05:38.400 --> 00:05:42.300
And you should do this at the end of your project right after you've completed all the

82
00:05:42.300 --> 00:05:46.680
content and you're happy with the layout because if you need to redo it, that can be the most

83
00:05:46.680 --> 00:05:48.800
time consuming to redo.

84
00:05:48.800 --> 00:05:52.560
And another tool we can make use of is the Memory Parting Tool.

85
00:05:52.560 --> 00:05:55.600
So this is another console command.

86
00:05:55.600 --> 00:06:04.300
So you use a tilde key in your project editor and then you can type memory part dash full.

87
00:06:04.300 --> 00:06:07.740
And it provides a closer look at the memory usage on devices.

88
00:06:07.740 --> 00:06:12.720
So once the app is built in the development configuration and is loaded to the device

89
00:06:12.720 --> 00:06:18.220
that you can use the console command on, if you're using an Android device, it's four

90
00:06:18.220 --> 00:06:21.260
finger press on the Android to open the console.

91
00:06:21.500 --> 00:06:25.980
And then you can just enter this console command and it's essentially a memory snapshot, which

92
00:06:25.980 --> 00:06:28.860
is saved into the projects directory on the device.

93
00:06:28.860 --> 00:06:37.180
So usually it'll be something like, you know, UE5 game dash your app dash your app dash

94
00:06:37.180 --> 00:06:41.340
saved dash profile in dash memory ports.

95
00:06:41.340 --> 00:06:44.200
You'll likely find it somewhere in that directory.

96
00:06:44.200 --> 00:06:49.720
So again, it's in your app, saved, profiling, memory ports.

97
00:06:49.720 --> 00:06:54.540
So if you search the term listing all textures, you will find a list of each and every texture

98
00:06:54.540 --> 00:06:59.740
used along with detailed information about the texture type, the group size and the memory

99
00:06:59.740 --> 00:07:06.200
footprint and the larger textures are represented first, which is quite handy there.

100
00:07:06.200 --> 00:07:10.900
So it's a quick and easy way to spot the textures that are costing the most amount of memory

101
00:07:10.900 --> 00:07:16.340
and definitely useful to run on the target platform that you're looking for.

102
00:07:16.340 --> 00:07:21.280
We have a few other stack commands as well, which provide pretty detailed information

103
00:07:21.280 --> 00:07:22.280
on our project.

104
00:07:22.280 --> 00:07:25.120
So there are many more than what's listed here.

105
00:07:25.120 --> 00:07:30.600
A good target of draw calls, for example, in an optimized scene is below a hundred on

106
00:07:30.600 --> 00:07:35.720
something like a Galaxy Tab S6, 50 or less on lower end hardware.

107
00:07:35.720 --> 00:07:39.160
But again, hardware quickly becomes outdated.

108
00:07:39.160 --> 00:07:44.920
So it's best to check what your target for the optimization is and process the scene

109
00:07:44.920 --> 00:07:45.920
based on that.

110
00:07:46.660 --> 00:07:53.060
We've got the StatGPU, StatUnit, StatUnitGraph, StatTextureGroup and StatRHI.

111
00:07:53.060 --> 00:07:58.580
And they're all useful commands to get you going on your journey of optimization.

112
00:07:58.580 --> 00:08:01.360
Looking at PSO caching as well.

113
00:08:01.360 --> 00:08:05.740
So PSO caching is a way to speed up the rendering of your package projects when deployed to

114
00:08:05.740 --> 00:08:06.740
device.

115
00:08:06.740 --> 00:08:13.540
So PSO caching works by first creating a list of all the needed shaders that are required

116
00:08:13.800 --> 00:08:17.400
by the materials that are used in our Unreal project.

117
00:08:17.400 --> 00:08:21.920
And that list is then used to help speed up the compiling process of the shaders when

118
00:08:21.920 --> 00:08:24.320
they are first encountered by our Unreal project.

119
00:08:24.320 --> 00:08:30.240
So in terms help essentially reduce any of the hitches of the project might encounter

120
00:08:30.240 --> 00:08:33.160
when a material requires a new shader to be compiled.

121
00:08:33.160 --> 00:08:39.720
So PSO caching doesn't require our artwork to be set or created in a specific way.

122
00:08:39.720 --> 00:08:42.520
It's just something that is enabled at build time.

123
00:08:42.540 --> 00:08:47.540
And so because of this, setting up PSO caching can be a complex process that is generally

124
00:08:47.540 --> 00:08:51.660
best handled by a programmer or an advanced technical artist.

125
00:08:51.660 --> 00:08:57.380
It's important to know about these as it greatly helps load times and reduces hitches.

126
00:08:57.380 --> 00:09:02.360
But if you want to know more about PSO caching, there's some great documentation.

127
00:09:02.360 --> 00:09:09.780
So if you just type in on Google Unreal Engine docs and then type in PSO caching, you'll

128
00:09:09.800 --> 00:09:15.400
find the correct documentation page on exactly the step by step process of how to set that

129
00:09:15.400 --> 00:09:16.720
up for your scenes.
