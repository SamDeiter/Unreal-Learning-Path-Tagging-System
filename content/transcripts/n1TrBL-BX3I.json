[
  {
    "text": "Howdy y'all. My name is Matt Ostel. I am",
    "start": 1.439,
    "duration": 3.201
  },
  {
    "text": "a senior technical artist on the",
    "start": 3.36,
    "duration": 3.12
  },
  {
    "text": "developer relations team here at Epic",
    "start": 4.64,
    "duration": 4.48
  },
  {
    "text": "Games. And today I have for you a",
    "start": 6.48,
    "duration": 5.6
  },
  {
    "text": "literal fever dream that I had about",
    "start": 9.12,
    "duration": 5.36
  },
  {
    "text": "using Niagara to represent and interact",
    "start": 12.08,
    "duration": 4.16
  },
  {
    "text": "with the units of a real-time strategy",
    "start": 14.48,
    "duration": 3.76
  },
  {
    "text": "game. And I decided to do it on a phone",
    "start": 16.24,
    "duration": 4.959
  },
  {
    "text": "as a little added challenge. So let's",
    "start": 18.24,
    "duration": 5.68
  },
  {
    "text": "take a look at what I've got.",
    "start": 21.199,
    "duration": 5.041
  },
  {
    "text": "So what I've got here are about 4,000",
    "start": 23.92,
    "duration": 4.8
  },
  {
    "text": "units. And you can see they're all uh",
    "start": 26.24,
    "duration": 4.64
  },
  {
    "text": "little little flip book sprites, but",
    "start": 28.72,
    "duration": 3.519
  },
  {
    "text": "I've got like the little health of the",
    "start": 30.88,
    "duration": 3.28
  },
  {
    "text": "units. I've got all these different um",
    "start": 32.239,
    "duration": 3.761
  },
  {
    "text": "these different units here. And I can",
    "start": 34.16,
    "duration": 3.28
  },
  {
    "text": "come over here. I can select these",
    "start": 36.0,
    "duration": 3.92
  },
  {
    "text": "units. I can tell them where to move.",
    "start": 37.44,
    "duration": 4.799
  },
  {
    "text": "And these are all it's just one Niagara",
    "start": 39.92,
    "duration": 4.159
  },
  {
    "text": "particle system, right? You can even see",
    "start": 42.239,
    "duration": 3.041
  },
  {
    "text": "that the units are kind of getting out",
    "start": 44.079,
    "duration": 2.32
  },
  {
    "text": "of each other's way and trying to go",
    "start": 45.28,
    "duration": 2.64
  },
  {
    "text": "where they're supposed to go. And of",
    "start": 46.399,
    "duration": 3.041
  },
  {
    "text": "course, we've got a little fog of war",
    "start": 47.92,
    "duration": 3.52
  },
  {
    "text": "effect going on in the corner, right?",
    "start": 49.44,
    "duration": 4.56
  },
  {
    "text": "So, pretty pretty cool. A lot of fun.",
    "start": 51.44,
    "duration": 5.04
  },
  {
    "text": "Um, and I wanted to talk about this in",
    "start": 54.0,
    "duration": 4.239
  },
  {
    "text": "the context of a real-time strategy game",
    "start": 56.48,
    "duration": 5.04
  },
  {
    "text": "because there are a lot of challenges in",
    "start": 58.239,
    "duration": 6.24
  },
  {
    "text": "a real-time strategy game that are",
    "start": 61.52,
    "duration": 4.88
  },
  {
    "text": "difficult to overcome using the built-in",
    "start": 64.479,
    "duration": 3.68
  },
  {
    "text": "some of the built-in sort of normal",
    "start": 66.4,
    "duration": 3.68
  },
  {
    "text": "pathways you might take in the Unreal",
    "start": 68.159,
    "duration": 3.28
  },
  {
    "text": "Engine. We've got a bunch of things that",
    "start": 70.08,
    "duration": 2.96
  },
  {
    "text": "are all relevant to each other, all",
    "start": 71.439,
    "duration": 2.881
  },
  {
    "text": "relevant to gameplay, need to be",
    "start": 73.04,
    "duration": 2.72
  },
  {
    "text": "interacted with, need to be kept track",
    "start": 74.32,
    "duration": 4.799
  },
  {
    "text": "of. Um, and the thing is, you shouldn't",
    "start": 75.76,
    "duration": 7.52
  },
  {
    "text": "use just characters to do this, right? a",
    "start": 79.119,
    "duration": 6.561
  },
  {
    "text": "a the a character base class with a",
    "start": 83.28,
    "duration": 4.64
  },
  {
    "text": "skeletal mesh and a bunch of bones and a",
    "start": 85.68,
    "duration": 4.72
  },
  {
    "text": "collision capsule and navigation. It's",
    "start": 87.92,
    "duration": 4.559
  },
  {
    "text": "not necessarily the right choice for",
    "start": 90.4,
    "duration": 5.84
  },
  {
    "text": "this specific application. So we need a",
    "start": 92.479,
    "duration": 5.841
  },
  {
    "text": "system that can efficiently represent",
    "start": 96.24,
    "duration": 4.559
  },
  {
    "text": "the units in allow interaction with the",
    "start": 98.32,
    "duration": 4.24
  },
  {
    "text": "units and the units to interact with",
    "start": 100.799,
    "duration": 4.0
  },
  {
    "text": "each other, store information about",
    "start": 102.56,
    "duration": 4.72
  },
  {
    "text": "those units and share information about",
    "start": 104.799,
    "duration": 4.081
  },
  {
    "text": "those units with other systems in the",
    "start": 107.28,
    "duration": 2.879
  },
  {
    "text": "engine. So we can do some cool stuff",
    "start": 108.88,
    "duration": 3.12
  },
  {
    "text": "with them. Right now, there is a system",
    "start": 110.159,
    "duration": 3.201
  },
  {
    "text": "for this in the Unreal Engine. Does",
    "start": 112.0,
    "duration": 3.04
  },
  {
    "text": "anybody know what it's called? Raise",
    "start": 113.36,
    "duration": 3.28
  },
  {
    "text": "your hand. Yeah, you in the back. What's",
    "start": 115.04,
    "duration": 2.56
  },
  {
    "text": "it called?",
    "start": 116.64,
    "duration": 2.799
  },
  {
    "text": ">> Data.",
    "start": 117.6,
    "duration": 5.119
  },
  {
    "text": ">> Wrong. It's called mass.",
    "start": 119.439,
    "duration": 5.601
  },
  {
    "text": "Mass entity is a framework for data",
    "start": 122.719,
    "duration": 4.641
  },
  {
    "text": "oriented calculations using entities,",
    "start": 125.04,
    "duration": 4.559
  },
  {
    "text": "fragments, and archetypes. Mass gameplay",
    "start": 127.36,
    "duration": 4.0
  },
  {
    "text": "is a plug-in that builds on that that",
    "start": 129.599,
    "duration": 3.201
  },
  {
    "text": "includes functionality for world",
    "start": 131.36,
    "duration": 2.8
  },
  {
    "text": "representation, spawning, logging,",
    "start": 132.8,
    "duration": 3.2
  },
  {
    "text": "replication, even state tree. There's",
    "start": 134.16,
    "duration": 4.4
  },
  {
    "text": "also mass avoidance which uses forces to",
    "start": 136.0,
    "duration": 4.4
  },
  {
    "text": "get all of your entities to avoid each",
    "start": 138.56,
    "duration": 3.84
  },
  {
    "text": "other. It's really really cool. And the",
    "start": 140.4,
    "duration": 5.12
  },
  {
    "text": "thing is mass is objectively in my",
    "start": 142.4,
    "duration": 5.6
  },
  {
    "text": "opinion the right system to use to build",
    "start": 145.52,
    "duration": 5.04
  },
  {
    "text": "a real-time strategy game. But I am a",
    "start": 148.0,
    "duration": 4.879
  },
  {
    "text": "tech artist and that sign can't stop me",
    "start": 150.56,
    "duration": 6.08
  },
  {
    "text": "because I can't read. So strap in",
    "start": 152.879,
    "duration": 5.601
  },
  {
    "text": "because really to me this talk is about",
    "start": 156.64,
    "duration": 4.4
  },
  {
    "text": "bringing the fire of graphics",
    "start": 158.48,
    "duration": 5.92
  },
  {
    "text": "programming to the tech artist. And if I",
    "start": 161.04,
    "duration": 5.839
  },
  {
    "text": "suffer aven consequences for it, then so",
    "start": 164.4,
    "duration": 4.96
  },
  {
    "text": "be it. So what are we actually going to",
    "start": 166.879,
    "duration": 4.481
  },
  {
    "text": "learn today? Uh like I said, there are",
    "start": 169.36,
    "duration": 3.519
  },
  {
    "text": "interesting challenges with the",
    "start": 171.36,
    "duration": 4.0
  },
  {
    "text": "real-time strategy genre. It gives me a",
    "start": 172.879,
    "duration": 4.881
  },
  {
    "text": "really easy framing to introduce to you",
    "start": 175.36,
    "duration": 3.68
  },
  {
    "text": "some really powerful tools and",
    "start": 177.76,
    "duration": 2.8
  },
  {
    "text": "techniques with much broader",
    "start": 179.04,
    "duration": 3.919
  },
  {
    "text": "applications in a cohesive way. So we're",
    "start": 180.56,
    "duration": 4.24
  },
  {
    "text": "going to learn how we can use Niagara as",
    "start": 182.959,
    "duration": 4.56
  },
  {
    "text": "a compute shader to represent and drive",
    "start": 184.8,
    "duration": 4.56
  },
  {
    "text": "the logic of our units both on the CPU",
    "start": 187.519,
    "duration": 4.64
  },
  {
    "text": "and the GPU. And while we're in Niagara",
    "start": 189.36,
    "duration": 4.48
  },
  {
    "text": "land, we'll get a quick example of how",
    "start": 192.159,
    "duration": 3.681
  },
  {
    "text": "to use neighbor grid 3D so our units can",
    "start": 193.84,
    "duration": 3.84
  },
  {
    "text": "avoid each other. And we're also going",
    "start": 195.84,
    "duration": 3.92
  },
  {
    "text": "to learn how we can pack uh a lot of",
    "start": 197.68,
    "duration": 4.32
  },
  {
    "text": "information into a single float. And",
    "start": 199.76,
    "duration": 3.839
  },
  {
    "text": "finally, we'll use the information from",
    "start": 202.0,
    "duration": 3.68
  },
  {
    "text": "the Niagara system to draw a distance",
    "start": 203.599,
    "duration": 3.841
  },
  {
    "text": "field for the fog of war effect. Ready",
    "start": 205.68,
    "duration": 4.32
  },
  {
    "text": "to roll? Cool. All right. So, let's talk",
    "start": 207.44,
    "duration": 4.56
  },
  {
    "text": "about compute shaders.",
    "start": 210.0,
    "duration": 4.48
  },
  {
    "text": "Uh you've probably heard something, I've",
    "start": 212.0,
    "duration": 3.92
  },
  {
    "text": "probably even said this to you, that",
    "start": 214.48,
    "duration": 3.759
  },
  {
    "text": "Niagara is basically a compute shader.",
    "start": 215.92,
    "duration": 4.64
  },
  {
    "text": "And compute shaders are basically a",
    "start": 218.239,
    "duration": 4.161
  },
  {
    "text": "shading stage used for computing",
    "start": 220.56,
    "duration": 3.84
  },
  {
    "text": "arbitrary information, not meant",
    "start": 222.4,
    "duration": 3.68
  },
  {
    "text": "necessarily for drawing pixels or",
    "start": 224.4,
    "duration": 4.32
  },
  {
    "text": "triangles. And all it really is is we're",
    "start": 226.08,
    "duration": 4.96
  },
  {
    "text": "taking inputs from the CPU, handing it",
    "start": 228.72,
    "duration": 3.84
  },
  {
    "text": "off to the GPU, said, \"Hey, can you run",
    "start": 231.04,
    "duration": 3.919
  },
  {
    "text": "some some math on this?\" And then we can",
    "start": 232.56,
    "duration": 4.239
  },
  {
    "text": "get the results back onto the CPU,",
    "start": 234.959,
    "duration": 4.081
  },
  {
    "text": "right? Optionally,",
    "start": 236.799,
    "duration": 4.0
  },
  {
    "text": "uh, so we're going to start in Niagara.",
    "start": 239.04,
    "duration": 3.119
  },
  {
    "text": "Of course, I've I've already done a",
    "start": 240.799,
    "duration": 2.961
  },
  {
    "text": "little bit of setup cuz I know this demo",
    "start": 242.159,
    "duration": 3.681
  },
  {
    "text": "is going to be a little tight for time,",
    "start": 243.76,
    "duration": 4.0
  },
  {
    "text": "but basically what I've got here is a",
    "start": 245.84,
    "duration": 4.319
  },
  {
    "text": "GPU SIM particle with fixed bounds",
    "start": 247.76,
    "duration": 4.88
  },
  {
    "text": "already set. I've got a bunch of user",
    "start": 250.159,
    "duration": 4.401
  },
  {
    "text": "parameters. So, what we're going to do",
    "start": 252.64,
    "duration": 4.319
  },
  {
    "text": "in our little demo today is not the full",
    "start": 254.56,
    "duration": 4.799
  },
  {
    "text": "thing that you saw. Again, tight for",
    "start": 256.959,
    "duration": 3.921
  },
  {
    "text": "time. Uh, but we're going to take our",
    "start": 259.359,
    "duration": 2.641
  },
  {
    "text": "little particles. We're going to give",
    "start": 260.88,
    "duration": 3.12
  },
  {
    "text": "them random goal positions that they're",
    "start": 262.0,
    "duration": 5.6
  },
  {
    "text": "supposed to move to based on relative to",
    "start": 264.0,
    "duration": 4.96
  },
  {
    "text": "where they are. So instead of just",
    "start": 267.6,
    "duration": 2.879
  },
  {
    "text": "constantly bouncing around the screen,",
    "start": 268.96,
    "duration": 3.36
  },
  {
    "text": "it's to say, okay, you only move 500",
    "start": 270.479,
    "duration": 4.0
  },
  {
    "text": "units away from where you are. So we've",
    "start": 272.32,
    "duration": 4.319
  },
  {
    "text": "got an input vector array of goal",
    "start": 274.479,
    "duration": 4.561
  },
  {
    "text": "positions that is set to sync CPU to",
    "start": 276.639,
    "duration": 5.12
  },
  {
    "text": "GPU. We've also got another user",
    "start": 279.04,
    "duration": 5.68
  },
  {
    "text": "parameter here called out positions. And",
    "start": 281.759,
    "duration": 5.281
  },
  {
    "text": "this is sync GPU to CPU. So we're going",
    "start": 284.72,
    "duration": 3.759
  },
  {
    "text": "to write the position of the particle",
    "start": 287.04,
    "duration": 3.599
  },
  {
    "text": "into this array from the emitter and",
    "start": 288.479,
    "duration": 4.401
  },
  {
    "text": "then read that back in blueprint. And",
    "start": 290.639,
    "duration": 4.161
  },
  {
    "text": "just as a little pro tip, uh definitely",
    "start": 292.88,
    "duration": 4.08
  },
  {
    "text": "set the max elements on that, otherwise",
    "start": 294.8,
    "duration": 4.64
  },
  {
    "text": "this won't work. So that's all of our",
    "start": 296.96,
    "duration": 4.799
  },
  {
    "text": "setup. And then I hit uh Windows D",
    "start": 299.44,
    "duration": 4.8
  },
  {
    "text": "because I'm really good at my job. There",
    "start": 301.759,
    "duration": 6.801
  },
  {
    "text": "we go. There we go. Um and then I've",
    "start": 304.24,
    "duration": 6.239
  },
  {
    "text": "also got a a texture render target user",
    "start": 308.56,
    "duration": 4.32
  },
  {
    "text": "parameter down here that is set to RGBA",
    "start": 310.479,
    "duration": 4.401
  },
  {
    "text": "32F because we want to have 32 bits of",
    "start": 312.88,
    "duration": 4.64
  },
  {
    "text": "precision for this. And then so I've set",
    "start": 314.88,
    "duration": 4.4
  },
  {
    "text": "that uh emitter property over here so",
    "start": 317.52,
    "duration": 3.28
  },
  {
    "text": "everything links up nicely. I've also",
    "start": 319.28,
    "duration": 3.6
  },
  {
    "text": "got a module here that basically",
    "start": 320.8,
    "duration": 4.32
  },
  {
    "text": "initializes the size of the render",
    "start": 322.88,
    "duration": 4.24
  },
  {
    "text": "target and the size of the output array",
    "start": 325.12,
    "duration": 3.84
  },
  {
    "text": "to match the size of the input array.",
    "start": 327.12,
    "duration": 2.88
  },
  {
    "text": "So, this is going to be our kind of",
    "start": 328.96,
    "duration": 4.0
  },
  {
    "text": "source of truth. And then down here, I'm",
    "start": 330.0,
    "duration": 4.479
  },
  {
    "text": "spawning particles in a grid because I",
    "start": 332.96,
    "duration": 2.64
  },
  {
    "text": "didn't want them to collide with each",
    "start": 334.479,
    "duration": 3.921
  },
  {
    "text": "other right off the hop. And I think",
    "start": 335.6,
    "duration": 4.96
  },
  {
    "text": "that's all I've got and we can start",
    "start": 338.4,
    "duration": 3.28
  },
  {
    "text": "getting into it. So, the first thing",
    "start": 340.56,
    "duration": 3.04
  },
  {
    "text": "we're going to do in our particle",
    "start": 341.68,
    "duration": 3.2
  },
  {
    "text": "update, we're going to create a new",
    "start": 343.6,
    "duration": 3.36
  },
  {
    "text": "Scratchpod nodule which we will name",
    "start": 344.88,
    "duration": 5.92
  },
  {
    "text": "move units toward goal.",
    "start": 346.96,
    "duration": 5.679
  },
  {
    "text": "And we need a few inputs to this. One of",
    "start": 350.8,
    "duration": 5.36
  },
  {
    "text": "them is our vector array",
    "start": 352.639,
    "duration": 6.961
  },
  {
    "text": "and another is the unique ID. The thing",
    "start": 356.16,
    "duration": 4.96
  },
  {
    "text": "I forgot to mention is that this",
    "start": 359.6,
    "duration": 4.24
  },
  {
    "text": "particle system, this emitter is set to",
    "start": 361.12,
    "duration": 5.359
  },
  {
    "text": "uh requires persistent ids because the",
    "start": 363.84,
    "duration": 4.079
  },
  {
    "text": "thing that matters, the thing that",
    "start": 366.479,
    "duration": 2.961
  },
  {
    "text": "identifies this particle between both",
    "start": 367.919,
    "duration": 4.481
  },
  {
    "text": "systems is the index in the array. So",
    "start": 369.44,
    "duration": 5.28
  },
  {
    "text": "the zeroth particle is the zero index in",
    "start": 372.4,
    "duration": 4.0
  },
  {
    "text": "the array is the zero position in the",
    "start": 374.72,
    "duration": 3.12
  },
  {
    "text": "render target. We can associate all",
    "start": 376.4,
    "duration": 3.76
  },
  {
    "text": "those things together. So, we use unique",
    "start": 377.84,
    "duration": 5.919
  },
  {
    "text": "ID, not execution index. And then",
    "start": 380.16,
    "duration": 5.2
  },
  {
    "text": "finally, we need the current particle",
    "start": 383.759,
    "duration": 2.88
  },
  {
    "text": "position because we're going to we're",
    "start": 385.36,
    "duration": 3.04
  },
  {
    "text": "going to push it toward that that",
    "start": 386.639,
    "duration": 3.921
  },
  {
    "text": "location. So, I'm going to grab the",
    "start": 388.4,
    "duration": 4.239
  },
  {
    "text": "vector array and I'm going to say get a",
    "start": 390.56,
    "duration": 4.56
  },
  {
    "text": "value off this vector array. And then",
    "start": 392.639,
    "duration": 3.84
  },
  {
    "text": "I'm going to grab the position value.",
    "start": 395.12,
    "duration": 3.68
  },
  {
    "text": "I'm going to say truncate, please. And",
    "start": 396.479,
    "duration": 4.56
  },
  {
    "text": "then I'm going to convert that to a",
    "start": 398.8,
    "duration": 4.0
  },
  {
    "text": "vector. So, we can just operate in that",
    "start": 401.039,
    "duration": 4.401
  },
  {
    "text": "space. And then in order to get the",
    "start": 402.8,
    "duration": 5.04
  },
  {
    "text": "direction from the current position to",
    "start": 405.44,
    "duration": 3.44
  },
  {
    "text": "the goal, we just do a little",
    "start": 407.84,
    "duration": 3.199
  },
  {
    "text": "subtraction. And then finally, I'm going",
    "start": 408.88,
    "duration": 5.2
  },
  {
    "text": "to multiply this by a optional scalar",
    "start": 411.039,
    "duration": 4.641
  },
  {
    "text": "value, which I just conveniently convert",
    "start": 414.08,
    "duration": 4.399
  },
  {
    "text": "to a float, and drag that on as an",
    "start": 415.68,
    "duration": 4.959
  },
  {
    "text": "input, which we're just going to leave",
    "start": 418.479,
    "duration": 4.72
  },
  {
    "text": "named as is. And then we're going to set",
    "start": 420.639,
    "duration": 5.761
  },
  {
    "text": "a vector value on the output here which",
    "start": 423.199,
    "duration": 6.56
  },
  {
    "text": "we're going to call physics force",
    "start": 426.4,
    "duration": 7.12
  },
  {
    "text": "which is a in the transient name space.",
    "start": 429.759,
    "duration": 5.521
  },
  {
    "text": "And so this is going to say hey this is",
    "start": 433.52,
    "duration": 4.079
  },
  {
    "text": "this is how much force is currently",
    "start": 435.28,
    "duration": 6.319
  },
  {
    "text": "applied to this particle.",
    "start": 437.599,
    "duration": 6.241
  },
  {
    "text": "And then what's really nice about this",
    "start": 441.599,
    "duration": 4.0
  },
  {
    "text": "is that that's then going to get picked",
    "start": 443.84,
    "duration": 4.16
  },
  {
    "text": "up by this solve forces and velocities",
    "start": 445.599,
    "duration": 4.16
  },
  {
    "text": "node. Right? I'm just telling the forces",
    "start": 448.0,
    "duration": 4.0
  },
  {
    "text": "and velocities solver, here's how much",
    "start": 449.759,
    "duration": 4.321
  },
  {
    "text": "force we have to work with. Okay. And",
    "start": 452.0,
    "duration": 4.319
  },
  {
    "text": "then I always have to make sure that I",
    "start": 454.08,
    "duration": 3.679
  },
  {
    "text": "link my inputs. So, we're going to start",
    "start": 456.319,
    "duration": 3.6
  },
  {
    "text": "with the goal positions. And then I'm",
    "start": 457.759,
    "duration": 3.681
  },
  {
    "text": "going to set the magnitude to one. And",
    "start": 459.919,
    "duration": 2.641
  },
  {
    "text": "you can see the particles are going to",
    "start": 461.44,
    "duration": 3.44
  },
  {
    "text": "start moving. So, they kind of swapped",
    "start": 462.56,
    "duration": 3.52
  },
  {
    "text": "positions because they didn't get",
    "start": 464.88,
    "duration": 3.039
  },
  {
    "text": "spawned in their right spot. Then I can",
    "start": 466.08,
    "duration": 3.76
  },
  {
    "text": "go over into the uh goal positions array",
    "start": 467.919,
    "duration": 3.68
  },
  {
    "text": "because I've got this set up as debug",
    "start": 469.84,
    "duration": 3.28
  },
  {
    "text": "and I can say, \"Hey, you're actually",
    "start": 471.599,
    "duration": 3.6
  },
  {
    "text": "supposed to move much farther away from",
    "start": 473.12,
    "duration": 5.32
  },
  {
    "text": "each other.",
    "start": 475.199,
    "duration": 3.241
  },
  {
    "text": "So, little bit of debug there, but you",
    "start": 478.72,
    "duration": 3.039
  },
  {
    "text": "can see, you know, everything's working.",
    "start": 480.4,
    "duration": 2.639
  },
  {
    "text": "I've got these little sprites moving",
    "start": 481.759,
    "duration": 3.28
  },
  {
    "text": "around. And then next up, we're going to",
    "start": 483.039,
    "duration": 5.121
  },
  {
    "text": "jump into the blueprint. Oh, next up,",
    "start": 485.039,
    "duration": 4.641
  },
  {
    "text": "we're going to finalize the particles",
    "start": 488.16,
    "duration": 3.039
  },
  {
    "text": "because the blueprint needs to know",
    "start": 489.68,
    "duration": 3.68
  },
  {
    "text": "where these particles are. And to do",
    "start": 491.199,
    "duration": 3.44
  },
  {
    "text": "that, I'm going to set up another",
    "start": 493.36,
    "duration": 3.679
  },
  {
    "text": "simulation stage. And all this really is",
    "start": 494.639,
    "duration": 4.56
  },
  {
    "text": "is like, hey, I've got a thing in the",
    "start": 497.039,
    "duration": 3.921
  },
  {
    "text": "emitter, and I need to iterate over a",
    "start": 499.199,
    "duration": 3.601
  },
  {
    "text": "bunch of things. And the default",
    "start": 500.96,
    "duration": 3.519
  },
  {
    "text": "iteration source is particles, but you",
    "start": 502.8,
    "duration": 3.36
  },
  {
    "text": "could also do something like a grid 2D",
    "start": 504.479,
    "duration": 3.84
  },
  {
    "text": "or even a grid 3D links at the end of",
    "start": 506.16,
    "duration": 4.719
  },
  {
    "text": "the show. And in this one, so it's like,",
    "start": 508.319,
    "duration": 4.4
  },
  {
    "text": "all right, now that we've done all of",
    "start": 510.879,
    "duration": 4.16
  },
  {
    "text": "our particle updates, now we're going to",
    "start": 512.719,
    "duration": 3.841
  },
  {
    "text": "reiterate over all the particles now",
    "start": 515.039,
    "duration": 3.601
  },
  {
    "text": "that we know where they actually are. So",
    "start": 516.56,
    "duration": 3.919
  },
  {
    "text": "I can create another Scratchpad module,",
    "start": 518.64,
    "duration": 3.36
  },
  {
    "text": "which is going to go we're going to call",
    "start": 520.479,
    "duration": 3.68
  },
  {
    "text": "finalize units.",
    "start": 522.0,
    "duration": 3.839
  },
  {
    "text": "And same thing, we need a vector array",
    "start": 524.159,
    "duration": 3.841
  },
  {
    "text": "input, but this is going to be our the",
    "start": 525.839,
    "duration": 3.44
  },
  {
    "text": "output array that we're going to be",
    "start": 528.0,
    "duration": 3.6
  },
  {
    "text": "writing to. And we also need the render",
    "start": 529.279,
    "duration": 4.481
  },
  {
    "text": "target data interface that we're going",
    "start": 531.6,
    "duration": 4.88
  },
  {
    "text": "to work with. And then of course the",
    "start": 533.76,
    "duration": 6.16
  },
  {
    "text": "unique ID. So then I can just set the",
    "start": 536.48,
    "duration": 6.16
  },
  {
    "text": "array element over here to the particle",
    "start": 539.92,
    "duration": 5.2
  },
  {
    "text": "position.",
    "start": 542.64,
    "duration": 6.319
  },
  {
    "text": "There we go. And I'm going to convert",
    "start": 545.12,
    "duration": 5.76
  },
  {
    "text": "that to a vector just the way it is.",
    "start": 548.959,
    "duration": 4.401
  },
  {
    "text": "Totally fine. Actually, I want to",
    "start": 550.88,
    "duration": 4.24
  },
  {
    "text": "truncate that because I bet I'm going to",
    "start": 553.36,
    "duration": 4.8
  },
  {
    "text": "get a warning if I don't do this right.",
    "start": 555.12,
    "duration": 5.36
  },
  {
    "text": "convert numeric to vector. There we go.",
    "start": 558.16,
    "duration": 3.76
  },
  {
    "text": "And then we make sure that we set that",
    "start": 560.48,
    "duration": 4.0
  },
  {
    "text": "unique ID over there. Plug everything",
    "start": 561.92,
    "duration": 5.44
  },
  {
    "text": "in. And then we're going to uh because",
    "start": 564.48,
    "duration": 4.799
  },
  {
    "text": "we're going to set a value on the render",
    "start": 567.36,
    "duration": 6.32
  },
  {
    "text": "target. So set render target value.",
    "start": 569.279,
    "duration": 6.641
  },
  {
    "text": "And then you notice I've got uh x and y",
    "start": 573.68,
    "duration": 4.08
  },
  {
    "text": "index. And we all know that there's a",
    "start": 575.92,
    "duration": 2.96
  },
  {
    "text": "certain amount of math that we could do",
    "start": 577.76,
    "duration": 2.96
  },
  {
    "text": "to get this correct. But luckily we can",
    "start": 578.88,
    "duration": 3.84
  },
  {
    "text": "just do a linear to index so that I",
    "start": 580.72,
    "duration": 3.44
  },
  {
    "text": "don't have to remember all that math on",
    "start": 582.72,
    "duration": 3.84
  },
  {
    "text": "the fly because there's a lot to cover.",
    "start": 584.16,
    "duration": 3.6
  },
  {
    "text": "And then finally, we're just going to",
    "start": 586.56,
    "duration": 2.719
  },
  {
    "text": "set the value in the render target. So",
    "start": 587.76,
    "duration": 3.199
  },
  {
    "text": "now we've got a render target that knows",
    "start": 589.279,
    "duration": 4.24
  },
  {
    "text": "where the particle is, and we've got the",
    "start": 590.959,
    "duration": 4.0
  },
  {
    "text": "CPU is going to know where the particle",
    "start": 593.519,
    "duration": 4.0
  },
  {
    "text": "is. We're going to do stuff with the",
    "start": 594.959,
    "duration": 4.0
  },
  {
    "text": "render target later. It'll be really",
    "start": 597.519,
    "duration": 4.081
  },
  {
    "text": "cool, trust me. All right, so that's the",
    "start": 598.959,
    "duration": 5.281
  },
  {
    "text": "setup on the uh Niagara side. Now, we're",
    "start": 601.6,
    "duration": 3.76
  },
  {
    "text": "going to jump over to the blueprint.",
    "start": 604.24,
    "duration": 2.24
  },
  {
    "text": "I've already got some of this stuff",
    "start": 605.36,
    "duration": 3.039
  },
  {
    "text": "staged already. So you can see I've got",
    "start": 606.48,
    "duration": 3.68
  },
  {
    "text": "a certain number of particles. I resize",
    "start": 608.399,
    "duration": 3.201
  },
  {
    "text": "the array accordingly because this is",
    "start": 610.16,
    "duration": 2.48
  },
  {
    "text": "the thing that's going to tell the",
    "start": 611.6,
    "duration": 2.64
  },
  {
    "text": "particle system how many particles to",
    "start": 612.64,
    "duration": 4.16
  },
  {
    "text": "spawn. And then I'll grab my Niagara",
    "start": 614.24,
    "duration": 5.12
  },
  {
    "text": "system, my Niagara system component, and",
    "start": 616.8,
    "duration": 6.96
  },
  {
    "text": "I'll say set array, set vector array.",
    "start": 619.36,
    "duration": 6.32
  },
  {
    "text": "There we go. And plug everything in. And",
    "start": 623.76,
    "duration": 3.44
  },
  {
    "text": "then when I was setting all of this up",
    "start": 625.68,
    "duration": 2.88
  },
  {
    "text": "on the blueprint side of things, I",
    "start": 627.2,
    "duration": 4.079
  },
  {
    "text": "called everything goal locations. And on",
    "start": 628.56,
    "duration": 5.2
  },
  {
    "text": "the Niagara side, I called it goal",
    "start": 631.279,
    "duration": 4.721
  },
  {
    "text": "positions. And for that, I will burn.",
    "start": 633.76,
    "duration": 4.24
  },
  {
    "text": "And I apologize.",
    "start": 636.0,
    "duration": 4.0
  },
  {
    "text": "And then we're going to set active on",
    "start": 638.0,
    "duration": 4.079
  },
  {
    "text": "the emitter because all of that",
    "start": 640.0,
    "duration": 3.839
  },
  {
    "text": "initialization is happening on spawn. So",
    "start": 642.079,
    "duration": 3.76
  },
  {
    "text": "I set it to not autoactivate until we",
    "start": 643.839,
    "duration": 4.0
  },
  {
    "text": "actually get the the values in the right",
    "start": 645.839,
    "duration": 4.0
  },
  {
    "text": "spot. And then I've got this set timer",
    "start": 647.839,
    "duration": 4.24
  },
  {
    "text": "by event over here. And so every 3",
    "start": 649.839,
    "duration": 3.601
  },
  {
    "text": "seconds we're going to trigger this",
    "start": 652.079,
    "duration": 3.361
  },
  {
    "text": "function which is going to get the",
    "start": 653.44,
    "duration": 3.92
  },
  {
    "text": "values from the Niagara system. So we're",
    "start": 655.44,
    "duration": 4.32
  },
  {
    "text": "going to get vector array",
    "start": 657.36,
    "duration": 7.08
  },
  {
    "text": "and that will be our out positions.",
    "start": 659.76,
    "duration": 4.68
  },
  {
    "text": "And then we're going to iterate over",
    "start": 664.72,
    "duration": 4.0
  },
  {
    "text": "this array because again the zero array",
    "start": 666.079,
    "duration": 5.041
  },
  {
    "text": "in the goal position the zero the zero",
    "start": 668.72,
    "duration": 4.0
  },
  {
    "text": "position and the out position. So those",
    "start": 671.12,
    "duration": 4.159
  },
  {
    "text": "are the same particle. So then I can",
    "start": 672.72,
    "duration": 4.88
  },
  {
    "text": "know where that particle currently is.",
    "start": 675.279,
    "duration": 4.641
  },
  {
    "text": "And then I can off I can set a new goal",
    "start": 677.6,
    "duration": 5.52
  },
  {
    "text": "location for it relative to its current",
    "start": 679.92,
    "duration": 6.08
  },
  {
    "text": "position. So we can drop that in there.",
    "start": 683.12,
    "duration": 4.64
  },
  {
    "text": "And then I had to remind myself because",
    "start": 686.0,
    "duration": 3.36
  },
  {
    "text": "every time I did this demo, I forgot",
    "start": 687.76,
    "duration": 2.88
  },
  {
    "text": "this part and I wondered why it didn't",
    "start": 689.36,
    "duration": 3.76
  },
  {
    "text": "work. Um so then we have to do the set",
    "start": 690.64,
    "duration": 5.68
  },
  {
    "text": "array vector again to uh wrap everything",
    "start": 693.12,
    "duration": 5.52
  },
  {
    "text": "up. So that'll be the goal positions and",
    "start": 696.32,
    "duration": 5.44
  },
  {
    "text": "we can update everything accordingly.",
    "start": 698.64,
    "duration": 4.879
  },
  {
    "text": "Yep.",
    "start": 701.76,
    "duration": 5.04
  },
  {
    "text": "Okay. So, fingers crossed.",
    "start": 703.519,
    "duration": 4.88
  },
  {
    "text": "Yeah. All right. So, I've got 64",
    "start": 706.8,
    "duration": 2.88
  },
  {
    "text": "particles. They're moving toward the",
    "start": 708.399,
    "duration": 3.521
  },
  {
    "text": "center. And now you can see they're",
    "start": 709.68,
    "duration": 3.36
  },
  {
    "text": "starting to spread out. They're going to",
    "start": 711.92,
    "duration": 3.68
  },
  {
    "text": "go start randomizing their locations.",
    "start": 713.04,
    "duration": 4.0
  },
  {
    "text": "And because I didn't think that was far",
    "start": 715.6,
    "duration": 2.88
  },
  {
    "text": "enough away from everything, I'm going",
    "start": 717.04,
    "duration": 3.76
  },
  {
    "text": "to set that max distance away to",
    "start": 718.48,
    "duration": 6.24
  },
  {
    "text": "something like 500. There we go.",
    "start": 720.8,
    "duration": 8.0
  },
  {
    "text": "So, I jump back in play in editor. So, 3",
    "start": 724.72,
    "duration": 5.679
  },
  {
    "text": "seconds and then we're going to start",
    "start": 728.8,
    "duration": 4.56
  },
  {
    "text": "scattering around. So, because I know",
    "start": 730.399,
    "duration": 4.481
  },
  {
    "text": "where the particles currently are, I can",
    "start": 733.36,
    "duration": 3.2
  },
  {
    "text": "tell them to go somewhere else. And they",
    "start": 734.88,
    "duration": 3.12
  },
  {
    "text": "all went out in a circle because that",
    "start": 736.56,
    "duration": 2.8
  },
  {
    "text": "was, you know, they all started from",
    "start": 738.0,
    "duration": 3.6
  },
  {
    "text": "0000. But maybe I actually want these",
    "start": 739.36,
    "duration": 3.919
  },
  {
    "text": "particles to kind of bump into each",
    "start": 741.6,
    "duration": 4.16
  },
  {
    "text": "other. Um, and we'll get to that in a",
    "start": 743.279,
    "duration": 4.24
  },
  {
    "text": "second. So, again, this is basically",
    "start": 745.76,
    "duration": 4.16
  },
  {
    "text": "what's happening with with my my RTS",
    "start": 747.519,
    "duration": 4.88
  },
  {
    "text": "here is I've got all these units and I",
    "start": 749.92,
    "duration": 4.88
  },
  {
    "text": "know their locations in the world. I can",
    "start": 752.399,
    "duration": 4.24
  },
  {
    "text": "project that to screen space and I know",
    "start": 754.8,
    "duration": 4.24
  },
  {
    "text": "this my my little marquee selection box.",
    "start": 756.639,
    "duration": 4.081
  },
  {
    "text": "So anything inside that box, I say,",
    "start": 759.04,
    "duration": 3.44
  },
  {
    "text": "\"Hey, you're selected.\" And then when I",
    "start": 760.72,
    "duration": 3.52
  },
  {
    "text": "double click, if you're selected, I",
    "start": 762.48,
    "duration": 3.68
  },
  {
    "text": "update your goal location and send that",
    "start": 764.24,
    "duration": 5.76
  },
  {
    "text": "back on to Niagara. Super easy.",
    "start": 766.16,
    "duration": 5.359
  },
  {
    "text": "So that's basically it, right? We tell",
    "start": 770.0,
    "duration": 3.6
  },
  {
    "text": "the GPU to do some work for us on data",
    "start": 771.519,
    "duration": 3.841
  },
  {
    "text": "that we've provided from the CPU and",
    "start": 773.6,
    "duration": 3.44
  },
  {
    "text": "then we can get Niagara to give us the",
    "start": 775.36,
    "duration": 4.24
  },
  {
    "text": "results back. Pretty straightforward to",
    "start": 777.04,
    "duration": 5.919
  },
  {
    "text": "me. Um, but I want those units to do I",
    "start": 779.6,
    "duration": 4.96
  },
  {
    "text": "want my sprites to kind of bump into",
    "start": 782.959,
    "duration": 3.68
  },
  {
    "text": "each other. I don't want it to just be,",
    "start": 784.56,
    "duration": 3.68
  },
  {
    "text": "you know, going straight to where",
    "start": 786.639,
    "duration": 4.161
  },
  {
    "text": "they're supposed to go. And the thing",
    "start": 788.24,
    "duration": 6.719
  },
  {
    "text": "that you don't want to do is this. For",
    "start": 790.8,
    "duration": 6.24
  },
  {
    "text": "each particle, go over every other",
    "start": 794.959,
    "duration": 3.68
  },
  {
    "text": "particle, calculate the distance to it",
    "start": 797.04,
    "duration": 4.56
  },
  {
    "text": "to figure out what its relevance is, and",
    "start": 798.639,
    "duration": 4.561
  },
  {
    "text": "uh, check the distances between because",
    "start": 801.6,
    "duration": 3.039
  },
  {
    "text": "then that's another like square root",
    "start": 803.2,
    "duration": 3.36
  },
  {
    "text": "operator which is super expensive. And",
    "start": 804.639,
    "duration": 3.681
  },
  {
    "text": "the reason that this doesn't really work",
    "start": 806.56,
    "duration": 3.44
  },
  {
    "text": "is that the complexity of this",
    "start": 808.32,
    "duration": 3.92
  },
  {
    "text": "calculation will increase with the",
    "start": 810.0,
    "duration": 3.68
  },
  {
    "text": "number of particles. So like 10",
    "start": 812.24,
    "duration": 4.08
  },
  {
    "text": "particles totally fine. 100 particles,",
    "start": 813.68,
    "duration": 6.159
  },
  {
    "text": "you're already in deep trouble. Luckily,",
    "start": 816.32,
    "duration": 5.12
  },
  {
    "text": "we have something for that. It's called",
    "start": 819.839,
    "duration": 3.601
  },
  {
    "text": "neighbor grid 3D. And it's a it's",
    "start": 821.44,
    "duration": 4.32
  },
  {
    "text": "basically a giant grid with uh different",
    "start": 823.44,
    "duration": 4.72
  },
  {
    "text": "grid cells based on your parameters. and",
    "start": 825.76,
    "duration": 5.519
  },
  {
    "text": "it's storing the index of the particle",
    "start": 828.16,
    "duration": 5.2
  },
  {
    "text": "in that grid unit to say, okay, if I'm",
    "start": 831.279,
    "duration": 5.041
  },
  {
    "text": "in 00 0, I've got particles 2, 10, and",
    "start": 833.36,
    "duration": 5.36
  },
  {
    "text": "12. And that makes it really easy to",
    "start": 836.32,
    "duration": 3.92
  },
  {
    "text": "access. And we can do other stuff with",
    "start": 838.72,
    "duration": 3.76
  },
  {
    "text": "this. And it also means we can bound our",
    "start": 840.24,
    "duration": 5.2
  },
  {
    "text": "calculation to the 27 grid cells around",
    "start": 842.48,
    "duration": 5.28
  },
  {
    "text": "us. Uh so, you know, the the nine on the",
    "start": 845.44,
    "duration": 3.519
  },
  {
    "text": "bottom, the nine in the middle, the nine",
    "start": 847.76,
    "duration": 3.36
  },
  {
    "text": "above. And it caps the number of",
    "start": 848.959,
    "duration": 3.201
  },
  {
    "text": "neighbors that we're going to have to",
    "start": 851.12,
    "duration": 3.68
  },
  {
    "text": "iterate over so that we can again keep",
    "start": 852.16,
    "duration": 4.56
  },
  {
    "text": "the the complexity of this calculation a",
    "start": 854.8,
    "duration": 2.96
  },
  {
    "text": "little lower. So, we're going to jump",
    "start": 856.72,
    "duration": 3.52
  },
  {
    "text": "back into Niagara here,",
    "start": 857.76,
    "duration": 3.84
  },
  {
    "text": "and we're going to get this set up. So,",
    "start": 860.24,
    "duration": 2.64
  },
  {
    "text": "I didn't want to stage all of this stuff",
    "start": 861.6,
    "duration": 2.88
  },
  {
    "text": "to begin with, so bear with me while I",
    "start": 862.88,
    "duration": 5.12
  },
  {
    "text": "create our um while I create our emitter",
    "start": 864.48,
    "duration": 4.88
  },
  {
    "text": "properties. So, the two things that",
    "start": 868.0,
    "duration": 3.92
  },
  {
    "text": "we're going to need here are a neighbor",
    "start": 869.36,
    "duration": 5.039
  },
  {
    "text": "grid 3D",
    "start": 871.92,
    "duration": 4.96
  },
  {
    "text": "and we're going to need a attribute",
    "start": 874.399,
    "duration": 4.401
  },
  {
    "text": "reader, a particle attribute reader. And",
    "start": 876.88,
    "duration": 3.6
  },
  {
    "text": "this is this is sort of the data",
    "start": 878.8,
    "duration": 3.839
  },
  {
    "text": "interface we will use so that when we're",
    "start": 880.48,
    "duration": 3.599
  },
  {
    "text": "working on one particle, we can figure",
    "start": 882.639,
    "duration": 4.161
  },
  {
    "text": "out where the other particle is. And",
    "start": 884.079,
    "duration": 5.12
  },
  {
    "text": "then to get that set up, easy to set up",
    "start": 886.8,
    "duration": 3.92
  },
  {
    "text": "the attribute reader. We just drag it",
    "start": 889.199,
    "duration": 3.2
  },
  {
    "text": "over and say, \"Hey, this is the emitter",
    "start": 890.72,
    "duration": 3.04
  },
  {
    "text": "that we're working on. We are working on",
    "start": 892.399,
    "duration": 2.961
  },
  {
    "text": "ourselves.\"",
    "start": 893.76,
    "duration": 2.96
  },
  {
    "text": "And then we need to initialize the",
    "start": 895.36,
    "duration": 4.32
  },
  {
    "text": "neighbor grid 3D, which luckily comes in",
    "start": 896.72,
    "duration": 5.919
  },
  {
    "text": "a handy dandy module,",
    "start": 899.68,
    "duration": 4.64
  },
  {
    "text": "but it is not in the library. So, you",
    "start": 902.639,
    "duration": 3.521
  },
  {
    "text": "got to turn off library only. So,",
    "start": 904.32,
    "duration": 4.319
  },
  {
    "text": "initialize grid 3D. And then I'm going",
    "start": 906.16,
    "duration": 4.72
  },
  {
    "text": "to set that to, you know, like 5,000",
    "start": 908.639,
    "duration": 4.961
  },
  {
    "text": "units. 5,000 units. Uh, pro tip. If you",
    "start": 910.88,
    "duration": 5.6
  },
  {
    "text": "set the local pivot to 000 and your",
    "start": 913.6,
    "duration": 4.32
  },
  {
    "text": "particles are starting in the bottom",
    "start": 916.48,
    "duration": 2.88
  },
  {
    "text": "corner, things will get a little weird.",
    "start": 917.92,
    "duration": 3.84
  },
  {
    "text": "Don't ask me how I know. And then I'm",
    "start": 919.36,
    "duration": 4.64
  },
  {
    "text": "gonna just for for the sake of argument,",
    "start": 921.76,
    "duration": 3.68
  },
  {
    "text": "I'm going to set the max neighbors per",
    "start": 924.0,
    "duration": 4.639
  },
  {
    "text": "cell to 15. And then I'll set my uh the",
    "start": 925.44,
    "duration": 5.199
  },
  {
    "text": "number of cells in any given direction",
    "start": 928.639,
    "duration": 5.281
  },
  {
    "text": "to 15 as well. But you you would want to",
    "start": 930.639,
    "duration": 4.961
  },
  {
    "text": "customize these to suit your needs. And",
    "start": 933.92,
    "duration": 2.8
  },
  {
    "text": "these numbers don't actually work",
    "start": 935.6,
    "duration": 2.64
  },
  {
    "text": "because I'm doing everything on the xy",
    "start": 936.72,
    "duration": 4.479
  },
  {
    "text": "plane. Um, but for the sake of argument,",
    "start": 938.24,
    "duration": 4.32
  },
  {
    "text": "we're going to do it that way. All",
    "start": 941.199,
    "duration": 5.08
  },
  {
    "text": "right. So, next,",
    "start": 942.56,
    "duration": 3.719
  },
  {
    "text": "initialize grid. Oh, and then I have to",
    "start": 946.639,
    "duration": 4.161
  },
  {
    "text": "set the emitter property that I set up",
    "start": 948.48,
    "duration": 4.479
  },
  {
    "text": "earlier, this neighbor grid 3D to the",
    "start": 950.8,
    "duration": 4.959
  },
  {
    "text": "output of initialize neighbor grid,",
    "start": 952.959,
    "duration": 5.12
  },
  {
    "text": "otherwise things will go a little skew",
    "start": 955.759,
    "duration": 6.241
  },
  {
    "text": "with. There we go. Okay. So, I've got",
    "start": 958.079,
    "duration": 5.841
  },
  {
    "text": "the particles and I know where they are",
    "start": 962.0,
    "duration": 4.0
  },
  {
    "text": "after I've done the initial solve forces",
    "start": 963.92,
    "duration": 4.479
  },
  {
    "text": "and velocities. Great. Now I need to",
    "start": 966.0,
    "duration": 4.0
  },
  {
    "text": "iterate over all of those particles",
    "start": 968.399,
    "duration": 3.921
  },
  {
    "text": "again to store their indices in the",
    "start": 970.0,
    "duration": 3.92
  },
  {
    "text": "neighbor grid 3D. So I'm going to do",
    "start": 972.32,
    "duration": 4.639
  },
  {
    "text": "that with another um I'm going to do",
    "start": 973.92,
    "duration": 4.8
  },
  {
    "text": "that with another simulation stage which",
    "start": 976.959,
    "duration": 4.641
  },
  {
    "text": "we're going to call populate",
    "start": 978.72,
    "duration": 5.28
  },
  {
    "text": "for the sake of time. And then we'll add",
    "start": 981.6,
    "duration": 4.88
  },
  {
    "text": "a new module which is the populate",
    "start": 984.0,
    "duration": 4.959
  },
  {
    "text": "neighbor grid module. Easy peasy. This",
    "start": 986.48,
    "duration": 4.0
  },
  {
    "text": "takes a couple of inputs. It's just our",
    "start": 988.959,
    "duration": 4.32
  },
  {
    "text": "neighbor grid 3D. There we go. It's",
    "start": 990.48,
    "duration": 4.24
  },
  {
    "text": "already set up to grab the particle",
    "start": 993.279,
    "duration": 5.841
  },
  {
    "text": "position. And then we need the world",
    "start": 994.72,
    "duration": 8.559
  },
  {
    "text": "grid. World unit world. Come on. Oh,",
    "start": 999.12,
    "duration": 7.2
  },
  {
    "text": "there we go. World to grid unit matrix.",
    "start": 1003.279,
    "duration": 4.24
  },
  {
    "text": "And this is going to help everything",
    "start": 1006.32,
    "duration": 3.68
  },
  {
    "text": "transform into the right space. So",
    "start": 1007.519,
    "duration": 4.88
  },
  {
    "text": "that's going to put the in up to the max",
    "start": 1010.0,
    "duration": 5.279
  },
  {
    "text": "number of particles we've decided into",
    "start": 1012.399,
    "duration": 5.201
  },
  {
    "text": "the neighbor grid 3D. And then we're",
    "start": 1015.279,
    "duration": 4.161
  },
  {
    "text": "going to get another simulation stage",
    "start": 1017.6,
    "duration": 3.2
  },
  {
    "text": "going. And this is where we're going to",
    "start": 1019.44,
    "duration": 5.319
  },
  {
    "text": "do our avoidance.",
    "start": 1020.8,
    "duration": 3.959
  },
  {
    "text": "So that's another grid, another um",
    "start": 1026.559,
    "duration": 5.681
  },
  {
    "text": "another value. And we're going to need",
    "start": 1030.4,
    "duration": 3.84
  },
  {
    "text": "two modules in here. And first we need",
    "start": 1032.24,
    "duration": 3.599
  },
  {
    "text": "solve forces and velocities again",
    "start": 1034.24,
    "duration": 2.799
  },
  {
    "text": "because we're going to push the units",
    "start": 1035.839,
    "duration": 3.761
  },
  {
    "text": "away from each other. And then we need a",
    "start": 1037.039,
    "duration": 4.561
  },
  {
    "text": "scratch pad module, which we will call",
    "start": 1039.6,
    "duration": 4.8
  },
  {
    "text": "avoidance.",
    "start": 1041.6,
    "duration": 4.4
  },
  {
    "text": "And this is going to look a little",
    "start": 1044.4,
    "duration": 3.2
  },
  {
    "text": "scary, but it's okay. We're going to",
    "start": 1046.0,
    "duration": 4.64
  },
  {
    "text": "walk everybody through it. Ready?",
    "start": 1047.6,
    "duration": 5.199
  },
  {
    "text": "It's It's fine.",
    "start": 1050.64,
    "duration": 5.039
  },
  {
    "text": "It's fine. It's actually uh this is a",
    "start": 1052.799,
    "duration": 4.24
  },
  {
    "text": "stripped down version of something that",
    "start": 1055.679,
    "duration": 2.961
  },
  {
    "text": "we've got in our content examples. So",
    "start": 1057.039,
    "duration": 3.441
  },
  {
    "text": "definitely check that out. But what I've",
    "start": 1058.64,
    "duration": 3.919
  },
  {
    "text": "got here is is sort of the the core",
    "start": 1060.48,
    "duration": 5.04
  },
  {
    "text": "logic of our uh avoidance. And while I",
    "start": 1062.559,
    "duration": 5.281
  },
  {
    "text": "set up the inputs on this module, if",
    "start": 1065.52,
    "duration": 4.64
  },
  {
    "text": "you'll bear with me for just a second.",
    "start": 1067.84,
    "duration": 5.12
  },
  {
    "text": "So I need the unique index.",
    "start": 1070.16,
    "duration": 5.92
  },
  {
    "text": "Plug that into the index in index in",
    "start": 1072.96,
    "duration": 6.719
  },
  {
    "text": "instance index random unit vector. Uh, I",
    "start": 1076.08,
    "duration": 5.28
  },
  {
    "text": "just had I while I was working on this",
    "start": 1079.679,
    "duration": 3.841
  },
  {
    "text": "demo, I realized that there was this",
    "start": 1081.36,
    "duration": 5.04
  },
  {
    "text": "weird issue where the particles if they",
    "start": 1083.52,
    "duration": 4.64
  },
  {
    "text": "were directly on top of each other would",
    "start": 1086.4,
    "duration": 3.519
  },
  {
    "text": "explode away from each other. So, if",
    "start": 1088.16,
    "duration": 2.96
  },
  {
    "text": "they're really close together, I just",
    "start": 1089.919,
    "duration": 3.041
  },
  {
    "text": "kind of offset that position as a little",
    "start": 1091.12,
    "duration": 4.72
  },
  {
    "text": "wink and a nudge. Uh, there we go. Plug",
    "start": 1092.96,
    "duration": 4.4
  },
  {
    "text": "that bad boy in. And then our output",
    "start": 1095.84,
    "duration": 3.36
  },
  {
    "text": "value here, again, it's a force. So,",
    "start": 1097.36,
    "duration": 3.679
  },
  {
    "text": "we're going to say, hey, the output here",
    "start": 1099.2,
    "duration": 5.12
  },
  {
    "text": "is this transient physics force value.",
    "start": 1101.039,
    "duration": 6.161
  },
  {
    "text": "Change namespace to transient. There we",
    "start": 1104.32,
    "duration": 4.08
  },
  {
    "text": "go. All right. I'm gonna walk you",
    "start": 1107.2,
    "duration": 2.479
  },
  {
    "text": "through this and I'm going to zoom in",
    "start": 1108.4,
    "duration": 5.12
  },
  {
    "text": "real good. So up at the top here, all",
    "start": 1109.679,
    "duration": 5.681
  },
  {
    "text": "we're doing is initializing our output",
    "start": 1113.52,
    "duration": 3.44
  },
  {
    "text": "parameters. So our repulsive force, the",
    "start": 1115.36,
    "duration": 2.8
  },
  {
    "text": "plate, you know, how much we're going to",
    "start": 1116.96,
    "duration": 3.04
  },
  {
    "text": "push everybody away. And then I've got",
    "start": 1118.16,
    "duration": 4.8
  },
  {
    "text": "this array of instance index offsets. So",
    "start": 1120.0,
    "duration": 5.039
  },
  {
    "text": "if if you know the bottom left corner of",
    "start": 1122.96,
    "duration": 3.36
  },
  {
    "text": "the 27 grids that we're going to work",
    "start": 1125.039,
    "duration": 2.721
  },
  {
    "text": "with, that's negative 1, negative 1,",
    "start": 1126.32,
    "duration": 3.2
  },
  {
    "text": "negative 1. And the top right is plus",
    "start": 1127.76,
    "duration": 3.44
  },
  {
    "text": "one plus one plus one. I'm just storing",
    "start": 1129.52,
    "duration": 3.2
  },
  {
    "text": "all these in a flat array to make things",
    "start": 1131.2,
    "duration": 2.96
  },
  {
    "text": "a little easier on myself. Don't have to",
    "start": 1132.72,
    "duration": 3.52
  },
  {
    "text": "do a bunch of nested for loops. And then",
    "start": 1134.16,
    "duration": 3.6
  },
  {
    "text": "this is really important. You have to",
    "start": 1136.24,
    "duration": 3.52
  },
  {
    "text": "when we're compiling this HLSL, we have",
    "start": 1137.76,
    "duration": 3.919
  },
  {
    "text": "to make sure that we're only doing this",
    "start": 1139.76,
    "duration": 3.68
  },
  {
    "text": "we're only compiling this section if",
    "start": 1141.679,
    "duration": 3.681
  },
  {
    "text": "we're doing a GPU simulation. Otherwise,",
    "start": 1143.44,
    "duration": 4.32
  },
  {
    "text": "things fall apart. And then this section",
    "start": 1145.36,
    "duration": 4.96
  },
  {
    "text": "here or these first two lines here,",
    "start": 1147.76,
    "duration": 5.36
  },
  {
    "text": "we're going to figure out the uh the",
    "start": 1150.32,
    "duration": 5.2
  },
  {
    "text": "position of the particle in 0ero to one",
    "start": 1153.12,
    "duration": 4.559
  },
  {
    "text": "space relative to the neighbor grid. And",
    "start": 1155.52,
    "duration": 4.72
  },
  {
    "text": "then we're also going to get the index,",
    "start": 1157.679,
    "duration": 5.521
  },
  {
    "text": "the grid index of our current particle",
    "start": 1160.24,
    "duration": 5.12
  },
  {
    "text": "based on its 0 to1 position. So that's",
    "start": 1163.2,
    "duration": 3.76
  },
  {
    "text": "all this is doing. And then we get the",
    "start": 1165.36,
    "duration": 3.76
  },
  {
    "text": "num cells, the max neighbors per cell,",
    "start": 1166.96,
    "duration": 3.92
  },
  {
    "text": "and we start iterating over all of those",
    "start": 1169.12,
    "duration": 5.76
  },
  {
    "text": "index index in those index offsets. And",
    "start": 1170.88,
    "duration": 5.28
  },
  {
    "text": "then we're iterating over the max",
    "start": 1174.88,
    "duration": 4.0
  },
  {
    "text": "neighbors per cell. So the the most",
    "start": 1176.16,
    "duration": 5.28
  },
  {
    "text": "number of iterations we can ever do for",
    "start": 1178.88,
    "duration": 5.679
  },
  {
    "text": "any of these particles is 27 * 15, which",
    "start": 1181.44,
    "duration": 5.599
  },
  {
    "text": "is a lot simpler if we're dealing with",
    "start": 1184.559,
    "duration": 5.041
  },
  {
    "text": "4,96 units, right? I'm only working on",
    "start": 1187.039,
    "duration": 6.241
  },
  {
    "text": "that little little um bit of math. And",
    "start": 1189.6,
    "duration": 4.959
  },
  {
    "text": "then the next step that we're going to",
    "start": 1193.28,
    "duration": 3.84
  },
  {
    "text": "use is figure out what the grid cell",
    "start": 1194.559,
    "duration": 4.721
  },
  {
    "text": "offset we're working with. If it's, you",
    "start": 1197.12,
    "duration": 3.679
  },
  {
    "text": "know, negative 1gative 1, you know, if",
    "start": 1199.28,
    "duration": 5.2
  },
  {
    "text": "we're in 211 - 1 - 1 - 1, now we're in 1",
    "start": 1200.799,
    "duration": 7.76
  },
  {
    "text": "0 0. And we figure out the and using",
    "start": 1204.48,
    "duration": 8.48
  },
  {
    "text": "that value, we can grab the current",
    "start": 1208.559,
    "duration": 6.721
  },
  {
    "text": "neighbor index. So that's, you know,",
    "start": 1212.96,
    "duration": 5.36
  },
  {
    "text": "I've only got 15 0 1 2 3 4 5 6 10. I'm",
    "start": 1215.28,
    "duration": 4.32
  },
  {
    "text": "going to store that in this neighbor",
    "start": 1218.32,
    "duration": 3.76
  },
  {
    "text": "linear index value. And then I can do",
    "start": 1219.6,
    "duration": 5.76
  },
  {
    "text": "this get particle neighbor to get the",
    "start": 1222.08,
    "duration": 6.24
  },
  {
    "text": "particle index of that particle. And now",
    "start": 1225.36,
    "duration": 5.12
  },
  {
    "text": "I have stuff to work with because I can",
    "start": 1228.32,
    "duration": 3.839
  },
  {
    "text": "use the attribute reader to get the",
    "start": 1230.48,
    "duration": 4.4
  },
  {
    "text": "position of that particle. And then all",
    "start": 1232.159,
    "duration": 5.121
  },
  {
    "text": "we're doing down here is checking the",
    "start": 1234.88,
    "duration": 4.4
  },
  {
    "text": "distance between the particles. If it's",
    "start": 1237.28,
    "duration": 4.56
  },
  {
    "text": "within our sort of overlap range and",
    "start": 1239.28,
    "duration": 3.759
  },
  {
    "text": "we're going to start working with it, we",
    "start": 1241.84,
    "duration": 2.959
  },
  {
    "text": "get a normalized vector away from the",
    "start": 1243.039,
    "duration": 4.481
  },
  {
    "text": "other particle. We push it away.",
    "start": 1244.799,
    "duration": 4.561
  },
  {
    "text": "increment the neighbor count value over",
    "start": 1247.52,
    "duration": 4.88
  },
  {
    "text": "here and then",
    "start": 1249.36,
    "duration": 4.96
  },
  {
    "text": "all we do is just average the repulsive",
    "start": 1252.4,
    "duration": 3.44
  },
  {
    "text": "force by the number of neighbors. So if",
    "start": 1254.32,
    "duration": 2.8
  },
  {
    "text": "you've got 10 neighbors, we've",
    "start": 1255.84,
    "duration": 3.76
  },
  {
    "text": "accumulated this sort of direction away",
    "start": 1257.12,
    "duration": 4.24
  },
  {
    "text": "from everybody. We're going to average",
    "start": 1259.6,
    "duration": 3.36
  },
  {
    "text": "that together and then multiply it by",
    "start": 1261.36,
    "duration": 3.439
  },
  {
    "text": "the repulsive force strength and we'll",
    "start": 1262.96,
    "duration": 4.719
  },
  {
    "text": "get to this last line in the next step.",
    "start": 1264.799,
    "duration": 6.561
  },
  {
    "text": "Cool. So, I will set up all of the put",
    "start": 1267.679,
    "duration": 5.441
  },
  {
    "text": "that in the right spot. And then I will",
    "start": 1271.36,
    "duration": 4.799
  },
  {
    "text": "set up our",
    "start": 1273.12,
    "duration": 4.96
  },
  {
    "text": "I drag this position value over here.",
    "start": 1276.159,
    "duration": 3.201
  },
  {
    "text": "And I needed to make sure it's the",
    "start": 1278.08,
    "duration": 4.64
  },
  {
    "text": "particle position. Easy. Almost messed",
    "start": 1279.36,
    "duration": 6.0
  },
  {
    "text": "up. So, then we're going to grab the",
    "start": 1282.72,
    "duration": 5.68
  },
  {
    "text": "neighbor grid 3D from our emitter. And",
    "start": 1285.36,
    "duration": 4.48
  },
  {
    "text": "then we're going to get our attribute",
    "start": 1288.4,
    "duration": 3.68
  },
  {
    "text": "reader.",
    "start": 1289.84,
    "duration": 6.719
  },
  {
    "text": "There we go. and then our world two",
    "start": 1292.08,
    "duration": 6.56
  },
  {
    "text": "grid unit. So that's going to get",
    "start": 1296.559,
    "duration": 3.6
  },
  {
    "text": "everything together. And you can see",
    "start": 1298.64,
    "duration": 3.6
  },
  {
    "text": "these particles are already kind of kind",
    "start": 1300.159,
    "duration": 5.361
  },
  {
    "text": "of fighting to be where they want to go.",
    "start": 1302.24,
    "duration": 4.559
  },
  {
    "text": "And I'm going to make that even worse",
    "start": 1305.52,
    "duration": 4.0
  },
  {
    "text": "for them by making them all go toward",
    "start": 1306.799,
    "duration": 4.561
  },
  {
    "text": "the center.",
    "start": 1309.52,
    "duration": 4.32
  },
  {
    "text": "So because I set the the repulsive force",
    "start": 1311.36,
    "duration": 4.319
  },
  {
    "text": "really really high so that you could see",
    "start": 1313.84,
    "duration": 4.64
  },
  {
    "text": "it. Um, they're all trying to get to 0 0",
    "start": 1315.679,
    "duration": 5.12
  },
  {
    "text": "0 and they keep bumping into each other",
    "start": 1318.48,
    "duration": 3.84
  },
  {
    "text": "because I set their overlaps really",
    "start": 1320.799,
    "duration": 4.801
  },
  {
    "text": "really high. Right? So, that's all we",
    "start": 1322.32,
    "duration": 4.4
  },
  {
    "text": "really needed there. Here's what that",
    "start": 1325.6,
    "duration": 3.6
  },
  {
    "text": "looks like with 64 particles and you can",
    "start": 1326.72,
    "duration": 5.439
  },
  {
    "text": "see things get a little a little hectic.",
    "start": 1329.2,
    "duration": 4.56
  },
  {
    "text": "Right? So, I'm I'm just like I'm doing",
    "start": 1332.159,
    "duration": 3.921
  },
  {
    "text": "an interesting calculation in Niagara",
    "start": 1333.76,
    "duration": 4.0
  },
  {
    "text": "and I can do some really cool stuff with",
    "start": 1336.08,
    "duration": 4.64
  },
  {
    "text": "it. Um, and again, that's basically the",
    "start": 1337.76,
    "duration": 4.56
  },
  {
    "text": "same thing that's going on in our giant",
    "start": 1340.72,
    "duration": 2.8
  },
  {
    "text": "example. They're all trying to go to",
    "start": 1342.32,
    "duration": 2.88
  },
  {
    "text": "their goal positions and they're all",
    "start": 1343.52,
    "duration": 3.039
  },
  {
    "text": "kind of pushing each other out of the",
    "start": 1345.2,
    "duration": 3.44
  },
  {
    "text": "way. But I lowered the overlap value and",
    "start": 1346.559,
    "duration": 3.36
  },
  {
    "text": "the forces here because I thought these",
    "start": 1348.64,
    "duration": 2.72
  },
  {
    "text": "guys might be a little nicer to each",
    "start": 1349.919,
    "duration": 3.681
  },
  {
    "text": "other. But you can see like as I move",
    "start": 1351.36,
    "duration": 3.76
  },
  {
    "text": "these units away, these guys are like,",
    "start": 1353.6,
    "duration": 3.439
  },
  {
    "text": "\"Okay, well, I'll give you space. I'll",
    "start": 1355.12,
    "duration": 5.84
  },
  {
    "text": "give you a little space.\" Right? Cool.",
    "start": 1357.039,
    "duration": 5.841
  },
  {
    "text": "So, we really quickly learned how to use",
    "start": 1360.96,
    "duration": 3.92
  },
  {
    "text": "neighbor grid 3D. How we can use the",
    "start": 1362.88,
    "duration": 3.76
  },
  {
    "text": "built-in modules, right? uh uh",
    "start": 1364.88,
    "duration": 3.36
  },
  {
    "text": "initialize neighbor grid 3D, populate",
    "start": 1366.64,
    "duration": 4.0
  },
  {
    "text": "neighbor grid 3D and how we can access",
    "start": 1368.24,
    "duration": 5.28
  },
  {
    "text": "positions of other particles from within",
    "start": 1370.64,
    "duration": 5.279
  },
  {
    "text": "uh from a current particle evaluation we",
    "start": 1373.52,
    "duration": 6.399
  },
  {
    "text": "can make those repel each other. So now",
    "start": 1375.919,
    "duration": 8.161
  },
  {
    "text": "as I take a breath, sip of water,",
    "start": 1379.919,
    "duration": 6.481
  },
  {
    "text": "now let's talk about how we can",
    "start": 1384.08,
    "duration": 5.44
  },
  {
    "text": "efficiently store state information,",
    "start": 1386.4,
    "duration": 5.279
  },
  {
    "text": "any kind of arbitrary information about",
    "start": 1389.52,
    "duration": 4.48
  },
  {
    "text": "our particles, our units, whatever we're",
    "start": 1391.679,
    "duration": 4.161
  },
  {
    "text": "whatever thing we are operating on in",
    "start": 1394.0,
    "duration": 4.4
  },
  {
    "text": "Niagara into a single float. Because",
    "start": 1395.84,
    "duration": 5.92
  },
  {
    "text": "here's the thing, colors",
    "start": 1398.4,
    "duration": 6.0
  },
  {
    "text": "are just num are just proportions of",
    "start": 1401.76,
    "duration": 6.08
  },
  {
    "text": "red, green, and blue light, right?",
    "start": 1404.4,
    "duration": 5.84
  },
  {
    "text": "And those proportions are represented by",
    "start": 1407.84,
    "duration": 7.44
  },
  {
    "text": "numbers. 83% red, 23% green, 100% blue.",
    "start": 1410.24,
    "duration": 6.799
  },
  {
    "text": "Now, here's the thing about floating",
    "start": 1415.28,
    "duration": 4.879
  },
  {
    "text": "point 32-bit floatingoint numbers is",
    "start": 1417.039,
    "duration": 6.401
  },
  {
    "text": "32bit floatingoint numbers are actually",
    "start": 1420.159,
    "duration": 7.76
  },
  {
    "text": "32 booleans wearing a trench coat.",
    "start": 1423.44,
    "duration": 5.84
  },
  {
    "text": ">> Thank you for sticking with me on that",
    "start": 1427.919,
    "duration": 5.841
  },
  {
    "text": "one. So, why why why",
    "start": 1429.28,
    "duration": 6.32
  },
  {
    "text": "go through all this effort, right? It's",
    "start": 1433.76,
    "duration": 3.919
  },
  {
    "text": "a memory efficiency thing, right? I've",
    "start": 1435.6,
    "duration": 4.72
  },
  {
    "text": "got one number. So, let's say let's, you",
    "start": 1437.679,
    "duration": 4.801
  },
  {
    "text": "know, we want to in our material know",
    "start": 1440.32,
    "duration": 4.64
  },
  {
    "text": "about the number of neighbors that we've",
    "start": 1442.48,
    "duration": 5.84
  },
  {
    "text": "got around us, right? Um, how many how",
    "start": 1444.96,
    "duration": 4.959
  },
  {
    "text": "many people are overlapping, how many",
    "start": 1448.32,
    "duration": 3.44
  },
  {
    "text": "particles are overlapping us, maybe I",
    "start": 1449.919,
    "duration": 3.681
  },
  {
    "text": "want to know the current index grid cell",
    "start": 1451.76,
    "duration": 4.159
  },
  {
    "text": "that it's in for whatever reason, and",
    "start": 1453.6,
    "duration": 4.24
  },
  {
    "text": "maybe its distance to its goal position,",
    "start": 1455.919,
    "duration": 4.0
  },
  {
    "text": "right? And we could use dynamic material",
    "start": 1457.84,
    "duration": 3.839
  },
  {
    "text": "parameters for that in Niagara and just",
    "start": 1459.919,
    "duration": 3.76
  },
  {
    "text": "pass that through as about five",
    "start": 1461.679,
    "duration": 4.48
  },
  {
    "text": "different 32-bit floats, which ends up",
    "start": 1463.679,
    "duration": 5.441
  },
  {
    "text": "being like 160 bits. And if we multiply",
    "start": 1466.159,
    "duration": 5.361
  },
  {
    "text": "that out by our, you know, 4,000 units,",
    "start": 1469.12,
    "duration": 5.76
  },
  {
    "text": "that's like 600,000 bits, y'all, which",
    "start": 1471.52,
    "duration": 7.12
  },
  {
    "text": "is almost 600 bytes.",
    "start": 1474.88,
    "duration": 6.56
  },
  {
    "text": "Okay, I know that that's not like huge",
    "start": 1478.64,
    "duration": 5.2
  },
  {
    "text": "given the machine that I've got under",
    "start": 1481.44,
    "duration": 5.44
  },
  {
    "text": "this desk, but maybe it's not about",
    "start": 1483.84,
    "duration": 5.12
  },
  {
    "text": "memory efficiency. It's about efficient",
    "start": 1486.88,
    "duration": 4.0
  },
  {
    "text": "use of the channels of data that's",
    "start": 1488.96,
    "duration": 4.8
  },
  {
    "text": "available to us. You only have four UV",
    "start": 1490.88,
    "duration": 5.44
  },
  {
    "text": "channels with Nanite. You only have 32",
    "start": 1493.76,
    "duration": 4.72
  },
  {
    "text": "custom primitive data floats and per",
    "start": 1496.32,
    "duration": 4.08
  },
  {
    "text": "instance custom data floats maybe and",
    "start": 1498.48,
    "duration": 4.799
  },
  {
    "text": "and uh 16 dynamic material parameters.",
    "start": 1500.4,
    "duration": 4.96
  },
  {
    "text": "Maybe you need to be efficient about the",
    "start": 1503.279,
    "duration": 4.241
  },
  {
    "text": "channels that you have available to you.",
    "start": 1505.36,
    "duration": 4.08
  },
  {
    "text": "So, I need to pack more information into",
    "start": 1507.52,
    "duration": 4.56
  },
  {
    "text": "a UV or a dynamic material parameter to",
    "start": 1509.44,
    "duration": 5.04
  },
  {
    "text": "make room for the other stuff because I",
    "start": 1512.08,
    "duration": 4.88
  },
  {
    "text": "don't actually need all of the precision",
    "start": 1514.48,
    "duration": 5.04
  },
  {
    "text": "of a full 32-bit float to store the",
    "start": 1516.96,
    "duration": 4.959
  },
  {
    "text": "index to store the number of max",
    "start": 1519.52,
    "duration": 4.08
  },
  {
    "text": "neighbors because the maximum number of",
    "start": 1521.919,
    "duration": 4.64
  },
  {
    "text": "neighbors is only 15. So, let's jump",
    "start": 1523.6,
    "duration": 4.4
  },
  {
    "text": "into a material and I'm going to show",
    "start": 1526.559,
    "duration": 3.12
  },
  {
    "text": "you a really handy node to help you",
    "start": 1528.0,
    "duration": 3.279
  },
  {
    "text": "conceptualize",
    "start": 1529.679,
    "duration": 4.401
  },
  {
    "text": "uh how all of this stuff works. So, I",
    "start": 1531.279,
    "duration": 4.481
  },
  {
    "text": "set this up real quick. Uh, I've just",
    "start": 1534.08,
    "duration": 3.199
  },
  {
    "text": "got a custom expression returning a",
    "start": 1535.76,
    "duration": 4.399
  },
  {
    "text": "float into the debug binary values",
    "start": 1537.279,
    "duration": 4.961
  },
  {
    "text": "float. So, we're all probably familiar,",
    "start": 1540.159,
    "duration": 5.76
  },
  {
    "text": "I hope, with debug scaler values, right?",
    "start": 1542.24,
    "duration": 5.039
  },
  {
    "text": "So, this is just going to show me what",
    "start": 1545.919,
    "duration": 4.161
  },
  {
    "text": "that float number is. Um, these are very",
    "start": 1547.279,
    "duration": 4.721
  },
  {
    "text": "handy for debugging stuff in materials",
    "start": 1550.08,
    "duration": 5.52
  },
  {
    "text": "all the time. And then if you have an",
    "start": 1552.0,
    "duration": 5.679
  },
  {
    "text": "interest in doing what I'm about to show",
    "start": 1555.6,
    "duration": 5.439
  },
  {
    "text": "you, this debug binary values float is",
    "start": 1557.679,
    "duration": 5.921
  },
  {
    "text": "really, really handy. So we're going to",
    "start": 1561.039,
    "duration": 4.721
  },
  {
    "text": "zoom in on that so we can see that. And",
    "start": 1563.6,
    "duration": 4.0
  },
  {
    "text": "then we're going to zoom in over here so",
    "start": 1565.76,
    "duration": 5.36
  },
  {
    "text": "we can see that. All right. So instead",
    "start": 1567.6,
    "duration": 7.12
  },
  {
    "text": "of returning 1.0, maybe I have an",
    "start": 1571.12,
    "duration": 6.4
  },
  {
    "text": "unsigned integer called value equals",
    "start": 1574.72,
    "duration": 5.36
  },
  {
    "text": "zero. And then I want to because we're",
    "start": 1577.52,
    "duration": 4.08
  },
  {
    "text": "using we're going to use a float",
    "start": 1580.08,
    "duration": 2.719
  },
  {
    "text": "anyways. So we're going to kind of think",
    "start": 1581.6,
    "duration": 3.439
  },
  {
    "text": "about float space. So what I can do is",
    "start": 1582.799,
    "duration": 5.521
  },
  {
    "text": "instead of returning the value",
    "start": 1585.039,
    "duration": 5.12
  },
  {
    "text": "converted to a float with just like a",
    "start": 1588.32,
    "duration": 5.2
  },
  {
    "text": "float like this, I want the bits of the",
    "start": 1590.159,
    "duration": 6.161
  },
  {
    "text": "value to be treated as a float, which is",
    "start": 1593.52,
    "duration": 5.6
  },
  {
    "text": "a slightly different thing. So we're",
    "start": 1596.32,
    "duration": 4.64
  },
  {
    "text": "just going to return that as float.",
    "start": 1599.12,
    "duration": 5.52
  },
  {
    "text": "Super handy. So we'll return value as",
    "start": 1600.96,
    "duration": 5.28
  },
  {
    "text": "float.",
    "start": 1604.64,
    "duration": 3.76
  },
  {
    "text": "And of course, you know, a value of zero",
    "start": 1606.24,
    "duration": 4.96
  },
  {
    "text": "is zero. But maybe I can use I don't",
    "start": 1608.4,
    "duration": 7.279
  },
  {
    "text": "know 16 of these bits. So 16 bits gives",
    "start": 1611.2,
    "duration": 6.719
  },
  {
    "text": "me about 65,535",
    "start": 1615.679,
    "duration": 4.641
  },
  {
    "text": "steps of information which is more than",
    "start": 1617.919,
    "duration": 3.921
  },
  {
    "text": "enough for me to store a rough",
    "start": 1620.32,
    "duration": 3.76
  },
  {
    "text": "approximation of a current particle's",
    "start": 1621.84,
    "duration": 4.56
  },
  {
    "text": "position to its goal position. Right?",
    "start": 1624.08,
    "duration": 5.52
  },
  {
    "text": "And that is very handily represented by",
    "start": 1626.4,
    "duration": 7.04
  },
  {
    "text": "the hexadesimal value oxf.",
    "start": 1629.6,
    "duration": 8.48
  },
  {
    "text": "Right? So that is my first 16 bits. or",
    "start": 1633.44,
    "duration": 8.0
  },
  {
    "text": "if you wanted to 6,535",
    "start": 1638.08,
    "duration": 5.04
  },
  {
    "text": "65,535",
    "start": 1641.44,
    "duration": 3.68
  },
  {
    "text": "same thing. I think it's really handy to",
    "start": 1643.12,
    "duration": 4.32
  },
  {
    "text": "use these hex values because sometimes",
    "start": 1645.12,
    "duration": 3.52
  },
  {
    "text": "the numbers you're going to have to work",
    "start": 1647.44,
    "duration": 4.0
  },
  {
    "text": "with are not as convenient as that.",
    "start": 1648.64,
    "duration": 4.96
  },
  {
    "text": "So that's our first value. And then you",
    "start": 1651.44,
    "duration": 5.359
  },
  {
    "text": "know I've got 16 more bits to work with.",
    "start": 1653.6,
    "duration": 5.36
  },
  {
    "text": "And I know that the max neighbors per",
    "start": 1656.799,
    "duration": 4.24
  },
  {
    "text": "cell is 15 which is actually very",
    "start": 1658.96,
    "duration": 4.959
  },
  {
    "text": "conveniently",
    "start": 1661.039,
    "duration": 4.561
  },
  {
    "text": "oxf.",
    "start": 1663.919,
    "duration": 4.161
  },
  {
    "text": "That's four bits. Four bits times four",
    "start": 1665.6,
    "duration": 6.16
  },
  {
    "text": "values. Neighbors index x index index z.",
    "start": 1668.08,
    "duration": 7.44
  },
  {
    "text": "Well that's another 16 bits. But oxf is",
    "start": 1671.76,
    "duration": 6.72
  },
  {
    "text": "sitting where I want to store my",
    "start": 1675.52,
    "duration": 5.12
  },
  {
    "text": "distance value. So, I got to move that",
    "start": 1678.48,
    "duration": 4.4
  },
  {
    "text": "over, which is really easy to do with a",
    "start": 1680.64,
    "duration": 5.039
  },
  {
    "text": "couple of double uh less than operators.",
    "start": 1682.88,
    "duration": 4.799
  },
  {
    "text": "I want to move those bits over, shift",
    "start": 1685.679,
    "duration": 4.801
  },
  {
    "text": "those bits over 16 values. And now I've",
    "start": 1687.679,
    "duration": 6.161
  },
  {
    "text": "got my four bits right here. And now",
    "start": 1690.48,
    "duration": 4.799
  },
  {
    "text": "you're thinking, okay, but I got to",
    "start": 1693.84,
    "duration": 3.28
  },
  {
    "text": "combine these values together to pack",
    "start": 1695.279,
    "duration": 3.76
  },
  {
    "text": "them together, right, before we send",
    "start": 1697.12,
    "duration": 4.159
  },
  {
    "text": "everything out. So, all we have to do to",
    "start": 1699.039,
    "duration": 4.561
  },
  {
    "text": "pack everything together, assuming the",
    "start": 1701.279,
    "duration": 5.28
  },
  {
    "text": "starting bits are zero, uh, is an or",
    "start": 1703.6,
    "duration": 6.24
  },
  {
    "text": "equals. So, a pipe equals is or equals",
    "start": 1706.559,
    "duration": 8.0
  },
  {
    "text": "ox fff. And now",
    "start": 1709.84,
    "duration": 6.319
  },
  {
    "text": "I've got all of that stuff packed",
    "start": 1714.559,
    "duration": 3.041
  },
  {
    "text": "together, but they're not colliding with",
    "start": 1716.159,
    "duration": 2.801
  },
  {
    "text": "each other, which is really, really",
    "start": 1717.6,
    "duration": 4.36
  },
  {
    "text": "handy.",
    "start": 1718.96,
    "duration": 3.0
  },
  {
    "text": "So, then we need to unpack these values,",
    "start": 1723.2,
    "duration": 5.04
  },
  {
    "text": "which is a little trickier um because I",
    "start": 1726.0,
    "duration": 5.2
  },
  {
    "text": "need this value, this this uh these four",
    "start": 1728.24,
    "duration": 5.919
  },
  {
    "text": "bits in the right spot, right? So",
    "start": 1731.2,
    "duration": 6.079
  },
  {
    "text": "instead of that what I can do is say um",
    "start": 1734.159,
    "duration": 6.24
  },
  {
    "text": "value equals",
    "start": 1737.279,
    "duration": 5.681
  },
  {
    "text": "actually we want to go",
    "start": 1740.399,
    "duration": 4.561
  },
  {
    "text": "value equals",
    "start": 1742.96,
    "duration": 4.48
  },
  {
    "text": "oh right I can just shift that over. So",
    "start": 1744.96,
    "duration": 6.079
  },
  {
    "text": "value equals value shifted over 16",
    "start": 1747.44,
    "duration": 5.76
  },
  {
    "text": "places",
    "start": 1751.039,
    "duration": 4.64
  },
  {
    "text": "right super easy. So that's that's the",
    "start": 1753.2,
    "duration": 6.64
  },
  {
    "text": "um I've taken my my four bits from 16 to",
    "start": 1755.679,
    "duration": 6.961
  },
  {
    "text": "20 and I've shifted them over 16. But I",
    "start": 1759.84,
    "duration": 4.88
  },
  {
    "text": "also need to mask them out because I'm",
    "start": 1762.64,
    "duration": 3.919
  },
  {
    "text": "gonna have bits on either side of this",
    "start": 1764.72,
    "duration": 4.4
  },
  {
    "text": "that aren't going to uh play nicely with",
    "start": 1766.559,
    "duration": 5.84
  },
  {
    "text": "that. So then I just do an and equals uh",
    "start": 1769.12,
    "duration": 6.96
  },
  {
    "text": "oxf. I want to I want to bracket this in",
    "start": 1772.399,
    "duration": 7.041
  },
  {
    "text": "uh parenthesis because um I'm always",
    "start": 1776.08,
    "duration": 5.44
  },
  {
    "text": "nervous about that.",
    "start": 1779.44,
    "duration": 4.32
  },
  {
    "text": "Very liberal with parenthesis. So I'm",
    "start": 1781.52,
    "duration": 3.6
  },
  {
    "text": "going to mask out I'm going to say",
    "start": 1783.76,
    "duration": 3.12
  },
  {
    "text": "everything on either side of this that's",
    "start": 1785.12,
    "duration": 4.159
  },
  {
    "text": "not, you know, up to 15, I want to mask",
    "start": 1786.88,
    "duration": 4.96
  },
  {
    "text": "it out and then I can shift it over. So",
    "start": 1789.279,
    "duration": 5.441
  },
  {
    "text": "just in case I had something at say uh",
    "start": 1791.84,
    "duration": 6.88
  },
  {
    "text": "you know value equals oxf shifted over",
    "start": 1794.72,
    "duration": 7.439
  },
  {
    "text": "20, right? So I'm I don't have any of",
    "start": 1798.72,
    "duration": 6.559
  },
  {
    "text": "these values in the wrong spot.",
    "start": 1802.159,
    "duration": 4.88
  },
  {
    "text": "Cool. All right. So that's kind of the",
    "start": 1805.279,
    "duration": 4.64
  },
  {
    "text": "basics of how that work. Um it's a lot",
    "start": 1807.039,
    "duration": 4.801
  },
  {
    "text": "to recreate, but I whipped up some uh",
    "start": 1809.919,
    "duration": 4.161
  },
  {
    "text": "shader code that I can include in both",
    "start": 1811.84,
    "duration": 4.559
  },
  {
    "text": "Niagara and materials. I should post",
    "start": 1814.08,
    "duration": 4.479
  },
  {
    "text": "this on the EDC article that you're",
    "start": 1816.399,
    "duration": 3.601
  },
  {
    "text": "going to link to at the end of the show.",
    "start": 1818.559,
    "duration": 3.041
  },
  {
    "text": "give me like an hour and I'll take care",
    "start": 1820.0,
    "duration": 4.559
  },
  {
    "text": "of that. Um, so then in the avoidance",
    "start": 1821.6,
    "duration": 6.16
  },
  {
    "text": "stage that we've got down here, right,",
    "start": 1824.559,
    "duration": 5.521
  },
  {
    "text": "I've already I already have most of the",
    "start": 1827.76,
    "duration": 4.72
  },
  {
    "text": "values that I need, right? Index XYZ and",
    "start": 1830.08,
    "duration": 4.0
  },
  {
    "text": "the neighbor count. And then for the",
    "start": 1832.48,
    "duration": 3.36
  },
  {
    "text": "sake of time, I'm going to skip over the",
    "start": 1834.08,
    "duration": 3.36
  },
  {
    "text": "uh quantizing the distance, but we can",
    "start": 1835.84,
    "duration": 3.52
  },
  {
    "text": "talk about that later. Uh, and this is",
    "start": 1837.44,
    "duration": 4.0
  },
  {
    "text": "again going out as a float value. So",
    "start": 1839.36,
    "duration": 4.48
  },
  {
    "text": "then I can just say set dynamic material",
    "start": 1841.44,
    "duration": 4.479
  },
  {
    "text": "parameter",
    "start": 1843.84,
    "duration": 3.439
  },
  {
    "text": "one. And then I'm going to use the",
    "start": 1845.919,
    "duration": 3.76
  },
  {
    "text": "convert node here because I'm a huge fan",
    "start": 1847.279,
    "duration": 5.201
  },
  {
    "text": "of it. So we've got that value coming",
    "start": 1849.679,
    "duration": 4.88
  },
  {
    "text": "in. I've got my parameter that's going",
    "start": 1852.48,
    "duration": 4.0
  },
  {
    "text": "to go into the X value. Then I'm going",
    "start": 1854.559,
    "duration": 3.441
  },
  {
    "text": "to make another float just so we can",
    "start": 1856.48,
    "duration": 4.079
  },
  {
    "text": "zero out everything else. So now I'm",
    "start": 1858.0,
    "duration": 4.0
  },
  {
    "text": "taking all of that information that I've",
    "start": 1860.559,
    "duration": 3.12
  },
  {
    "text": "got and I'm sending it to the particles",
    "start": 1862.0,
    "duration": 4.0
  },
  {
    "text": "material through the dynamic material",
    "start": 1863.679,
    "duration": 5.041
  },
  {
    "text": "parameter channel.",
    "start": 1866.0,
    "duration": 4.159
  },
  {
    "text": "And then we can jump back to our",
    "start": 1868.72,
    "duration": 3.839
  },
  {
    "text": "particle material over here. And let's",
    "start": 1870.159,
    "duration": 5.441
  },
  {
    "text": "just for the sake of time I'm going to",
    "start": 1872.559,
    "duration": 6.081
  },
  {
    "text": "say um let's grab the dynamic material",
    "start": 1875.6,
    "duration": 6.799
  },
  {
    "text": "parameter dynamic parameter. And then I",
    "start": 1878.64,
    "duration": 6.72
  },
  {
    "text": "know that this is up to 15. Uh and",
    "start": 1882.399,
    "duration": 5.121
  },
  {
    "text": "actually I have already staged for",
    "start": 1885.36,
    "duration": 5.36
  },
  {
    "text": "myself a helper function to get the",
    "start": 1887.52,
    "duration": 5.279
  },
  {
    "text": "parameters of the sprite. So it's just",
    "start": 1890.72,
    "duration": 4.079
  },
  {
    "text": "doing masking and shifting, masking and",
    "start": 1892.799,
    "duration": 3.681
  },
  {
    "text": "shifting. Nothing you haven't seen",
    "start": 1894.799,
    "duration": 3.521
  },
  {
    "text": "already. So that gives me my neighbor",
    "start": 1896.48,
    "duration": 3.439
  },
  {
    "text": "value. And I know that that neighbor",
    "start": 1898.32,
    "duration": 4.32
  },
  {
    "text": "value can go up to 15. And now what I",
    "start": 1899.919,
    "duration": 4.64
  },
  {
    "text": "can do is scale the brightness of the",
    "start": 1902.64,
    "duration": 3.759
  },
  {
    "text": "particle based on the number of",
    "start": 1904.559,
    "duration": 4.081
  },
  {
    "text": "neighbors, right? Maybe I want to uh",
    "start": 1906.399,
    "duration": 4.4
  },
  {
    "text": "have everybody be glowing more the",
    "start": 1908.64,
    "duration": 3.519
  },
  {
    "text": "closer they get to each other, but oh,",
    "start": 1910.799,
    "duration": 3.36
  },
  {
    "text": "they're running away from each other.",
    "start": 1912.159,
    "duration": 6.321
  },
  {
    "text": "And isn't that so sad? Um, and then",
    "start": 1914.159,
    "duration": 7.921
  },
  {
    "text": "yeah, let's go take a look at that.",
    "start": 1918.48,
    "duration": 5.919
  },
  {
    "text": "So all of these particles have maybe a",
    "start": 1922.08,
    "duration": 4.079
  },
  {
    "text": "few more neighbors than we're expecting,",
    "start": 1924.399,
    "duration": 6.241
  },
  {
    "text": "but we can also, as a fun little demo,",
    "start": 1926.159,
    "duration": 6.561
  },
  {
    "text": "we can also grab the grid index, right?",
    "start": 1930.64,
    "duration": 3.919
  },
  {
    "text": "So that's a float 3 value. And I'm just",
    "start": 1932.72,
    "duration": 4.319
  },
  {
    "text": "going to for the sake of argument debug",
    "start": 1934.559,
    "duration": 4.96
  },
  {
    "text": "float 3 values",
    "start": 1937.039,
    "duration": 5.041
  },
  {
    "text": "and send that out.",
    "start": 1939.519,
    "duration": 4.241
  },
  {
    "text": "I'm going to add that into emissive so",
    "start": 1942.08,
    "duration": 5.64
  },
  {
    "text": "that we can always see that.",
    "start": 1943.76,
    "duration": 3.96
  },
  {
    "text": "Okay.",
    "start": 1949.039,
    "duration": 3.76
  },
  {
    "text": "Apply and",
    "start": 1950.64,
    "duration": 4.399
  },
  {
    "text": "save. And then if this doesn't work,",
    "start": 1952.799,
    "duration": 3.921
  },
  {
    "text": "then what I know is that my references",
    "start": 1955.039,
    "duration": 4.721
  },
  {
    "text": "were messed up, which they were. Easy.",
    "start": 1956.72,
    "duration": 7.04
  },
  {
    "text": "So now we can play an editor.",
    "start": 1959.76,
    "duration": 5.6
  },
  {
    "text": "And then the other reference was messed",
    "start": 1963.76,
    "duration": 5.36
  },
  {
    "text": "up. Live demos, right? Oh, that's the",
    "start": 1965.36,
    "duration": 6.08
  },
  {
    "text": "right one. Interesting. Um, so I think",
    "start": 1969.12,
    "duration": 4.0
  },
  {
    "text": "that's because the uh based on the grid",
    "start": 1971.44,
    "duration": 3.359
  },
  {
    "text": "size and all that fun stuff. Trust me,",
    "start": 1973.12,
    "duration": 5.52
  },
  {
    "text": "it works. um because because that's how",
    "start": 1974.799,
    "duration": 6.081
  },
  {
    "text": "all of this stuff is working. I can",
    "start": 1978.64,
    "duration": 4.08
  },
  {
    "text": "prove to you that this works. So the",
    "start": 1980.88,
    "duration": 4.48
  },
  {
    "text": "health value that's in the first 16",
    "start": 1982.72,
    "duration": 6.64
  },
  {
    "text": "bits. Uh I also store uh if the unit is",
    "start": 1985.36,
    "duration": 7.039
  },
  {
    "text": "selected that's one bit. That's the 32",
    "start": 1989.36,
    "duration": 7.919
  },
  {
    "text": "uh the 32nd bit. And then the uh the",
    "start": 1992.399,
    "duration": 6.801
  },
  {
    "text": "animation state. So, if I'm idle or if",
    "start": 1997.279,
    "duration": 4.161
  },
  {
    "text": "I'm moving, the direction that I'm",
    "start": 1999.2,
    "duration": 4.319
  },
  {
    "text": "moving, and I use all of that, I use",
    "start": 2001.44,
    "duration": 3.839
  },
  {
    "text": "some of that in the particle system to",
    "start": 2003.519,
    "duration": 3.841
  },
  {
    "text": "select which sprite sheet in the flip",
    "start": 2005.279,
    "duration": 4.081
  },
  {
    "text": "book we should be using. And then some",
    "start": 2007.36,
    "duration": 3.439
  },
  {
    "text": "of those values then get passed on to",
    "start": 2009.36,
    "duration": 3.6
  },
  {
    "text": "the material so that I can draw the unit",
    "start": 2010.799,
    "duration": 5.281
  },
  {
    "text": "outlines and all that fun stuff. So,",
    "start": 2012.96,
    "duration": 6.16
  },
  {
    "text": "cool. It's again, this is in my mind",
    "start": 2016.08,
    "duration": 4.959
  },
  {
    "text": "more about being efficient about your",
    "start": 2019.12,
    "duration": 3.84
  },
  {
    "text": "channels of data necessarily than the",
    "start": 2021.039,
    "duration": 3.681
  },
  {
    "text": "memory, but I think it's a fun trick to",
    "start": 2022.96,
    "duration": 5.439
  },
  {
    "text": "keep in your tool belt. Um",
    "start": 2024.72,
    "duration": 6.64
  },
  {
    "text": "so yeah right uh colors are just numbers",
    "start": 2028.399,
    "duration": 4.961
  },
  {
    "text": "and numbers are just bits and bits can",
    "start": 2031.36,
    "duration": 4.88
  },
  {
    "text": "be shifted and operated bitwise as",
    "start": 2033.36,
    "duration": 4.559
  },
  {
    "text": "opposed to like you don't have to treat",
    "start": 2036.24,
    "duration": 3.76
  },
  {
    "text": "it as an array of 32 floats. You can",
    "start": 2037.919,
    "duration": 6.36
  },
  {
    "text": "just treat the thing as itself.",
    "start": 2040.0,
    "duration": 4.279
  },
  {
    "text": "All right. So we're we have arrived at",
    "start": 2044.799,
    "duration": 3.441
  },
  {
    "text": "the final little trick that I want to",
    "start": 2046.72,
    "duration": 2.8
  },
  {
    "text": "show you today. So let's talk about",
    "start": 2048.24,
    "duration": 3.359
  },
  {
    "text": "distance fields.",
    "start": 2049.52,
    "duration": 3.839
  },
  {
    "text": "Right? Distance fields are basically for",
    "start": 2051.599,
    "duration": 3.681
  },
  {
    "text": "any given point in the field. The value",
    "start": 2053.359,
    "duration": 3.841
  },
  {
    "text": "at that point is the distance to the",
    "start": 2055.28,
    "duration": 4.0
  },
  {
    "text": "nearest surface. And if you've got a",
    "start": 2057.2,
    "duration": 4.399
  },
  {
    "text": "signed distance field, the numbers can",
    "start": 2059.28,
    "duration": 4.399
  },
  {
    "text": "be positive or negative, where negative",
    "start": 2061.599,
    "duration": 3.921
  },
  {
    "text": "numbers denote that you are inside of a",
    "start": 2063.679,
    "duration": 3.841
  },
  {
    "text": "surface and positive numbers represent",
    "start": 2065.52,
    "duration": 3.92
  },
  {
    "text": "you being outside of the surface. And",
    "start": 2067.52,
    "duration": 4.079
  },
  {
    "text": "we'll use these to make a sort of pseudo",
    "start": 2069.44,
    "duration": 5.439
  },
  {
    "text": "screen space mask around our particles.",
    "start": 2071.599,
    "duration": 5.201
  },
  {
    "text": "So, I did set up a couple of little",
    "start": 2074.879,
    "duration": 3.601
  },
  {
    "text": "helpers here. So, right, we've got our",
    "start": 2076.8,
    "duration": 3.52
  },
  {
    "text": "our positions render target. I've",
    "start": 2078.48,
    "duration": 3.679
  },
  {
    "text": "already got another render target set up",
    "start": 2080.32,
    "duration": 4.48
  },
  {
    "text": "in the material that's just a a 32-bit",
    "start": 2082.159,
    "duration": 8.0
  },
  {
    "text": "float um render target and um we've got",
    "start": 2084.8,
    "duration": 6.559
  },
  {
    "text": "a couple of materials we're going to",
    "start": 2090.159,
    "duration": 2.48
  },
  {
    "text": "work with. So, we're going to do this in",
    "start": 2091.359,
    "duration": 3.361
  },
  {
    "text": "two stages. The first thing we're going",
    "start": 2092.639,
    "duration": 5.521
  },
  {
    "text": "to do is use the draw material to render",
    "start": 2094.72,
    "duration": 6.399
  },
  {
    "text": "target node to create uh the distance",
    "start": 2098.16,
    "duration": 5.12
  },
  {
    "text": "field as that render target. And then in",
    "start": 2101.119,
    "duration": 3.681
  },
  {
    "text": "a different material, we're going to",
    "start": 2103.28,
    "duration": 3.28
  },
  {
    "text": "sample that render target by",
    "start": 2104.8,
    "duration": 3.6
  },
  {
    "text": "transforming its, you know, the world",
    "start": 2106.56,
    "duration": 4.32
  },
  {
    "text": "positions into uh something that makes",
    "start": 2108.4,
    "duration": 4.16
  },
  {
    "text": "re that makes sense for that distance",
    "start": 2110.88,
    "duration": 5.04
  },
  {
    "text": "field. So basically two steps. First,",
    "start": 2112.56,
    "duration": 4.88
  },
  {
    "text": "draw to the distance field and then",
    "start": 2115.92,
    "duration": 4.24
  },
  {
    "text": "sample the distance field. So in the",
    "start": 2117.44,
    "duration": 5.2
  },
  {
    "text": "blueprint, uh this part is really really",
    "start": 2120.16,
    "duration": 4.08
  },
  {
    "text": "simple and I've already set it up for",
    "start": 2122.64,
    "duration": 3.6
  },
  {
    "text": "us. Every frame we're going to draw",
    "start": 2124.24,
    "duration": 4.24
  },
  {
    "text": "material to render target. And now",
    "start": 2126.24,
    "duration": 4.879
  },
  {
    "text": "here's the thing about this is um the",
    "start": 2128.48,
    "duration": 4.879
  },
  {
    "text": "render when we do this draw material to",
    "start": 2131.119,
    "duration": 5.841
  },
  {
    "text": "render target. We don't that renderer",
    "start": 2133.359,
    "duration": 7.041
  },
  {
    "text": "doesn't know anything about the world of",
    "start": 2136.96,
    "duration": 5.68
  },
  {
    "text": "the main view that you're rendering. It",
    "start": 2140.4,
    "duration": 5.84
  },
  {
    "text": "only knows I'm rendering this material",
    "start": 2142.64,
    "duration": 6.08
  },
  {
    "text": "to this quad and that's it. So it",
    "start": 2146.24,
    "duration": 4.72
  },
  {
    "text": "doesn't know the camera vector. It",
    "start": 2148.72,
    "duration": 4.639
  },
  {
    "text": "doesn't know world position of the thing",
    "start": 2150.96,
    "duration": 4.08
  },
  {
    "text": "that you might be sampling it from. So",
    "start": 2153.359,
    "duration": 4.081
  },
  {
    "text": "we have to transform the 0ero to one",
    "start": 2155.04,
    "duration": 6.0
  },
  {
    "text": "values of that uh of that quad into",
    "start": 2157.44,
    "duration": 5.12
  },
  {
    "text": "something that makes sense for our",
    "start": 2161.04,
    "duration": 3.36
  },
  {
    "text": "distance field renderer. So what I'm",
    "start": 2162.56,
    "duration": 3.84
  },
  {
    "text": "doing on this this plane that we're",
    "start": 2164.4,
    "duration": 4.56
  },
  {
    "text": "using for for the fog of world is I'm",
    "start": 2166.4,
    "duration": 5.6
  },
  {
    "text": "sending in the center of the bounds and",
    "start": 2168.96,
    "duration": 5.119
  },
  {
    "text": "the extents and that's what we're going",
    "start": 2172.0,
    "duration": 5.119
  },
  {
    "text": "to use to transform our values in from 0",
    "start": 2174.079,
    "duration": 5.361
  },
  {
    "text": "to one into world space relative to our",
    "start": 2177.119,
    "duration": 5.121
  },
  {
    "text": "object here.",
    "start": 2179.44,
    "duration": 5.919
  },
  {
    "text": "So here is our ignore that um because I",
    "start": 2182.24,
    "duration": 4.32
  },
  {
    "text": "knew I was going to start running out of",
    "start": 2185.359,
    "duration": 4.0
  },
  {
    "text": "time here. So all I'm taking is our 0",
    "start": 2186.56,
    "duration": 5.12
  },
  {
    "text": "to1 values uh shifting that over a",
    "start": 2189.359,
    "duration": 4.881
  },
  {
    "text": "little constant bias scale scaling it",
    "start": 2191.68,
    "duration": 6.88
  },
  {
    "text": "out by the extents of our our plane and",
    "start": 2194.24,
    "duration": 6.4
  },
  {
    "text": "then uh adding in the center. So",
    "start": 2198.56,
    "duration": 3.44
  },
  {
    "text": "wherever the center is we want to move",
    "start": 2200.64,
    "duration": 3.439
  },
  {
    "text": "that over. So now if we've got something",
    "start": 2202.0,
    "duration": 4.64
  },
  {
    "text": "that's a th00and by a th00and the bottom",
    "start": 2204.079,
    "duration": 4.241
  },
  {
    "text": "left corner is like negative 500",
    "start": 2206.64,
    "duration": 4.0
  },
  {
    "text": "negative 500 the top right corner is 500",
    "start": 2208.32,
    "duration": 5.759
  },
  {
    "text": "500 and that way so that's our our UV",
    "start": 2210.64,
    "duration": 5.84
  },
  {
    "text": "value if you will I'm also bringing in",
    "start": 2214.079,
    "duration": 4.721
  },
  {
    "text": "the uh particle positions render target",
    "start": 2216.48,
    "duration": 5.28
  },
  {
    "text": "and its texture size and then over here",
    "start": 2218.8,
    "duration": 4.16
  },
  {
    "text": "because again this is going to be a lot",
    "start": 2221.76,
    "duration": 3.839
  },
  {
    "text": "to type out um I should also put this",
    "start": 2222.96,
    "duration": 5.2
  },
  {
    "text": "snippet in the in the EDC article so",
    "start": 2225.599,
    "duration": 3.921
  },
  {
    "text": "basically we're saying all right if I",
    "start": 2228.16,
    "duration": 3.919
  },
  {
    "text": "want to sample from the positions render",
    "start": 2229.52,
    "duration": 5.28
  },
  {
    "text": "target the exact value and I don't want",
    "start": 2232.079,
    "duration": 4.561
  },
  {
    "text": "to worry about any kind of bilinear",
    "start": 2234.8,
    "duration": 4.319
  },
  {
    "text": "filtering. I need to offset my UV ever",
    "start": 2236.64,
    "duration": 5.52
  },
  {
    "text": "so slightly for that sample and then I",
    "start": 2239.119,
    "duration": 4.641
  },
  {
    "text": "just initialize some values. I",
    "start": 2242.16,
    "duration": 4.32
  },
  {
    "text": "initialize the result. So the maximum",
    "start": 2243.76,
    "duration": 4.56
  },
  {
    "text": "value that I would expect to see here is",
    "start": 2246.48,
    "duration": 4.8
  },
  {
    "text": "one. And then I'm going to loop over all",
    "start": 2248.32,
    "duration": 5.2
  },
  {
    "text": "of the pixels in the render target X and",
    "start": 2251.28,
    "duration": 4.559
  },
  {
    "text": "Y. And then I get the UV that I should",
    "start": 2253.52,
    "duration": 4.16
  },
  {
    "text": "be sampling the position from, which",
    "start": 2255.839,
    "duration": 4.561
  },
  {
    "text": "then gives me the XY position of the",
    "start": 2257.68,
    "duration": 5.679
  },
  {
    "text": "particle in world space. And then the UV",
    "start": 2260.4,
    "duration": 4.64
  },
  {
    "text": "values that we're working with are also",
    "start": 2263.359,
    "duration": 4.881
  },
  {
    "text": "in world space. And what we can do to",
    "start": 2265.04,
    "duration": 6.24
  },
  {
    "text": "create the uh sphere distance field,",
    "start": 2268.24,
    "duration": 4.64
  },
  {
    "text": "right? I I'm just going to use a circle",
    "start": 2271.28,
    "duration": 5.12
  },
  {
    "text": "right now. um that is just distance",
    "start": 2272.88,
    "duration": 6.88
  },
  {
    "text": "between our two positions in UV sample",
    "start": 2276.4,
    "duration": 4.959
  },
  {
    "text": "position",
    "start": 2279.76,
    "duration": 3.2
  },
  {
    "text": "minus",
    "start": 2281.359,
    "duration": 3.441
  },
  {
    "text": "the radius of the circle that we're",
    "start": 2282.96,
    "duration": 4.24
  },
  {
    "text": "working with. And then because I didn't",
    "start": 2284.8,
    "duration": 4.16
  },
  {
    "text": "want to deal with numbers that are too",
    "start": 2287.2,
    "duration": 3.28
  },
  {
    "text": "high.",
    "start": 2288.96,
    "duration": 4.24
  },
  {
    "text": "Go back. There we go. I didn't want to",
    "start": 2290.48,
    "duration": 4.08
  },
  {
    "text": "deal with numbers that are too high, I'm",
    "start": 2293.2,
    "duration": 3.36
  },
  {
    "text": "also going to normalize that to the hit",
    "start": 2294.56,
    "duration": 3.519
  },
  {
    "text": "radius.",
    "start": 2296.56,
    "duration": 3.6
  },
  {
    "text": "So this is going to give us one",
    "start": 2298.079,
    "duration": 4.481
  },
  {
    "text": "particle. And we want to combine all of",
    "start": 2300.16,
    "duration": 5.36
  },
  {
    "text": "these particles together as we are",
    "start": 2302.56,
    "duration": 4.799
  },
  {
    "text": "working.",
    "start": 2305.52,
    "duration": 3.839
  },
  {
    "text": "So all we have to do for that is say",
    "start": 2307.359,
    "duration": 4.48
  },
  {
    "text": "just get the minimum value of",
    "start": 2309.359,
    "duration": 6.321
  },
  {
    "text": "everything. So result equals min result",
    "start": 2311.839,
    "duration": 5.441
  },
  {
    "text": "and then our new distance field",
    "start": 2315.68,
    "duration": 4.48
  },
  {
    "text": "calculation",
    "start": 2317.28,
    "duration": 6.48
  },
  {
    "text": "and hopefully that compiles.",
    "start": 2320.16,
    "duration": 6.64
  },
  {
    "text": "Capitalization gets me every time. There",
    "start": 2323.76,
    "duration": 5.2
  },
  {
    "text": "we go.",
    "start": 2326.8,
    "duration": 5.52
  },
  {
    "text": "Oh, and another extra parenthesy. I told",
    "start": 2328.96,
    "duration": 6.08
  },
  {
    "text": "you I was liberal with parentheses.",
    "start": 2332.32,
    "duration": 4.799
  },
  {
    "text": "So, we can apply that value and this is",
    "start": 2335.04,
    "duration": 4.24
  },
  {
    "text": "going to draw into our render target.",
    "start": 2337.119,
    "duration": 4.081
  },
  {
    "text": "And then actually very conveniently",
    "start": 2339.28,
    "duration": 6.96
  },
  {
    "text": "because of the way that I have com uh uh",
    "start": 2341.2,
    "duration": 7.12
  },
  {
    "text": "contrived this example uh we don't",
    "start": 2346.24,
    "duration": 3.28
  },
  {
    "text": "actually have to do anything super",
    "start": 2348.32,
    "duration": 3.2
  },
  {
    "text": "special for sampling our distance field",
    "start": 2349.52,
    "duration": 4.96
  },
  {
    "text": "because I'm using the bounds of the",
    "start": 2351.52,
    "duration": 6.24
  },
  {
    "text": "plane that I'm drawing from to go from 0",
    "start": 2354.48,
    "duration": 5.359
  },
  {
    "text": "to one to world space which means that",
    "start": 2357.76,
    "duration": 3.92
  },
  {
    "text": "the distance field is already in 0 to",
    "start": 2359.839,
    "duration": 3.841
  },
  {
    "text": "one for the thing that I'm sampling it",
    "start": 2361.68,
    "duration": 3.439
  },
  {
    "text": "from which makes this example really",
    "start": 2363.68,
    "duration": 3.52
  },
  {
    "text": "really simple. So, all I have to do is",
    "start": 2365.119,
    "duration": 6.161
  },
  {
    "text": "remember to set this to linear color",
    "start": 2367.2,
    "duration": 5.84
  },
  {
    "text": "and then pass that out to the opacity",
    "start": 2371.28,
    "duration": 3.6
  },
  {
    "text": "mask. And this should mask out the areas",
    "start": 2373.04,
    "duration": 3.92
  },
  {
    "text": "around our particles.",
    "start": 2374.88,
    "duration": 3.68
  },
  {
    "text": "Okay,",
    "start": 2376.96,
    "duration": 5.04
  },
  {
    "text": "there we go. Aha. So, we've got all of",
    "start": 2378.56,
    "duration": 5.84
  },
  {
    "text": "our particles looping. They should be",
    "start": 2382.0,
    "duration": 5.839
  },
  {
    "text": "all looping together.",
    "start": 2384.4,
    "duration": 6.48
  },
  {
    "text": "That's fine.",
    "start": 2387.839,
    "duration": 4.401
  },
  {
    "text": "We're just going to drag everything in",
    "start": 2390.88,
    "duration": 3.28
  },
  {
    "text": "instead.",
    "start": 2392.24,
    "duration": 4.48
  },
  {
    "text": "How do you like that?",
    "start": 2394.16,
    "duration": 4.72
  },
  {
    "text": "There we go.",
    "start": 2396.72,
    "duration": 4.879
  },
  {
    "text": "P.",
    "start": 2398.88,
    "duration": 5.6
  },
  {
    "text": "I wonder why that's not working. Well,",
    "start": 2401.599,
    "duration": 5.681
  },
  {
    "text": "in any case, that's also how I'm doing",
    "start": 2404.48,
    "duration": 6.08
  },
  {
    "text": "the fog of war.",
    "start": 2407.28,
    "duration": 5.6
  },
  {
    "text": "We loved live demos. So, yeah, again,",
    "start": 2410.56,
    "duration": 3.6
  },
  {
    "text": "this is this is kind of the same thing",
    "start": 2412.88,
    "duration": 4.08
  },
  {
    "text": "that that I was showing earlier, and EDC",
    "start": 2414.16,
    "duration": 4.0
  },
  {
    "text": "article will have the more correct",
    "start": 2416.96,
    "duration": 3.2
  },
  {
    "text": "examples of this. Um, but all of the",
    "start": 2418.16,
    "duration": 3.36
  },
  {
    "text": "particle positions are getting written",
    "start": 2420.16,
    "duration": 3.679
  },
  {
    "text": "into the distance field, which is our",
    "start": 2421.52,
    "duration": 4.4
  },
  {
    "text": "um, which we're then using to render the",
    "start": 2423.839,
    "duration": 3.921
  },
  {
    "text": "fog of war. And then I just do like a",
    "start": 2425.92,
    "duration": 3.52
  },
  {
    "text": "couple of like dithering tricks to do",
    "start": 2427.76,
    "duration": 4.0
  },
  {
    "text": "that added uh, added effect, right? So,",
    "start": 2429.44,
    "duration": 4.72
  },
  {
    "text": "we can move everything over there. And",
    "start": 2431.76,
    "duration": 5.04
  },
  {
    "text": "there we go.",
    "start": 2434.16,
    "duration": 4.72
  },
  {
    "text": "So, cool.",
    "start": 2436.8,
    "duration": 4.88
  },
  {
    "text": "Actually didn't get uh, didn't go over",
    "start": 2438.88,
    "duration": 4.0
  },
  {
    "text": "time on this, right? So, I think",
    "start": 2441.68,
    "duration": 2.399
  },
  {
    "text": "distance fields are are a really",
    "start": 2442.88,
    "duration": 4.8
  },
  {
    "text": "powerful trick and you can do your own",
    "start": 2444.079,
    "duration": 5.28
  },
  {
    "text": "things with these distance fields. It is",
    "start": 2447.68,
    "duration": 4.0
  },
  {
    "text": "a super deep rabbit hole. If you have",
    "start": 2449.359,
    "duration": 4.801
  },
  {
    "text": "ever seen Inigo Quilez's tweets or work,",
    "start": 2451.68,
    "duration": 4.0
  },
  {
    "text": "you might start to get an idea of how",
    "start": 2454.16,
    "duration": 4.8
  },
  {
    "text": "deep this rabbit hole really goes. Um, I",
    "start": 2455.68,
    "duration": 4.8
  },
  {
    "text": "will also call out that there's a bunch",
    "start": 2458.96,
    "duration": 3.6
  },
  {
    "text": "of distance field in that example that's",
    "start": 2460.48,
    "duration": 4.16
  },
  {
    "text": "not visible on screen because, you know,",
    "start": 2462.56,
    "duration": 4.16
  },
  {
    "text": "I've got this giant plane, but we can",
    "start": 2464.64,
    "duration": 4.08
  },
  {
    "text": "only see this little part of it. And I",
    "start": 2466.72,
    "duration": 3.359
  },
  {
    "text": "will leave it as an exercise to the",
    "start": 2468.72,
    "duration": 2.8
  },
  {
    "text": "reader of how we can do that a little",
    "start": 2470.079,
    "duration": 3.841
  },
  {
    "text": "bit more efficiently. But right, all",
    "start": 2471.52,
    "duration": 4.559
  },
  {
    "text": "we're doing is taking is is transforming",
    "start": 2473.92,
    "duration": 5.28
  },
  {
    "text": "0ero to one in our UV space into the",
    "start": 2476.079,
    "duration": 4.961
  },
  {
    "text": "space that we want to draw our distance",
    "start": 2479.2,
    "duration": 4.24
  },
  {
    "text": "field in so that we can then pull in the",
    "start": 2481.04,
    "duration": 4.559
  },
  {
    "text": "world positions of our our particles,",
    "start": 2483.44,
    "duration": 4.159
  },
  {
    "text": "our distance field shapes or whatever,",
    "start": 2485.599,
    "duration": 3.681
  },
  {
    "text": "we can bring those in. And if you want",
    "start": 2487.599,
    "duration": 4.561
  },
  {
    "text": "to get really advanced, uh, when we're",
    "start": 2489.28,
    "duration": 6.319
  },
  {
    "text": "writing our positions to that, uh, that",
    "start": 2492.16,
    "duration": 6.08
  },
  {
    "text": "render target, what if we also wrote",
    "start": 2495.599,
    "duration": 5.121
  },
  {
    "text": "like parameters of our distance field",
    "start": 2498.24,
    "duration": 4.8
  },
  {
    "text": "shape into the alpha value of that",
    "start": 2500.72,
    "duration": 4.48
  },
  {
    "text": "render target, right? I don't want to",
    "start": 2503.04,
    "duration": 3.6
  },
  {
    "text": "have to sample two render targets to get",
    "start": 2505.2,
    "duration": 3.04
  },
  {
    "text": "all these parameters. I can be efficient",
    "start": 2506.64,
    "duration": 4.959
  },
  {
    "text": "about my data channel use, right? So,",
    "start": 2508.24,
    "duration": 4.64
  },
  {
    "text": "I'm sure you're a little curious about",
    "start": 2511.599,
    "duration": 3.121
  },
  {
    "text": "the results. So, in the project that",
    "start": 2512.88,
    "duration": 4.0
  },
  {
    "text": "I've got, the way I have it set up, I",
    "start": 2514.72,
    "duration": 4.24
  },
  {
    "text": "can interact with about 4,000 units",
    "start": 2516.88,
    "duration": 5.28
  },
  {
    "text": "before things start to get challenging",
    "start": 2518.96,
    "duration": 5.84
  },
  {
    "text": "on a Galaxy S10. And most of that",
    "start": 2522.16,
    "duration": 4.64
  },
  {
    "text": "actually is from the distance field",
    "start": 2524.8,
    "duration": 3.84
  },
  {
    "text": "rendering. So, I will leave it again as",
    "start": 2526.8,
    "duration": 3.84
  },
  {
    "text": "an exercise to the reader on how we can",
    "start": 2528.64,
    "duration": 3.92
  },
  {
    "text": "improve that in the future. Jump",
    "start": 2530.64,
    "duration": 4.8
  },
  {
    "text": "flooding. Uh if anybody wants to come uh",
    "start": 2532.56,
    "duration": 4.64
  },
  {
    "text": "check it out or talk more about this",
    "start": 2535.44,
    "duration": 3.84
  },
  {
    "text": "again, I guarantee you I will be in the",
    "start": 2537.2,
    "duration": 4.24
  },
  {
    "text": "dev hub from like 1:30 to 3 tomorrow,",
    "start": 2539.28,
    "duration": 3.68
  },
  {
    "text": "but there's also a TV screen with my",
    "start": 2541.44,
    "duration": 2.72
  },
  {
    "text": "schedule on it, so you can check that",
    "start": 2542.96,
    "duration": 4.56
  },
  {
    "text": "out as well. Okay, so what have we",
    "start": 2544.16,
    "duration": 6.48
  },
  {
    "text": "learned today? Well, we learned how we",
    "start": 2547.52,
    "duration": 4.799
  },
  {
    "text": "should be building real-time strategy",
    "start": 2550.64,
    "duration": 4.56
  },
  {
    "text": "games. And we also learned how we",
    "start": 2552.319,
    "duration": 5.28
  },
  {
    "text": "shouldn't, but instead we learned how we",
    "start": 2555.2,
    "duration": 4.32
  },
  {
    "text": "can use Niagara as a compute shader to",
    "start": 2557.599,
    "duration": 3.441
  },
  {
    "text": "allow deeper interactions with our",
    "start": 2559.52,
    "duration": 3.92
  },
  {
    "text": "particles. How to use the neighbor grid",
    "start": 2561.04,
    "duration": 4.559
  },
  {
    "text": "3D to allow our particles to interact",
    "start": 2563.44,
    "duration": 4.0
  },
  {
    "text": "with each other. And then we learned how",
    "start": 2565.599,
    "duration": 4.0
  },
  {
    "text": "we can pack a bunch of data into a",
    "start": 2567.44,
    "duration": 4.639
  },
  {
    "text": "single float with bitwise operators. And",
    "start": 2569.599,
    "duration": 4.081
  },
  {
    "text": "finally, we learned how to make a simple",
    "start": 2572.079,
    "duration": 3.121
  },
  {
    "text": "distance field representation of our",
    "start": 2573.68,
    "duration": 2.8
  },
  {
    "text": "particles. And I just remembered why",
    "start": 2575.2,
    "duration": 4.48
  },
  {
    "text": "that demo didn't work.",
    "start": 2576.48,
    "duration": 5.68
  },
  {
    "text": "So, uh, thank you all very much. Uh, if",
    "start": 2579.68,
    "duration": 4.0
  },
  {
    "text": "you give me two seconds, I'm going to go",
    "start": 2582.16,
    "duration": 3.12
  },
  {
    "text": "figure out how that works and then we",
    "start": 2583.68,
    "duration": 5.0
  },
  {
    "text": "can get to questions.",
    "start": 2585.28,
    "duration": 3.4
  }
]