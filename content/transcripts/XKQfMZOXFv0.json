[
  {
    "text": "Hello. Hello everyone. Welcome to",
    "start": 1.36,
    "duration": 4.56
  },
  {
    "text": "crafting a scalable AI for a triple A",
    "start": 3.6,
    "duration": 4.8
  },
  {
    "text": "soulslike game in Unreal Engine. I will",
    "start": 5.92,
    "duration": 4.48
  },
  {
    "text": "talk to you about three systems we craft",
    "start": 8.4,
    "duration": 4.8
  },
  {
    "text": "for Lords of the Fallen and how we adapt",
    "start": 10.4,
    "duration": 4.88
  },
  {
    "text": "them for future releases and hopefully",
    "start": 13.2,
    "duration": 4.96
  },
  {
    "text": "other IPs within the CA games catalog.",
    "start": 15.28,
    "duration": 5.04
  },
  {
    "text": "Uh the talk will be divided in three",
    "start": 18.16,
    "duration": 4.64
  },
  {
    "text": "parts. One is navigation and how we",
    "start": 20.32,
    "duration": 4.48
  },
  {
    "text": "solve navigation when you have many",
    "start": 22.8,
    "duration": 4.88
  },
  {
    "text": "different enemy sizes. decision making,",
    "start": 24.8,
    "duration": 5.28
  },
  {
    "text": "how we move from massive behavior twist",
    "start": 27.68,
    "duration": 4.08
  },
  {
    "text": "to something more manageable through",
    "start": 30.08,
    "duration": 4.479
  },
  {
    "text": "datadriven approach and combat couple",
    "start": 31.76,
    "duration": 4.72
  },
  {
    "text": "situations that happen in combat games",
    "start": 34.559,
    "duration": 4.881
  },
  {
    "text": "that are common to other genres.",
    "start": 36.48,
    "duration": 5.44
  },
  {
    "text": "I'm Bruno. I'm a senior AI programmer. I",
    "start": 39.44,
    "duration": 4.4
  },
  {
    "text": "work for CA gangs and currently working",
    "start": 41.92,
    "duration": 4.08
  },
  {
    "text": "on Lords of the Fallen 2. Before I work",
    "start": 43.84,
    "duration": 4.8
  },
  {
    "text": "on Lords of the Fallen Reboot and before",
    "start": 46.0,
    "duration": 4.48
  },
  {
    "text": "that, the Asen and Sack Boy are big",
    "start": 48.64,
    "duration": 4.239
  },
  {
    "text": "adventure. Aside my work, I also",
    "start": 50.48,
    "duration": 4.48
  },
  {
    "text": "contribute with the small AI articles in",
    "start": 52.879,
    "duration": 4.561
  },
  {
    "text": "the game AI and cover series by Paul",
    "start": 54.96,
    "duration": 4.32
  },
  {
    "text": "Roberts. I really recommend the books if",
    "start": 57.44,
    "duration": 4.639
  },
  {
    "text": "you are into AI. Uh lots of the",
    "start": 59.28,
    "duration": 4.879
  },
  {
    "text": "following from a developer project",
    "start": 62.079,
    "duration": 4.241
  },
  {
    "text": "context. It was built on top of three",
    "start": 64.159,
    "duration": 4.0
  },
  {
    "text": "principles. Fast iteration, short",
    "start": 66.32,
    "duration": 4.0
  },
  {
    "text": "development time and longtime support.",
    "start": 68.159,
    "duration": 5.121
  },
  {
    "text": "We started in 2020 using Unreal 4. A",
    "start": 70.32,
    "duration": 5.68
  },
  {
    "text": "year is later we moved to Unreal 5 and",
    "start": 73.28,
    "duration": 6.159
  },
  {
    "text": "in 2023 we released using Unreal 5.3. It",
    "start": 76.0,
    "duration": 5.52
  },
  {
    "text": "took about three years to make the game.",
    "start": 79.439,
    "duration": 4.641
  },
  {
    "text": "We uh continue support. We still do. And",
    "start": 81.52,
    "duration": 5.04
  },
  {
    "text": "in 2025, we did a major revamp of the",
    "start": 84.08,
    "duration": 5.44
  },
  {
    "text": "gameplay in the 2.0 patch. Uh we",
    "start": 86.56,
    "duration": 4.8
  },
  {
    "text": "released for all the major consoles. And",
    "start": 89.52,
    "duration": 4.08
  },
  {
    "text": "for PC and for performance, we kept in",
    "start": 91.36,
    "duration": 5.04
  },
  {
    "text": "mind what is a mid and low hardware PC",
    "start": 93.6,
    "duration": 5.92
  },
  {
    "text": "specs by the time by 2020 standards. As",
    "start": 96.4,
    "duration": 5.6
  },
  {
    "text": "a game context for an AI developer, it's",
    "start": 99.52,
    "duration": 6.08
  },
  {
    "text": "a fast-paced and reactive combat. um uh",
    "start": 102.0,
    "duration": 5.52
  },
  {
    "text": "very large wars filled with many",
    "start": 105.6,
    "duration": 3.76
  },
  {
    "text": "different environments and a vast",
    "start": 107.52,
    "duration": 4.16
  },
  {
    "text": "variety of enemies both in behavior and",
    "start": 109.36,
    "duration": 5.28
  },
  {
    "text": "sizes and that variety and sizes took us",
    "start": 111.68,
    "duration": 6.32
  },
  {
    "text": "to navigation. Um because CPU",
    "start": 114.64,
    "duration": 5.68
  },
  {
    "text": "limitations by the hardware we wanted to",
    "start": 118.0,
    "duration": 4.64
  },
  {
    "text": "target, we couldn't use runtime dynamic",
    "start": 120.32,
    "duration": 4.079
  },
  {
    "text": "generation. We had to use a form of",
    "start": 122.64,
    "duration": 4.4
  },
  {
    "text": "static dynamic with modifiers only. And",
    "start": 124.399,
    "duration": 4.801
  },
  {
    "text": "because memory limitations, we couldn't",
    "start": 127.04,
    "duration": 3.919
  },
  {
    "text": "have all the enough data loaded at all",
    "start": 129.2,
    "duration": 4.64
  },
  {
    "text": "times. So work comp um world partition",
    "start": 130.959,
    "duration": 4.401
  },
  {
    "text": "was not a thing when we started the",
    "start": 133.84,
    "duration": 3.44
  },
  {
    "text": "game. So we use the old system work",
    "start": 135.36,
    "duration": 4.32
  },
  {
    "text": "composition with sub levels where we",
    "start": 137.28,
    "duration": 4.64
  },
  {
    "text": "place or n bounce volumes we generate",
    "start": 139.68,
    "duration": 3.84
  },
  {
    "text": "enough data in the sub levels and we",
    "start": 141.92,
    "duration": 3.28
  },
  {
    "text": "stream in and out the enough data as we",
    "start": 143.52,
    "duration": 5.28
  },
  {
    "text": "go. Um our first issue was the we had",
    "start": 145.2,
    "duration": 5.84
  },
  {
    "text": "too many nav agents when in Unreal when",
    "start": 148.8,
    "duration": 4.32
  },
  {
    "text": "you want to generate enough data you",
    "start": 151.04,
    "duration": 3.839
  },
  {
    "text": "configure what is called enough agent a",
    "start": 153.12,
    "duration": 4.479
  },
  {
    "text": "set of configurations to define how your",
    "start": 154.879,
    "duration": 4.961
  },
  {
    "text": "nav data is generated. Among them you",
    "start": 157.599,
    "duration": 4.561
  },
  {
    "text": "have the naf agent radius. This is the",
    "start": 159.84,
    "duration": 4.72
  },
  {
    "text": "distance you set between your naf border",
    "start": 162.16,
    "duration": 4.719
  },
  {
    "text": "and your objects. Uh this guarantees two",
    "start": 164.56,
    "duration": 5.36
  },
  {
    "text": "things. One is if your enemy your AI has",
    "start": 166.879,
    "duration": 5.281
  },
  {
    "text": "the same capsule radius as the naf agent",
    "start": 169.92,
    "duration": 4.399
  },
  {
    "text": "radius it will never collapse collide",
    "start": 172.16,
    "duration": 4.24
  },
  {
    "text": "against the objects in the environment",
    "start": 174.319,
    "duration": 4.801
  },
  {
    "text": "and you will never get uh enough data in",
    "start": 176.4,
    "duration": 5.839
  },
  {
    "text": "places too narrow for any AI to fit in.",
    "start": 179.12,
    "duration": 5.199
  },
  {
    "text": "In a simple game where you only have",
    "start": 182.239,
    "duration": 4.481
  },
  {
    "text": "humans or the same size AIS, you just",
    "start": 184.319,
    "duration": 4.801
  },
  {
    "text": "need one NAF agent configuration. You",
    "start": 186.72,
    "duration": 4.159
  },
  {
    "text": "may have a bigger vehicle, a bigger",
    "start": 189.12,
    "duration": 3.28
  },
  {
    "text": "animal or something like that and you",
    "start": 190.879,
    "duration": 3.841
  },
  {
    "text": "might need another NAF data set and you",
    "start": 192.4,
    "duration": 4.16
  },
  {
    "text": "will have both of them and you will use",
    "start": 194.72,
    "duration": 3.84
  },
  {
    "text": "one or the other depending on your AI",
    "start": 196.56,
    "duration": 4.24
  },
  {
    "text": "size. But when you have a blank slate",
    "start": 198.56,
    "duration": 3.92
  },
  {
    "text": "for your designers and artists, this",
    "start": 200.8,
    "duration": 4.56
  },
  {
    "text": "happens. You get lots of AI archetypes",
    "start": 202.48,
    "duration": 5.52
  },
  {
    "text": "with many different capsule sizes. And",
    "start": 205.36,
    "duration": 4.799
  },
  {
    "text": "this is not manageable with AI agents",
    "start": 208.0,
    "duration": 4.159
  },
  {
    "text": "because you will generate a lot of",
    "start": 210.159,
    "duration": 4.241
  },
  {
    "text": "enough data everywhere in the world. If",
    "start": 212.159,
    "duration": 5.281
  },
  {
    "text": "you create a new enemy, you will need to",
    "start": 214.4,
    "duration": 6.08
  },
  {
    "text": "be sure you have enough AI agent that",
    "start": 217.44,
    "duration": 5.04
  },
  {
    "text": "matches that radius. If you move that",
    "start": 220.48,
    "duration": 3.759
  },
  {
    "text": "enemy to other part of the wall while",
    "start": 222.48,
    "duration": 4.16
  },
  {
    "text": "iterating, you will need to revisit the",
    "start": 224.239,
    "duration": 4.401
  },
  {
    "text": "enough volumes there. Make sure you",
    "start": 226.64,
    "duration": 4.08
  },
  {
    "text": "generate just enough enough data for it,",
    "start": 228.64,
    "duration": 3.519
  },
  {
    "text": "not more, not less because you will",
    "start": 230.72,
    "duration": 4.079
  },
  {
    "text": "waste memory. And it all sounded like a",
    "start": 232.159,
    "duration": 4.401
  },
  {
    "text": "tedious task from the beginning. So we",
    "start": 234.799,
    "duration": 4.0
  },
  {
    "text": "decided to go a different way. In an",
    "start": 236.56,
    "duration": 4.319
  },
  {
    "text": "ideal scenario, you will have this. You",
    "start": 238.799,
    "duration": 4.561
  },
  {
    "text": "will have just one mess, the green one.",
    "start": 240.879,
    "duration": 4.321
  },
  {
    "text": "And if you path with a small enemy, the",
    "start": 243.36,
    "duration": 3.36
  },
  {
    "text": "small enemy will automatically know,",
    "start": 245.2,
    "duration": 3.759
  },
  {
    "text": "hey, these corridors are wide enough for",
    "start": 246.72,
    "duration": 4.48
  },
  {
    "text": "me. I can pass through them. If you path",
    "start": 248.959,
    "duration": 4.241
  },
  {
    "text": "with a bigger enemy, it will know the",
    "start": 251.2,
    "duration": 3.92
  },
  {
    "text": "first two ones are too narrow, but they",
    "start": 253.2,
    "duration": 3.52
  },
  {
    "text": "can use the last one. So it will pass",
    "start": 255.12,
    "duration": 3.92
  },
  {
    "text": "through that. The way to have to do this",
    "start": 256.72,
    "duration": 4.479
  },
  {
    "text": "is to have that information in the nav",
    "start": 259.04,
    "duration": 4.56
  },
  {
    "text": "data itself. So when you generate enough",
    "start": 261.199,
    "duration": 4.56
  },
  {
    "text": "data, you get this. First you get your",
    "start": 263.6,
    "duration": 4.64
  },
  {
    "text": "nav data splitting tiles when you use a",
    "start": 265.759,
    "duration": 5.361
  },
  {
    "text": "static generation. The nav tiles you get",
    "start": 268.24,
    "duration": 4.48
  },
  {
    "text": "during cooking times are the ones you",
    "start": 271.12,
    "duration": 3.44
  },
  {
    "text": "will have. You don't add or remove tiles",
    "start": 272.72,
    "duration": 5.12
  },
  {
    "text": "in runtime. Uh if you enough tile is the",
    "start": 274.56,
    "duration": 5.12
  },
  {
    "text": "big yellow square there. If you zoom in",
    "start": 277.84,
    "duration": 3.919
  },
  {
    "text": "in enough tile you get the naf polygons.",
    "start": 279.68,
    "duration": 4.799
  },
  {
    "text": "This is your naf geometry. Uh this is",
    "start": 281.759,
    "duration": 4.481
  },
  {
    "text": "what is used by the path calculation to",
    "start": 284.479,
    "duration": 3.601
  },
  {
    "text": "calculate a path. And there is also a",
    "start": 286.24,
    "duration": 3.28
  },
  {
    "text": "piece another piece of information.",
    "start": 288.08,
    "duration": 3.44
  },
  {
    "text": "There is the naf edges. These are the",
    "start": 289.52,
    "duration": 4.959
  },
  {
    "text": "borders of your nav data. The distance",
    "start": 291.52,
    "duration": 5.52
  },
  {
    "text": "between the nafets and the object is",
    "start": 294.479,
    "duration": 5.28
  },
  {
    "text": "what you define with the naf and radius.",
    "start": 297.04,
    "duration": 5.36
  },
  {
    "text": "Nafedes are defined by the start and end",
    "start": 299.759,
    "duration": 5.281
  },
  {
    "text": "point. So this gives you a direction",
    "start": 302.4,
    "duration": 4.4
  },
  {
    "text": "that is good because if you do a cross",
    "start": 305.04,
    "duration": 3.76
  },
  {
    "text": "product with the app vector of the wall",
    "start": 306.8,
    "duration": 4.48
  },
  {
    "text": "you get the n normal. If you are on a",
    "start": 308.8,
    "duration": 4.56
  },
  {
    "text": "nmet and you follow this direction you",
    "start": 311.28,
    "duration": 3.919
  },
  {
    "text": "get to the one in front of it. So now",
    "start": 313.36,
    "duration": 4.16
  },
  {
    "text": "you have a way to measure corridors",
    "start": 315.199,
    "duration": 4.56
  },
  {
    "text": "because a corridor and narrow space is",
    "start": 317.52,
    "duration": 4.56
  },
  {
    "text": "always defined by two n edges. So what",
    "start": 319.759,
    "duration": 4.641
  },
  {
    "text": "we did is the following. We created",
    "start": 322.08,
    "duration": 5.6
  },
  {
    "text": "sizes for to categorize your AIS. Uh",
    "start": 324.4,
    "duration": 5.12
  },
  {
    "text": "this is like your clothes size, your",
    "start": 327.68,
    "duration": 3.68
  },
  {
    "text": "t-shirt size. Every enemy will fit in",
    "start": 329.52,
    "duration": 3.679
  },
  {
    "text": "one of these. We have very small, small,",
    "start": 331.36,
    "duration": 4.559
  },
  {
    "text": "medium, big, and very big. Very small is",
    "start": 333.199,
    "duration": 5.121
  },
  {
    "text": "what we use for our naf agent radius.",
    "start": 335.919,
    "duration": 4.241
  },
  {
    "text": "This guarantees that our smallest enemy",
    "start": 338.32,
    "duration": 3.439
  },
  {
    "text": "will be able to move anywhere in the",
    "start": 340.16,
    "duration": 3.44
  },
  {
    "text": "world and it will not get stuck against",
    "start": 341.759,
    "duration": 3.921
  },
  {
    "text": "the objects. And the issues with the",
    "start": 343.6,
    "duration": 5.439
  },
  {
    "text": "very big one um if this if a very big",
    "start": 345.68,
    "duration": 5.359
  },
  {
    "text": "enemy fits in the enough data it means",
    "start": 349.039,
    "duration": 4.88
  },
  {
    "text": "any other enemy can can path. So let's",
    "start": 351.039,
    "duration": 4.641
  },
  {
    "text": "figure out which places are not big",
    "start": 353.919,
    "duration": 3.601
  },
  {
    "text": "enough for the very big enemy. So what",
    "start": 355.68,
    "duration": 4.56
  },
  {
    "text": "we do is this. We grab the very big",
    "start": 357.52,
    "duration": 5.36
  },
  {
    "text": "enemy radius. We'll multiply by two. So",
    "start": 360.24,
    "duration": 4.72
  },
  {
    "text": "we get the entire capsule and then we",
    "start": 362.88,
    "duration": 4.24
  },
  {
    "text": "know that on each side of a narrow space",
    "start": 364.96,
    "duration": 4.4
  },
  {
    "text": "we will get the nagian radius margin. So",
    "start": 367.12,
    "duration": 3.68
  },
  {
    "text": "we don't need to account for that. We",
    "start": 369.36,
    "duration": 3.44
  },
  {
    "text": "can subtract it. And what you have left",
    "start": 370.8,
    "duration": 3.92
  },
  {
    "text": "is the distance you will need to have in",
    "start": 372.8,
    "duration": 4.64
  },
  {
    "text": "between two n edges to fit the biggest",
    "start": 374.72,
    "duration": 5.039
  },
  {
    "text": "enemy. So with this distance during the",
    "start": 377.44,
    "duration": 4.08
  },
  {
    "text": "cooking process we do enough traces",
    "start": 379.759,
    "duration": 5.44
  },
  {
    "text": "every 25 cm for every naf ed in a tile.",
    "start": 381.52,
    "duration": 5.92
  },
  {
    "text": "And if there are no hits it means the",
    "start": 385.199,
    "duration": 4.241
  },
  {
    "text": "biggest enemy fits. We don't need to do",
    "start": 387.44,
    "duration": 4.16
  },
  {
    "text": "anything. Any enemy will pass through uh",
    "start": 389.44,
    "duration": 4.479
  },
  {
    "text": "without problems. But other n traces",
    "start": 391.6,
    "duration": 5.28
  },
  {
    "text": "will have hits like in this case. And uh",
    "start": 393.919,
    "duration": 4.641
  },
  {
    "text": "we know the very small enemy fits. We",
    "start": 396.88,
    "duration": 3.36
  },
  {
    "text": "know the very big enemy cannot. Let's",
    "start": 398.56,
    "duration": 3.12
  },
  {
    "text": "figure out which ones can fit in",
    "start": 400.24,
    "duration": 3.28
  },
  {
    "text": "between. What we do is we get the heat",
    "start": 401.68,
    "duration": 4.239
  },
  {
    "text": "trace distance and we match it to one of",
    "start": 403.52,
    "duration": 5.2
  },
  {
    "text": "the sizes in this case the small size.",
    "start": 405.919,
    "duration": 5.28
  },
  {
    "text": "Uh this is a ideal scenario. There is",
    "start": 408.72,
    "duration": 4.96
  },
  {
    "text": "two nav edges and they are parallel and",
    "start": 411.199,
    "duration": 4.481
  },
  {
    "text": "there is only one n polygon in between.",
    "start": 413.68,
    "duration": 3.6
  },
  {
    "text": "But in real scenarios you will get",
    "start": 415.68,
    "duration": 3.68
  },
  {
    "text": "something more like this. Sometimes you",
    "start": 417.28,
    "duration": 4.319
  },
  {
    "text": "get like a funnel with a wider entrance",
    "start": 419.36,
    "duration": 6.48
  },
  {
    "text": "and a narrower exit and various polygons",
    "start": 421.599,
    "duration": 7.04
  },
  {
    "text": "and each nav trace will uh each polygon",
    "start": 425.84,
    "duration": 5.6
  },
  {
    "text": "will be hit by several n traces. So it's",
    "start": 428.639,
    "duration": 4.481
  },
  {
    "text": "important you get the shortest distance",
    "start": 431.44,
    "duration": 3.599
  },
  {
    "text": "hit by a polygon. In this case the",
    "start": 433.12,
    "duration": 4.0
  },
  {
    "text": "yellow squares indicate that otherwise",
    "start": 435.039,
    "duration": 4.16
  },
  {
    "text": "you will mislabel the polygon and your",
    "start": 437.12,
    "duration": 4.96
  },
  {
    "text": "will get stuck. So once you get this you",
    "start": 439.199,
    "duration": 4.641
  },
  {
    "text": "need to put this information in the n",
    "start": 442.08,
    "duration": 4.8
  },
  {
    "text": "data and the way unreal has to do this",
    "start": 443.84,
    "duration": 7.359
  },
  {
    "text": "is by the uh polygon naflex unreal only",
    "start": 446.88,
    "duration": 6.64
  },
  {
    "text": "uses two values zero if there is not",
    "start": 451.199,
    "duration": 4.0
  },
  {
    "text": "enough data so you will see a hole in",
    "start": 453.52,
    "duration": 4.239
  },
  {
    "text": "your ness or one if there is enough data",
    "start": 455.199,
    "duration": 5.12
  },
  {
    "text": "and that's cool because if your nap flag",
    "start": 457.759,
    "duration": 4.801
  },
  {
    "text": "is one or bigger it means there is",
    "start": 460.319,
    "duration": 4.16
  },
  {
    "text": "enough data and it's up to you what that",
    "start": 462.56,
    "duration": 4.479
  },
  {
    "text": "number means. So we created enough flags",
    "start": 464.479,
    "duration": 5.041
  },
  {
    "text": "for its size. uh what we do is we match",
    "start": 467.039,
    "duration": 4.241
  },
  {
    "text": "the size of the corridor with the flag",
    "start": 469.52,
    "duration": 3.679
  },
  {
    "text": "and we know we can use this flag the",
    "start": 471.28,
    "duration": 4.96
  },
  {
    "text": "small capsule small capsule flag. Now we",
    "start": 473.199,
    "duration": 5.12
  },
  {
    "text": "need to figure out which nav polygon to",
    "start": 476.24,
    "duration": 4.959
  },
  {
    "text": "to flag and what we do is once we know",
    "start": 478.319,
    "duration": 4.801
  },
  {
    "text": "the nav trace that has the shortest hit",
    "start": 481.199,
    "duration": 4.0
  },
  {
    "text": "distance we graph the polygon closest to",
    "start": 483.12,
    "duration": 4.32
  },
  {
    "text": "the nav trace start and since you're",
    "start": 485.199,
    "duration": 4.161
  },
  {
    "text": "going to trace from both sides of the",
    "start": 487.44,
    "duration": 3.68
  },
  {
    "text": "corridor you will cover all the polygons",
    "start": 489.36,
    "duration": 4.399
  },
  {
    "text": "in a corridor once you get that you can",
    "start": 491.12,
    "duration": 5.04
  },
  {
    "text": "grab the nav node poly ref. This is a",
    "start": 493.759,
    "duration": 4.481
  },
  {
    "text": "unique identifier for your nav polygon.",
    "start": 496.16,
    "duration": 4.319
  },
  {
    "text": "If you use this against your nav data,",
    "start": 498.24,
    "duration": 3.6
  },
  {
    "text": "you will get the polygons with the",
    "start": 500.479,
    "duration": 4.56
  },
  {
    "text": "vertices and all that. Um, okay, we have",
    "start": 501.84,
    "duration": 4.479
  },
  {
    "text": "everything. We have the flag and the",
    "start": 505.039,
    "duration": 3.201
  },
  {
    "text": "polygon. We have a special object to",
    "start": 506.319,
    "duration": 3.6
  },
  {
    "text": "grab this information and we put that",
    "start": 508.24,
    "duration": 4.239
  },
  {
    "text": "inside. The way the system works is that",
    "start": 509.919,
    "duration": 4.0
  },
  {
    "text": "when we generate enough during the",
    "start": 512.479,
    "duration": 3.521
  },
  {
    "text": "cooking process, then we start analyzing",
    "start": 513.919,
    "duration": 4.081
  },
  {
    "text": "its tile in parallel. We do this multi",
    "start": 516.0,
    "duration": 4.479
  },
  {
    "text": "thread with an asynchronous task running",
    "start": 518.0,
    "duration": 4.56
  },
  {
    "text": "in the background thread. When a tile",
    "start": 520.479,
    "duration": 4.561
  },
  {
    "text": "finishes analyzing, it will return a",
    "start": 522.56,
    "duration": 4.48
  },
  {
    "text": "collection of polygons and flags to use",
    "start": 525.04,
    "duration": 4.56
  },
  {
    "text": "in all the narrow spaces inside. What we",
    "start": 527.04,
    "duration": 5.12
  },
  {
    "text": "do is when all the tiles finish, uh, we",
    "start": 529.6,
    "duration": 4.56
  },
  {
    "text": "merge that information in a sing in a in",
    "start": 532.16,
    "duration": 4.48
  },
  {
    "text": "one collection and we loop that. Then",
    "start": 534.16,
    "duration": 4.88
  },
  {
    "text": "using the navn poly ref, we can find the",
    "start": 536.64,
    "duration": 4.4
  },
  {
    "text": "polygon in the nav data and replace the",
    "start": 539.04,
    "duration": 4.239
  },
  {
    "text": "flag with what we just found. When the",
    "start": 541.04,
    "duration": 4.239
  },
  {
    "text": "process finishes and the nav generation",
    "start": 543.279,
    "duration": 4.081
  },
  {
    "text": "finishes, this is what we get. we get",
    "start": 545.279,
    "duration": 4.721
  },
  {
    "text": "all our nav uh narrow spaces label in",
    "start": 547.36,
    "duration": 5.44
  },
  {
    "text": "the nav data and now we can read that",
    "start": 550.0,
    "duration": 5.92
  },
  {
    "text": "information. So how do we read that is",
    "start": 552.8,
    "duration": 4.719
  },
  {
    "text": "very simple. There is something called",
    "start": 555.92,
    "duration": 3.52
  },
  {
    "text": "uh navigation filters in Unreal. This is",
    "start": 557.519,
    "duration": 4.161
  },
  {
    "text": "a piece of logic that will run during",
    "start": 559.44,
    "duration": 4.32
  },
  {
    "text": "your path calculation and you can",
    "start": 561.68,
    "duration": 4.08
  },
  {
    "text": "manipulate the path saying hey favor",
    "start": 563.76,
    "duration": 4.48
  },
  {
    "text": "these polygons these flags or uh exclude",
    "start": 565.76,
    "duration": 5.28
  },
  {
    "text": "these other flags. So what we do is we",
    "start": 568.24,
    "duration": 5.44
  },
  {
    "text": "graph the capsule size of the capsule",
    "start": 571.04,
    "duration": 4.239
  },
  {
    "text": "radius of the query or the enemy",
    "start": 573.68,
    "duration": 4.88
  },
  {
    "text": "calculating the path and we tell it hey",
    "start": 575.279,
    "duration": 5.041
  },
  {
    "text": "uh let's find the flag that will match",
    "start": 578.56,
    "duration": 3.6
  },
  {
    "text": "your size. Let's say we have a big enemy",
    "start": 580.32,
    "duration": 3.84
  },
  {
    "text": "so the big flag and let's exclude",
    "start": 582.16,
    "duration": 3.6
  },
  {
    "text": "anything smaller than that because you",
    "start": 584.16,
    "duration": 3.359
  },
  {
    "text": "will not fit. So we exclude for the big",
    "start": 585.76,
    "duration": 3.84
  },
  {
    "text": "enemy medium small and very small are",
    "start": 587.519,
    "duration": 4.721
  },
  {
    "text": "excluded. Uh then we make sure we pass",
    "start": 589.6,
    "duration": 4.72
  },
  {
    "text": "this navigation filter to our movement",
    "start": 592.24,
    "duration": 4.32
  },
  {
    "text": "request. For us is this is the default",
    "start": 594.32,
    "duration": 4.639
  },
  {
    "text": "filter we use for all our enemies. But",
    "start": 596.56,
    "duration": 4.48
  },
  {
    "text": "we have other filters custom made that",
    "start": 598.959,
    "duration": 3.681
  },
  {
    "text": "inherit from this one. I will give an",
    "start": 601.04,
    "duration": 3.68
  },
  {
    "text": "example of this later. So you pass the",
    "start": 602.64,
    "duration": 3.759
  },
  {
    "text": "filter to your move request. And this is",
    "start": 604.72,
    "duration": 4.08
  },
  {
    "text": "what you get when you when you path from",
    "start": 606.399,
    "duration": 4.321
  },
  {
    "text": "the small enemy it will automatically",
    "start": 608.8,
    "duration": 3.52
  },
  {
    "text": "know okay yeah I can use the small",
    "start": 610.72,
    "duration": 3.44
  },
  {
    "text": "corridors. from a small enemy. All good.",
    "start": 612.32,
    "duration": 3.199
  },
  {
    "text": "But the bigger enemy is actually a",
    "start": 614.16,
    "duration": 4.08
  },
  {
    "text": "medium enemy and it will exclude it. It",
    "start": 615.519,
    "duration": 4.641
  },
  {
    "text": "path calculation will exclude all the",
    "start": 618.24,
    "duration": 4.24
  },
  {
    "text": "smallest sizes and will only pass",
    "start": 620.16,
    "duration": 4.32
  },
  {
    "text": "through the medium capsule. So now we",
    "start": 622.48,
    "duration": 3.84
  },
  {
    "text": "have data. We have a way to read it and",
    "start": 624.48,
    "duration": 3.68
  },
  {
    "text": "we have paths going through places that",
    "start": 626.32,
    "duration": 3.519
  },
  {
    "text": "will work. But we still have another",
    "start": 628.16,
    "duration": 5.28
  },
  {
    "text": "problem. The uh capsule agent radius",
    "start": 629.839,
    "duration": 5.68
  },
  {
    "text": "because as I mentioned the agent radius",
    "start": 633.44,
    "duration": 4.56
  },
  {
    "text": "guarantees that an enemy with the same",
    "start": 635.519,
    "duration": 5.44
  },
  {
    "text": "capsule radius will not get stuck",
    "start": 638.0,
    "duration": 4.959
  },
  {
    "text": "against the environment. But we are",
    "start": 640.959,
    "duration": 4.241
  },
  {
    "text": "using enemies much bigger than the agent",
    "start": 642.959,
    "duration": 4.0
  },
  {
    "text": "radius. We're using the very small size",
    "start": 645.2,
    "duration": 3.44
  },
  {
    "text": "for the agent radius. And we are going",
    "start": 646.959,
    "duration": 4.161
  },
  {
    "text": "to use very big enemies. And we need to",
    "start": 648.64,
    "duration": 4.319
  },
  {
    "text": "figure how to fix that. When you",
    "start": 651.12,
    "duration": 3.52
  },
  {
    "text": "calculate the path, this happens in",
    "start": 652.959,
    "duration": 4.32
  },
  {
    "text": "Unreal. You get the path. And there is a",
    "start": 654.64,
    "duration": 4.96
  },
  {
    "text": "a piece of logic called a stream pooling",
    "start": 657.279,
    "duration": 3.841
  },
  {
    "text": "that will guarantee your path is the",
    "start": 659.6,
    "duration": 3.919
  },
  {
    "text": "shortest possible. To do that, Unreal",
    "start": 661.12,
    "duration": 4.8
  },
  {
    "text": "runs the simple stop funnel algorithm",
    "start": 663.519,
    "duration": 4.481
  },
  {
    "text": "which uh what it does is adjust the path",
    "start": 665.92,
    "duration": 4.159
  },
  {
    "text": "to the corners and removes any extra",
    "start": 668.0,
    "duration": 3.76
  },
  {
    "text": "points. And this works very well if your",
    "start": 670.079,
    "duration": 4.401
  },
  {
    "text": "nap agent radius matches your AI, but it",
    "start": 671.76,
    "duration": 5.36
  },
  {
    "text": "doesn't for us. And real offers a way to",
    "start": 674.48,
    "duration": 4.56
  },
  {
    "text": "do to move the path away from corners.",
    "start": 677.12,
    "duration": 4.0
  },
  {
    "text": "It's called offset from corners. This is",
    "start": 679.04,
    "duration": 3.68
  },
  {
    "text": "a function you call on your path. You",
    "start": 681.12,
    "duration": 4.08
  },
  {
    "text": "pass a distance and then the path will",
    "start": 682.72,
    "duration": 4.64
  },
  {
    "text": "be displaced. It will be offset from the",
    "start": 685.2,
    "duration": 5.12
  },
  {
    "text": "corners. But this causes issues. You can",
    "start": 687.36,
    "duration": 4.4
  },
  {
    "text": "corner suddenly the corner has two",
    "start": 690.32,
    "duration": 3.44
  },
  {
    "text": "angles instead of one because it's",
    "start": 691.76,
    "duration": 4.319
  },
  {
    "text": "splitting the the point. Other cases",
    "start": 693.76,
    "duration": 4.319
  },
  {
    "text": "like this one has a weird zigzag and",
    "start": 696.079,
    "duration": 3.521
  },
  {
    "text": "your A is going to look weird while",
    "start": 698.079,
    "duration": 3.841
  },
  {
    "text": "working there and in worst cases your",
    "start": 699.6,
    "duration": 4.239
  },
  {
    "text": "path is out of the nav because this is",
    "start": 701.92,
    "duration": 3.84
  },
  {
    "text": "displacing the start and end points of a",
    "start": 703.839,
    "duration": 4.401
  },
  {
    "text": "path segment and it doesn't take into",
    "start": 705.76,
    "duration": 4.56
  },
  {
    "text": "consideration what happens in between.",
    "start": 708.24,
    "duration": 3.839
  },
  {
    "text": "We created a different way to do this. I",
    "start": 710.32,
    "duration": 4.48
  },
  {
    "text": "present you the good enough path offset.",
    "start": 712.079,
    "duration": 4.961
  },
  {
    "text": "Uh good because it moves the corners",
    "start": 714.8,
    "duration": 4.64
  },
  {
    "text": "away. No more corner hugging. Uh good",
    "start": 717.04,
    "duration": 4.08
  },
  {
    "text": "because corners make sense. It's only",
    "start": 719.44,
    "duration": 3.76
  },
  {
    "text": "one angle as you just bet. good because",
    "start": 721.12,
    "duration": 4.159
  },
  {
    "text": "our path is within enough data and",
    "start": 723.2,
    "duration": 3.84
  },
  {
    "text": "enough because it's the most expensive",
    "start": 725.279,
    "duration": 4.24
  },
  {
    "text": "algorithm of the three to run. But we",
    "start": 727.04,
    "duration": 4.72
  },
  {
    "text": "have fixes for that. Let's see how it",
    "start": 729.519,
    "duration": 4.32
  },
  {
    "text": "works. When you calculate a path, you",
    "start": 731.76,
    "duration": 3.6
  },
  {
    "text": "don't only get the path, you can also",
    "start": 733.839,
    "duration": 3.041
  },
  {
    "text": "get the nav corridor. This is a",
    "start": 735.36,
    "duration": 3.36
  },
  {
    "text": "compilation of enough polygons your path",
    "start": 736.88,
    "duration": 3.6
  },
  {
    "text": "is going to cross. Within the nav",
    "start": 738.72,
    "duration": 4.08
  },
  {
    "text": "corridor, you get the nav portal edges.",
    "start": 740.48,
    "duration": 4.159
  },
  {
    "text": "These are lines that connect one polygon",
    "start": 742.8,
    "duration": 4.08
  },
  {
    "text": "to the next one. These are the lines the",
    "start": 744.639,
    "duration": 5.041
  },
  {
    "text": "naf offset algorithm form the unreal",
    "start": 746.88,
    "duration": 5.6
  },
  {
    "text": "uses to displace the the path and that's",
    "start": 749.68,
    "duration": 4.64
  },
  {
    "text": "why you see a split points because",
    "start": 752.48,
    "duration": 3.599
  },
  {
    "text": "sometimes you get two naf edges per",
    "start": 754.32,
    "duration": 4.56
  },
  {
    "text": "point n edges are defined by the right",
    "start": 756.079,
    "duration": 5.601
  },
  {
    "text": "and left point and in every path when",
    "start": 758.88,
    "duration": 4.48
  },
  {
    "text": "you calculate a path with the exception",
    "start": 761.68,
    "duration": 3.92
  },
  {
    "text": "of the start and the end of points every",
    "start": 763.36,
    "duration": 3.599
  },
  {
    "text": "other point is going to be in one of",
    "start": 765.6,
    "duration": 3.84
  },
  {
    "text": "these points right right or left this",
    "start": 766.959,
    "duration": 5.361
  },
  {
    "text": "looks uh like mirror like right and left",
    "start": 769.44,
    "duration": 5.36
  },
  {
    "text": "are uh mirror but this is actually",
    "start": 772.32,
    "duration": 4.319
  },
  {
    "text": "Right? Because what happens is the nav",
    "start": 774.8,
    "duration": 3.599
  },
  {
    "text": "corridor is calculated from the end of",
    "start": 776.639,
    "duration": 3.921
  },
  {
    "text": "the path to the start. So if you go from",
    "start": 778.399,
    "duration": 4.0
  },
  {
    "text": "end to start, left and right makes sense",
    "start": 780.56,
    "duration": 4.56
  },
  {
    "text": "but that's not important really. Uh the",
    "start": 782.399,
    "duration": 4.481
  },
  {
    "text": "algorithm start with the most expensive",
    "start": 785.12,
    "duration": 4.719
  },
  {
    "text": "part. Uh we do an trace from the very",
    "start": 786.88,
    "duration": 4.8
  },
  {
    "text": "beginning of the path to the next point.",
    "start": 789.839,
    "duration": 3.68
  },
  {
    "text": "If there is no heat that's good we can",
    "start": 791.68,
    "duration": 4.159
  },
  {
    "text": "see the point nothing to do. We do then",
    "start": 793.519,
    "duration": 4.481
  },
  {
    "text": "an trace to the next point and there",
    "start": 795.839,
    "duration": 3.761
  },
  {
    "text": "will be a hit because the trace is going",
    "start": 798.0,
    "duration": 3.36
  },
  {
    "text": "out of nav and that means there is a",
    "start": 799.6,
    "duration": 4.56
  },
  {
    "text": "corner or an angle you need to offset.",
    "start": 801.36,
    "duration": 4.56
  },
  {
    "text": "We are done with the spensive part now.",
    "start": 804.16,
    "duration": 3.919
  },
  {
    "text": "Uh so what we do is we craft the nap",
    "start": 805.92,
    "duration": 5.2
  },
  {
    "text": "path segments that confirm that corner",
    "start": 808.079,
    "duration": 5.281
  },
  {
    "text": "and we trace equidistant uh parallel",
    "start": 811.12,
    "duration": 4.959
  },
  {
    "text": "lines perpendicular lines to it. Uh this",
    "start": 813.36,
    "duration": 4.4
  },
  {
    "text": "is what I mean. There are two",
    "start": 816.079,
    "duration": 3.601
  },
  {
    "text": "perpendicular lines that are from the at",
    "start": 817.76,
    "duration": 3.68
  },
  {
    "text": "the same distance from the point you",
    "start": 819.68,
    "duration": 4.08
  },
  {
    "text": "want to offset. A perpendicular is very",
    "start": 821.44,
    "duration": 4.16
  },
  {
    "text": "cheap operation. You negate the y. You",
    "start": 823.76,
    "duration": 3.6
  },
  {
    "text": "flip x and y and there goes your",
    "start": 825.6,
    "duration": 4.239
  },
  {
    "text": "perpendicular. Then you connect the end",
    "start": 827.36,
    "duration": 4.159
  },
  {
    "text": "points of these perpendicular lines and",
    "start": 829.839,
    "duration": 3.601
  },
  {
    "text": "you form a triangle. This is a triangle",
    "start": 831.519,
    "duration": 4.641
  },
  {
    "text": "base. Your offset direction candidate",
    "start": 833.44,
    "duration": 4.16
  },
  {
    "text": "will be the line that connects the",
    "start": 836.16,
    "duration": 3.679
  },
  {
    "text": "center of the triangle base to the point",
    "start": 837.6,
    "duration": 4.32
  },
  {
    "text": "you want to move. Something like this.",
    "start": 839.839,
    "duration": 3.921
  },
  {
    "text": "There is an exception for this. You may",
    "start": 841.92,
    "duration": 3.599
  },
  {
    "text": "get an equilateral triangle where all",
    "start": 843.76,
    "duration": 4.24
  },
  {
    "text": "the sides are the same size. And when",
    "start": 845.519,
    "duration": 4.241
  },
  {
    "text": "that happens, the center of the base",
    "start": 848.0,
    "duration": 3.36
  },
  {
    "text": "will be the exact same location as the",
    "start": 849.76,
    "duration": 3.04
  },
  {
    "text": "point you want to move. So there will be",
    "start": 851.36,
    "duration": 3.44
  },
  {
    "text": "no line connecting. You need to",
    "start": 852.8,
    "duration": 3.92
  },
  {
    "text": "calculate in those cases the triangle",
    "start": 854.8,
    "duration": 4.159
  },
  {
    "text": "height and that direction will be the",
    "start": 856.72,
    "duration": 4.479
  },
  {
    "text": "same one as the blue one. And you can",
    "start": 858.959,
    "duration": 3.921
  },
  {
    "text": "see the blue one is pointing outside the",
    "start": 861.199,
    "duration": 3.2
  },
  {
    "text": "nav. If we move the point that away,",
    "start": 862.88,
    "duration": 2.959
  },
  {
    "text": "it's going to break everything. So there",
    "start": 864.399,
    "duration": 3.041
  },
  {
    "text": "is an extra step to make sure that",
    "start": 865.839,
    "duration": 3.68
  },
  {
    "text": "points the right way. You grab the nav",
    "start": 867.44,
    "duration": 4.16
  },
  {
    "text": "portal edge at that point. And if you're",
    "start": 869.519,
    "duration": 4.0
  },
  {
    "text": "on the right side, you get the direction",
    "start": 871.6,
    "duration": 3.44
  },
  {
    "text": "right to left. If you're on the left,",
    "start": 873.519,
    "duration": 3.601
  },
  {
    "text": "you get the other one. You do a dot",
    "start": 875.04,
    "duration": 3.919
  },
  {
    "text": "product against this line between your",
    "start": 877.12,
    "duration": 4.56
  },
  {
    "text": "offset candidate and the line. And if",
    "start": 878.959,
    "duration": 4.56
  },
  {
    "text": "the dot product is smaller than zero,",
    "start": 881.68,
    "duration": 3.12
  },
  {
    "text": "you're pointing the wrong way. You need",
    "start": 883.519,
    "duration": 3.521
  },
  {
    "text": "to flip that direction. The purple",
    "start": 884.8,
    "duration": 4.159
  },
  {
    "text": "direction is a perfect candidate to",
    "start": 887.04,
    "duration": 4.159
  },
  {
    "text": "displace the point. Now all we need to",
    "start": 888.959,
    "duration": 4.161
  },
  {
    "text": "do is scale it to fit the capsule. You",
    "start": 891.199,
    "duration": 3.601
  },
  {
    "text": "take into consideration the agent",
    "start": 893.12,
    "duration": 3.6
  },
  {
    "text": "radius, the margin to the object and the",
    "start": 894.8,
    "duration": 4.159
  },
  {
    "text": "capsule radius and you get your new",
    "start": 896.72,
    "duration": 4.16
  },
  {
    "text": "point in your path. What you just saw is",
    "start": 898.959,
    "duration": 3.921
  },
  {
    "text": "the first point in this example, the",
    "start": 900.88,
    "duration": 5.199
  },
  {
    "text": "first corner. Um you can see this can",
    "start": 902.88,
    "duration": 4.72
  },
  {
    "text": "get expensive if you have very long",
    "start": 906.079,
    "duration": 3.361
  },
  {
    "text": "paths because you are doing up to two",
    "start": 907.6,
    "duration": 3.76
  },
  {
    "text": "traces per point. But let's see how we",
    "start": 909.44,
    "duration": 4.32
  },
  {
    "text": "handle performance in your game. First",
    "start": 911.36,
    "duration": 4.08
  },
  {
    "text": "of all, this is multi thread and real",
    "start": 913.76,
    "duration": 3.68
  },
  {
    "text": "supports navigation operations in multi",
    "start": 915.44,
    "duration": 3.36
  },
  {
    "text": "thread. So what we do is we calculate",
    "start": 917.44,
    "duration": 3.04
  },
  {
    "text": "the path and then we send all the",
    "start": 918.8,
    "duration": 3.2
  },
  {
    "text": "information to a separate thread in an",
    "start": 920.48,
    "duration": 3.12
  },
  {
    "text": "asynchronous task that runs in a",
    "start": 922.0,
    "duration": 3.76
  },
  {
    "text": "background job and then we wait for the",
    "start": 923.6,
    "duration": 3.679
  },
  {
    "text": "result to come back. This usually takes",
    "start": 925.76,
    "duration": 4.4
  },
  {
    "text": "us between 0.2 and 0.5 seconds. We are",
    "start": 927.279,
    "duration": 4.321
  },
  {
    "text": "fine waiting that time. We don't need",
    "start": 930.16,
    "duration": 4.08
  },
  {
    "text": "immediate movement usually in our game.",
    "start": 931.6,
    "duration": 5.28
  },
  {
    "text": "We also control we have a frame budget",
    "start": 934.24,
    "duration": 3.92
  },
  {
    "text": "even though we are not in the game",
    "start": 936.88,
    "duration": 2.88
  },
  {
    "text": "thread. We want to control how many",
    "start": 938.16,
    "duration": 4.239
  },
  {
    "text": "frames is taking and we lock when it's",
    "start": 939.76,
    "duration": 4.56
  },
  {
    "text": "taking too long because thanks to that",
    "start": 942.399,
    "duration": 4.161
  },
  {
    "text": "we discover that we had issues. We have",
    "start": 944.32,
    "duration": 4.24
  },
  {
    "text": "bugs with nav generation where the nav",
    "start": 946.56,
    "duration": 3.92
  },
  {
    "text": "was too complicated and the path were",
    "start": 948.56,
    "duration": 4.399
  },
  {
    "text": "doing weird stuff. And we had bugs with",
    "start": 950.48,
    "duration": 4.479
  },
  {
    "text": "gameplay where sometimes calculations",
    "start": 952.959,
    "duration": 4.32
  },
  {
    "text": "will fail and some will try to go to the",
    "start": 954.959,
    "duration": 4.961
  },
  {
    "text": "world origin to the 0000 location",
    "start": 957.279,
    "duration": 5.201
  },
  {
    "text": "calculating an enormously long path. So",
    "start": 959.92,
    "duration": 4.719
  },
  {
    "text": "we fix those bugs thanks to logging this",
    "start": 962.48,
    "duration": 5.2
  },
  {
    "text": "cases. We skip paths that are just",
    "start": 964.639,
    "duration": 5.12
  },
  {
    "text": "straight lines. And lucky for us, those",
    "start": 967.68,
    "duration": 4.24
  },
  {
    "text": "are most of our paths because when an",
    "start": 969.759,
    "duration": 4.241
  },
  {
    "text": "enemy is in combat with the player and",
    "start": 971.92,
    "duration": 3.839
  },
  {
    "text": "it calculates a path to approach the",
    "start": 974.0,
    "duration": 3.92
  },
  {
    "text": "player or move away or move to a side,",
    "start": 975.759,
    "duration": 4.241
  },
  {
    "text": "it's just a straight line and you don't",
    "start": 977.92,
    "duration": 3.44
  },
  {
    "text": "need to displace anything in those",
    "start": 980.0,
    "duration": 3.44
  },
  {
    "text": "cases. Those are going to work. So we",
    "start": 981.36,
    "duration": 3.839
  },
  {
    "text": "skip all those and we're skipping a good",
    "start": 983.44,
    "duration": 3.6
  },
  {
    "text": "chunk of the path calculations in the",
    "start": 985.199,
    "duration": 3.601
  },
  {
    "text": "game. And then on top of that, we use",
    "start": 987.04,
    "duration": 3.76
  },
  {
    "text": "the significance manager to limit how",
    "start": 988.8,
    "duration": 3.76
  },
  {
    "text": "many active enemies we have in the game.",
    "start": 990.8,
    "duration": 4.399
  },
  {
    "text": "We we allow up to 20 enemies. Within",
    "start": 992.56,
    "duration": 4.719
  },
  {
    "text": "that we have level of detail and pick",
    "start": 995.199,
    "duration": 3.921
  },
  {
    "text": "aggregation to enable and disable",
    "start": 997.279,
    "duration": 4.641
  },
  {
    "text": "things. And it's very rare out out of",
    "start": 999.12,
    "duration": 4.32
  },
  {
    "text": "the 20 enemies all of them are",
    "start": 1001.92,
    "duration": 3.039
  },
  {
    "text": "calculating paths and even if they do",
    "start": 1003.44,
    "duration": 3.839
  },
  {
    "text": "that is multi- thread and most of them",
    "start": 1004.959,
    "duration": 3.841
  },
  {
    "text": "are going to be combat paths that are",
    "start": 1007.279,
    "duration": 2.961
  },
  {
    "text": "very simple that don't need to be",
    "start": 1008.8,
    "duration": 3.839
  },
  {
    "text": "offset. So we keep at bay performance",
    "start": 1010.24,
    "duration": 4.64
  },
  {
    "text": "and we rarely see it in insights and",
    "start": 1012.639,
    "duration": 5.2
  },
  {
    "text": "when we do is usually because bugs.",
    "start": 1014.88,
    "duration": 4.399
  },
  {
    "text": "Okay. When you have the information the",
    "start": 1017.839,
    "duration": 3.841
  },
  {
    "text": "enough data when you can read it and you",
    "start": 1019.279,
    "duration": 4.081
  },
  {
    "text": "can collect paths this happens. There is",
    "start": 1021.68,
    "duration": 3.759
  },
  {
    "text": "a big enemy, the medium enemy that is",
    "start": 1023.36,
    "duration": 3.28
  },
  {
    "text": "going to chase the player through the",
    "start": 1025.439,
    "duration": 2.801
  },
  {
    "text": "only corridor he can use. And the small",
    "start": 1026.64,
    "duration": 3.039
  },
  {
    "text": "enemy is going to use whatever is",
    "start": 1028.24,
    "duration": 4.0
  },
  {
    "text": "closest because he can use whatever he",
    "start": 1029.679,
    "duration": 4.4
  },
  {
    "text": "wants to do. And this works very well.",
    "start": 1032.24,
    "duration": 3.599
  },
  {
    "text": "From this moment on, we don't care what",
    "start": 1034.079,
    "duration": 3.6
  },
  {
    "text": "the designers artist do. They can just",
    "start": 1035.839,
    "duration": 3.84
  },
  {
    "text": "do any size enemy that fits in our",
    "start": 1037.679,
    "duration": 4.481
  },
  {
    "text": "sizes, drop it in any level, change",
    "start": 1039.679,
    "duration": 4.16
  },
  {
    "text": "levels. We don't have to revisit parts",
    "start": 1042.16,
    "duration": 3.2
  },
  {
    "text": "of the wall. We don't have to change",
    "start": 1043.839,
    "duration": 3.2
  },
  {
    "text": "enough volumes. We don't have to worry",
    "start": 1045.36,
    "duration": 3.6
  },
  {
    "text": "about anything. This just works. So it's",
    "start": 1047.039,
    "duration": 4.321
  },
  {
    "text": "a scalable to not only this game but",
    "start": 1048.96,
    "duration": 5.2
  },
  {
    "text": "other games or other demos we want we",
    "start": 1051.36,
    "duration": 6.0
  },
  {
    "text": "might want to do. Okay, we have to we we",
    "start": 1054.16,
    "duration": 5.44
  },
  {
    "text": "move. Let's see how we decide when to",
    "start": 1057.36,
    "duration": 4.96
  },
  {
    "text": "move. Decision making um we use the game",
    "start": 1059.6,
    "duration": 4.319
  },
  {
    "text": "playability system for absolutely",
    "start": 1062.32,
    "duration": 3.04
  },
  {
    "text": "everything in your game and that",
    "start": 1063.919,
    "duration": 4.161
  },
  {
    "text": "includes uh AI too. When the behavior",
    "start": 1065.36,
    "duration": 4.64
  },
  {
    "text": "tree runs and chooses to run a behavior",
    "start": 1068.08,
    "duration": 4.16
  },
  {
    "text": "tree task, the actual action of the task",
    "start": 1070.0,
    "duration": 4.4
  },
  {
    "text": "happens in a gameplay ability. Let's use",
    "start": 1072.24,
    "duration": 4.4
  },
  {
    "text": "an example. We have the approach target",
    "start": 1074.4,
    "duration": 4.08
  },
  {
    "text": "uh at behavior three task. This is the",
    "start": 1076.64,
    "duration": 3.919
  },
  {
    "text": "task the enemies on the video were using",
    "start": 1078.48,
    "duration": 4.64
  },
  {
    "text": "to approach the player. Uh designers can",
    "start": 1080.559,
    "duration": 4.961
  },
  {
    "text": "set uh different data in all these",
    "start": 1083.12,
    "duration": 4.32
  },
  {
    "text": "tasks. For example, whether the AI",
    "start": 1085.52,
    "duration": 3.92
  },
  {
    "text": "should walk or run. One was the small",
    "start": 1087.44,
    "duration": 4.64
  },
  {
    "text": "was walking the bigger one was running.",
    "start": 1089.44,
    "duration": 4.479
  },
  {
    "text": "Whether we allow enemies to walk off",
    "start": 1092.08,
    "duration": 3.44
  },
  {
    "text": "ledges because through movement",
    "start": 1093.919,
    "duration": 3.281
  },
  {
    "text": "sometimes we allow enemies to drop from",
    "start": 1095.52,
    "duration": 3.92
  },
  {
    "text": "platforms not using enough link but by",
    "start": 1097.2,
    "duration": 5.12
  },
  {
    "text": "natural movement or which animation you",
    "start": 1099.44,
    "duration": 4.08
  },
  {
    "text": "should play which is defined by",
    "start": 1102.32,
    "duration": 3.04
  },
  {
    "text": "animation gameplay tag. I will explain",
    "start": 1103.52,
    "duration": 4.159
  },
  {
    "text": "how this works later. All this data is",
    "start": 1105.36,
    "duration": 4.24
  },
  {
    "text": "packing a payload that is passed to the",
    "start": 1107.679,
    "duration": 3.12
  },
  {
    "text": "gameplay ability and the gameplay",
    "start": 1109.6,
    "duration": 3.04
  },
  {
    "text": "ability will use this data to run the",
    "start": 1110.799,
    "duration": 4.161
  },
  {
    "text": "actual action. Uh two things can happen",
    "start": 1112.64,
    "duration": 4.24
  },
  {
    "text": "from this moment. Either the behavior",
    "start": 1114.96,
    "duration": 4.16
  },
  {
    "text": "tree test finishes and it will end the",
    "start": 1116.88,
    "duration": 4.32
  },
  {
    "text": "game play ability or the game play",
    "start": 1119.12,
    "duration": 4.96
  },
  {
    "text": "ability ends and it will signal the game",
    "start": 1121.2,
    "duration": 5.44
  },
  {
    "text": "behavior tree task to continue uh the",
    "start": 1124.08,
    "duration": 5.2
  },
  {
    "text": "execution of the behavior tree. Uh let's",
    "start": 1126.64,
    "duration": 4.32
  },
  {
    "text": "see an example here. We have three",
    "start": 1129.28,
    "duration": 4.16
  },
  {
    "text": "tasks. one that plays a combo animation,",
    "start": 1130.96,
    "duration": 4.48
  },
  {
    "text": "one that moves the enemy away from the",
    "start": 1133.44,
    "duration": 3.76
  },
  {
    "text": "player, and one that plays the idle",
    "start": 1135.44,
    "duration": 3.92
  },
  {
    "text": "animation. The first two are ruled by",
    "start": 1137.2,
    "duration": 3.599
  },
  {
    "text": "the gameplay ability. The gameplay",
    "start": 1139.36,
    "duration": 2.96
  },
  {
    "text": "ability plays the animation when it's",
    "start": 1140.799,
    "duration": 3.601
  },
  {
    "text": "done signals the behavior tree task to",
    "start": 1142.32,
    "duration": 4.56
  },
  {
    "text": "continue. The second gameplay ability",
    "start": 1144.4,
    "duration": 4.639
  },
  {
    "text": "will do a movement request and when the",
    "start": 1146.88,
    "duration": 3.919
  },
  {
    "text": "distance is far enough, it will just",
    "start": 1149.039,
    "duration": 4.241
  },
  {
    "text": "finish. And the third one is the",
    "start": 1150.799,
    "duration": 4.401
  },
  {
    "text": "gameplay ability is playing a loop of",
    "start": 1153.28,
    "duration": 3.6
  },
  {
    "text": "the idle animation that will play",
    "start": 1155.2,
    "duration": 3.68
  },
  {
    "text": "forever. So in this case, we use what we",
    "start": 1156.88,
    "duration": 4.48
  },
  {
    "text": "call the task timeout. Every task we use",
    "start": 1158.88,
    "duration": 4.799
  },
  {
    "text": "in loss of the fallen has the ability to",
    "start": 1161.36,
    "duration": 4.64
  },
  {
    "text": "for the designer to set a time for how",
    "start": 1163.679,
    "duration": 4.88
  },
  {
    "text": "long it should run. So in this case the",
    "start": 1166.0,
    "duration": 4.32
  },
  {
    "text": "designer say hey you run for two seconds",
    "start": 1168.559,
    "duration": 3.36
  },
  {
    "text": "and when the task detects it's been",
    "start": 1170.32,
    "duration": 3.52
  },
  {
    "text": "running for two seconds it will stop the",
    "start": 1171.919,
    "duration": 3.921
  },
  {
    "text": "game play ability which will stop the",
    "start": 1173.84,
    "duration": 3.839
  },
  {
    "text": "idle animation and the behavior tree",
    "start": 1175.84,
    "duration": 3.68
  },
  {
    "text": "will revaluate or whatever it needs to",
    "start": 1177.679,
    "duration": 4.801
  },
  {
    "text": "do. This is super useful for us because",
    "start": 1179.52,
    "duration": 5.12
  },
  {
    "text": "now we can control combat in two",
    "start": 1182.48,
    "duration": 4.319
  },
  {
    "text": "different ways. We are heavily driven by",
    "start": 1184.64,
    "duration": 3.76
  },
  {
    "text": "animation. So sometimes we want the",
    "start": 1186.799,
    "duration": 4.0
  },
  {
    "text": "animation to decide the rhythm of the",
    "start": 1188.4,
    "duration": 4.48
  },
  {
    "text": "combat and sometimes we want designers",
    "start": 1190.799,
    "duration": 4.161
  },
  {
    "text": "to orchestrate that like I know you move",
    "start": 1192.88,
    "duration": 3.6
  },
  {
    "text": "two seconds to the left and then 3",
    "start": 1194.96,
    "duration": 3.12
  },
  {
    "text": "seconds backwards and then you play this",
    "start": 1196.48,
    "duration": 3.84
  },
  {
    "text": "animation. So you have full control in a",
    "start": 1198.08,
    "duration": 6.0
  },
  {
    "text": "very flexible way. Um everything we do",
    "start": 1200.32,
    "duration": 5.92
  },
  {
    "text": "is datadriven where whether it's",
    "start": 1204.08,
    "duration": 4.16
  },
  {
    "text": "possible uh for AIS we have something",
    "start": 1206.24,
    "duration": 4.319
  },
  {
    "text": "that is called the character data asset.",
    "start": 1208.24,
    "duration": 4.559
  },
  {
    "text": "These are this is a data set that",
    "start": 1210.559,
    "duration": 4.721
  },
  {
    "text": "compiles other data assets, data tables",
    "start": 1212.799,
    "duration": 5.201
  },
  {
    "text": "and uh other um values you can set",
    "start": 1215.28,
    "duration": 5.2
  },
  {
    "text": "directly there. Uh there's a lot of",
    "start": 1218.0,
    "duration": 4.0
  },
  {
    "text": "information here. We can set the",
    "start": 1220.48,
    "duration": 3.199
  },
  {
    "text": "equipment which are more weapons and",
    "start": 1222.0,
    "duration": 4.24
  },
  {
    "text": "other stuff. The I can wear stats. We",
    "start": 1223.679,
    "duration": 5.281
  },
  {
    "text": "have up to 145 values per enemy.",
    "start": 1226.24,
    "duration": 5.12
  },
  {
    "text": "Designers can tweak loot, what kind of",
    "start": 1228.96,
    "duration": 4.48
  },
  {
    "text": "loot, the quality and the probability of",
    "start": 1231.36,
    "duration": 4.72
  },
  {
    "text": "field. Gameplay data. This is uh the",
    "start": 1233.44,
    "duration": 4.239
  },
  {
    "text": "gameplay abilities that will be granted",
    "start": 1236.08,
    "duration": 3.76
  },
  {
    "text": "to the enemy. but also things like how",
    "start": 1237.679,
    "duration": 4.0
  },
  {
    "text": "the camera should behave when the player",
    "start": 1239.84,
    "duration": 3.6
  },
  {
    "text": "locks on an enemy because depending on",
    "start": 1241.679,
    "duration": 3.521
  },
  {
    "text": "the size and the velocity, the camera",
    "start": 1243.44,
    "duration": 3.76
  },
  {
    "text": "will behave a different way. And then we",
    "start": 1245.2,
    "duration": 4.32
  },
  {
    "text": "have animations and AI. Let's give uh",
    "start": 1247.2,
    "duration": 3.68
  },
  {
    "text": "let's dive into these two because",
    "start": 1249.52,
    "duration": 4.24
  },
  {
    "text": "they're important for the talk. In",
    "start": 1250.88,
    "duration": 5.44
  },
  {
    "text": "animations, we set data like blending",
    "start": 1253.76,
    "duration": 4.56
  },
  {
    "text": "times and other stuff we need for the",
    "start": 1256.32,
    "duration": 4.4
  },
  {
    "text": "animation blueprint and other logic we",
    "start": 1258.32,
    "duration": 5.52
  },
  {
    "text": "have. Uh among the data we set, we",
    "start": 1260.72,
    "duration": 6.24
  },
  {
    "text": "create a map. the map where the key is a",
    "start": 1263.84,
    "duration": 4.8
  },
  {
    "text": "gameplay tag and the value is the",
    "start": 1266.96,
    "duration": 3.68
  },
  {
    "text": "animation asset. These are the gameplay",
    "start": 1268.64,
    "duration": 3.76
  },
  {
    "text": "tasks designers are going to use in the",
    "start": 1270.64,
    "duration": 4.24
  },
  {
    "text": "behaviorality task three tasks when they",
    "start": 1272.4,
    "duration": 6.0
  },
  {
    "text": "want to use a specific animation. Um we",
    "start": 1274.88,
    "duration": 5.2
  },
  {
    "text": "have two types of maps. One is for",
    "start": 1278.4,
    "duration": 3.36
  },
  {
    "text": "Montages. These are your one-time",
    "start": 1280.08,
    "duration": 3.68
  },
  {
    "text": "animations things that have root motion",
    "start": 1281.76,
    "duration": 4.32
  },
  {
    "text": "like uh the death animation take one",
    "start": 1283.76,
    "duration": 5.44
  },
  {
    "text": "step to the left or paran attack. And",
    "start": 1286.08,
    "duration": 4.959
  },
  {
    "text": "then we have sequences which are more",
    "start": 1289.2,
    "duration": 3.68
  },
  {
    "text": "your loop cycles or things you need to",
    "start": 1291.039,
    "duration": 3.601
  },
  {
    "text": "blend with other animations like your",
    "start": 1292.88,
    "duration": 4.96
  },
  {
    "text": "walking cycle or your idling cycle. I",
    "start": 1294.64,
    "duration": 4.72
  },
  {
    "text": "mentioned we are heavily driven by",
    "start": 1297.84,
    "duration": 3.52
  },
  {
    "text": "animation and this is an a good example.",
    "start": 1299.36,
    "duration": 4.16
  },
  {
    "text": "I have to tailor this image for the talk",
    "start": 1301.36,
    "duration": 4.88
  },
  {
    "text": "because in reality there are 40 uh 54",
    "start": 1303.52,
    "duration": 5.76
  },
  {
    "text": "montages and 17 sequences and that's for",
    "start": 1306.24,
    "duration": 4.64
  },
  {
    "text": "a simple enemy. If you look in a boss",
    "start": 1309.28,
    "duration": 2.879
  },
  {
    "text": "it's going to be way longer because",
    "start": 1310.88,
    "duration": 2.64
  },
  {
    "text": "there are more attacks and things they",
    "start": 1312.159,
    "duration": 3.681
  },
  {
    "text": "can do. Um so it's very important for us",
    "start": 1313.52,
    "duration": 4.08
  },
  {
    "text": "we have a good organization of all the",
    "start": 1315.84,
    "duration": 3.68
  },
  {
    "text": "data so designers don't go crazy when",
    "start": 1317.6,
    "duration": 4.079
  },
  {
    "text": "looking for where they can what they can",
    "start": 1319.52,
    "duration": 5.039
  },
  {
    "text": "do. Then we have the AI data asset. Uh",
    "start": 1321.679,
    "duration": 4.161
  },
  {
    "text": "this is where we set things for",
    "start": 1324.559,
    "duration": 4.24
  },
  {
    "text": "perception how far you can see or here",
    "start": 1325.84,
    "duration": 5.76
  },
  {
    "text": "navigation data. For example uh we allow",
    "start": 1328.799,
    "duration": 4.721
  },
  {
    "text": "some enemies to go through fire but",
    "start": 1331.6,
    "duration": 3.68
  },
  {
    "text": "others need to go around. And that's",
    "start": 1333.52,
    "duration": 3.36
  },
  {
    "text": "where we use the acusto navigation",
    "start": 1335.28,
    "duration": 3.36
  },
  {
    "text": "filters because if we set here",
    "start": 1336.88,
    "duration": 3.679
  },
  {
    "text": "navigation data a you cannot go through",
    "start": 1338.64,
    "duration": 4.72
  },
  {
    "text": "fire a filter will use the fire flag to",
    "start": 1340.559,
    "duration": 4.24
  },
  {
    "text": "exclude the from the path calculation",
    "start": 1343.36,
    "duration": 3.84
  },
  {
    "text": "and the path will go around the fire.",
    "start": 1344.799,
    "duration": 4.24
  },
  {
    "text": "And then we also define the most",
    "start": 1347.2,
    "duration": 3.359
  },
  {
    "text": "important thing which is the behavior",
    "start": 1349.039,
    "duration": 3.361
  },
  {
    "text": "trees to run. We have what is called the",
    "start": 1350.559,
    "duration": 4.401
  },
  {
    "text": "master enemy behavior tree in Lords of",
    "start": 1352.4,
    "duration": 3.92
  },
  {
    "text": "the Fallen which is the behavior tree",
    "start": 1354.96,
    "duration": 3.839
  },
  {
    "text": "any enemy will run and then to that we",
    "start": 1356.32,
    "duration": 4.96
  },
  {
    "text": "inject all these dynamic behaviors which",
    "start": 1358.799,
    "duration": 6.0
  },
  {
    "text": "are the specific things of the AI like",
    "start": 1361.28,
    "duration": 5.759
  },
  {
    "text": "how do you behave in idle in combat or",
    "start": 1364.799,
    "duration": 4.401
  },
  {
    "text": "patrolling every enemy will behave in a",
    "start": 1367.039,
    "duration": 3.601
  },
  {
    "text": "different way. Every enemy will have",
    "start": 1369.2,
    "duration": 5.68
  },
  {
    "text": "different behavior trees. Um",
    "start": 1370.64,
    "duration": 6.399
  },
  {
    "text": "we use all this data in what we call the",
    "start": 1374.88,
    "duration": 4.72
  },
  {
    "text": "combine approach. uh when the AI possess",
    "start": 1377.039,
    "duration": 4.481
  },
  {
    "text": "the character we run the master enemy",
    "start": 1379.6,
    "duration": 3.52
  },
  {
    "text": "tree and then we get all those behavior",
    "start": 1381.52,
    "duration": 3.44
  },
  {
    "text": "trees from the data asset but we also",
    "start": 1383.12,
    "duration": 3.919
  },
  {
    "text": "run a a state tree that's the combined",
    "start": 1384.96,
    "duration": 4.24
  },
  {
    "text": "part behavior trees and state trees we",
    "start": 1387.039,
    "duration": 3.841
  },
  {
    "text": "have what we call the combat state tree",
    "start": 1389.2,
    "duration": 3.76
  },
  {
    "text": "this is high level tree that reads",
    "start": 1390.88,
    "duration": 4.72
  },
  {
    "text": "perception data and defines which core",
    "start": 1392.96,
    "duration": 4.88
  },
  {
    "text": "state the AI should be idle nothing",
    "start": 1395.6,
    "duration": 4.079
  },
  {
    "text": "happens caution you heard something go",
    "start": 1397.84,
    "duration": 4.319
  },
  {
    "text": "to investigate found you found what you",
    "start": 1399.679,
    "duration": 4.24
  },
  {
    "text": "were looking for prepare for something",
    "start": 1402.159,
    "duration": 3.921
  },
  {
    "text": "else and combat is to engage into the",
    "start": 1403.919,
    "duration": 3.921
  },
  {
    "text": "fight this information has passed to the",
    "start": 1406.08,
    "duration": 3.52
  },
  {
    "text": "master enemy tree and then the tree will",
    "start": 1407.84,
    "duration": 4.56
  },
  {
    "text": "decide which uh branch to run. Simple",
    "start": 1409.6,
    "duration": 4.559
  },
  {
    "text": "concept, easy to understand, easy to",
    "start": 1412.4,
    "duration": 3.68
  },
  {
    "text": "debug. But reality is a bit different",
    "start": 1414.159,
    "duration": 3.921
  },
  {
    "text": "and you end up with something like this.",
    "start": 1416.08,
    "duration": 3.839
  },
  {
    "text": "By the end of the project, we have a",
    "start": 1418.08,
    "duration": 3.52
  },
  {
    "text": "massive master enemy tree. I have to",
    "start": 1419.919,
    "duration": 3.601
  },
  {
    "text": "collapse it so I could actually zoom out",
    "start": 1421.6,
    "duration": 5.439
  },
  {
    "text": "enough to show it. Um uh many things",
    "start": 1423.52,
    "duration": 5.6
  },
  {
    "text": "happening here. Idle is 10 different",
    "start": 1427.039,
    "duration": 3.441
  },
  {
    "text": "things because I'm on other stuff.",
    "start": 1429.12,
    "duration": 3.439
  },
  {
    "text": "Patrol is a form of idle for loss of the",
    "start": 1430.48,
    "duration": 5.28
  },
  {
    "text": "fawn and found and coing states can run",
    "start": 1432.559,
    "duration": 4.801
  },
  {
    "text": "up to five different behavior trees",
    "start": 1435.76,
    "duration": 3.36
  },
  {
    "text": "depending on the enemy configuration.",
    "start": 1437.36,
    "duration": 4.319
  },
  {
    "text": "Combat is not only fight is how do I",
    "start": 1439.12,
    "duration": 3.919
  },
  {
    "text": "fight when there are other people",
    "start": 1441.679,
    "duration": 4.081
  },
  {
    "text": "targeting the same player and how do you",
    "start": 1443.039,
    "duration": 4.481
  },
  {
    "text": "react to the combat situations? How do",
    "start": 1445.76,
    "duration": 4.159
  },
  {
    "text": "you react to parry to block to dodge and",
    "start": 1447.52,
    "duration": 4.159
  },
  {
    "text": "then there are other stuff that will",
    "start": 1449.919,
    "duration": 4.0
  },
  {
    "text": "happen no matter which other state you",
    "start": 1451.679,
    "duration": 4.24
  },
  {
    "text": "are those things you need to react to. I",
    "start": 1453.919,
    "duration": 4.321
  },
  {
    "text": "will explain more on that. This was an",
    "start": 1455.919,
    "duration": 4.081
  },
  {
    "text": "issue because towards Lords of the",
    "start": 1458.24,
    "duration": 3.52
  },
  {
    "text": "Fallen 2 we wanted to do deeper",
    "start": 1460.0,
    "duration": 3.44
  },
  {
    "text": "behaviors. We wanted to do more",
    "start": 1461.76,
    "duration": 4.159
  },
  {
    "text": "complicated stuff and that implied to uh",
    "start": 1463.44,
    "duration": 4.96
  },
  {
    "text": "plug in more stuff here and it was very",
    "start": 1465.919,
    "duration": 4.561
  },
  {
    "text": "easy to break things. It was very it",
    "start": 1468.4,
    "duration": 4.159
  },
  {
    "text": "became a juggling a priority juggling",
    "start": 1470.48,
    "duration": 4.559
  },
  {
    "text": "game where what goes to the left of what",
    "start": 1472.559,
    "duration": 6.561
  },
  {
    "text": "to what's higher priority and h people",
    "start": 1475.039,
    "duration": 6.0
  },
  {
    "text": "didn't really like to debug this thing.",
    "start": 1479.12,
    "duration": 3.76
  },
  {
    "text": "So we needed a better approach for Lords",
    "start": 1481.039,
    "duration": 4.081
  },
  {
    "text": "of the Fallen 2 and we came up with the",
    "start": 1482.88,
    "duration": 4.64
  },
  {
    "text": "reaction system. The core idea here is",
    "start": 1485.12,
    "duration": 4.24
  },
  {
    "text": "to we want to reuse everything we did",
    "start": 1487.52,
    "duration": 3.759
  },
  {
    "text": "for Lords of the Fallen. have 100",
    "start": 1489.36,
    "duration": 4.16
  },
  {
    "text": "behavior trees in Lord of the Fallen. No",
    "start": 1491.279,
    "duration": 4.161
  },
  {
    "text": "way we are remaking them and we want to",
    "start": 1493.52,
    "duration": 4.32
  },
  {
    "text": "use this them as a base to Lords of the",
    "start": 1495.44,
    "duration": 4.239
  },
  {
    "text": "Fallen 2 to construct better and iterate",
    "start": 1497.84,
    "duration": 3.839
  },
  {
    "text": "over that and we want to be more",
    "start": 1499.679,
    "duration": 3.841
  },
  {
    "text": "datadriven where possible. So we don't",
    "start": 1501.679,
    "duration": 3.521
  },
  {
    "text": "have to go to this massive asset to plug",
    "start": 1503.52,
    "duration": 5.279
  },
  {
    "text": "in things. Um a reaction is something",
    "start": 1505.2,
    "duration": 6.079
  },
  {
    "text": "that is not a core state is not idle",
    "start": 1508.799,
    "duration": 5.041
  },
  {
    "text": "caution or combat but can happen in any",
    "start": 1511.279,
    "duration": 4.4
  },
  {
    "text": "of them. For example, during combat,",
    "start": 1513.84,
    "duration": 3.839
  },
  {
    "text": "whether you parry, block or dodge,",
    "start": 1515.679,
    "duration": 4.24
  },
  {
    "text": "soulfly, special ability of the player.",
    "start": 1517.679,
    "duration": 4.561
  },
  {
    "text": "Uh melee attacks, can you parry them?",
    "start": 1519.919,
    "duration": 4.24
  },
  {
    "text": "Magic and projectiles, can you block or",
    "start": 1522.24,
    "duration": 3.76
  },
  {
    "text": "dodge? And then if the player has a",
    "start": 1524.159,
    "duration": 3.441
  },
  {
    "text": "special ability and staggers the enemy,",
    "start": 1526.0,
    "duration": 3.039
  },
  {
    "text": "the enemy needs to react to that. It",
    "start": 1527.6,
    "duration": 4.16
  },
  {
    "text": "needs to be a stagger. Uh we have the",
    "start": 1529.039,
    "duration": 5.281
  },
  {
    "text": "other situations. What happens if your",
    "start": 1531.76,
    "duration": 4.08
  },
  {
    "text": "target goes out of reach? What happens",
    "start": 1534.32,
    "duration": 3.12
  },
  {
    "text": "if the player goes to a place you cannot",
    "start": 1535.84,
    "duration": 3.52
  },
  {
    "text": "reach or goes out of nav? You need to",
    "start": 1537.44,
    "duration": 4.32
  },
  {
    "text": "deal with that. Uh we allow our s to",
    "start": 1539.36,
    "duration": 4.08
  },
  {
    "text": "destroy the environment. And if uh the",
    "start": 1541.76,
    "duration": 3.6
  },
  {
    "text": "player while in combat hides behind a",
    "start": 1543.44,
    "duration": 4.32
  },
  {
    "text": "crate, the enemy will reach the crate,",
    "start": 1545.36,
    "duration": 4.16
  },
  {
    "text": "break it, and continue. And this is this",
    "start": 1547.76,
    "duration": 3.279
  },
  {
    "text": "is the player will not notice. There's",
    "start": 1549.52,
    "duration": 4.0
  },
  {
    "text": "been this swap in the behavior. Rubber",
    "start": 1551.039,
    "duration": 4.401
  },
  {
    "text": "banding. We don't allow enemies to be",
    "start": 1553.52,
    "duration": 3.2
  },
  {
    "text": "lured very far away from their",
    "start": 1555.44,
    "duration": 3.2
  },
  {
    "text": "designated areas where they originally",
    "start": 1556.72,
    "duration": 4.0
  },
  {
    "text": "spawn. So if they detect they are too",
    "start": 1558.64,
    "duration": 3.68
  },
  {
    "text": "far, they're going to try to trigger a",
    "start": 1560.72,
    "duration": 4.079
  },
  {
    "text": "behavior to come back slowly to tell the",
    "start": 1562.32,
    "duration": 3.839
  },
  {
    "text": "player, \"Yeah, I'm not going that far.",
    "start": 1564.799,
    "duration": 3.441
  },
  {
    "text": "You come to me.\" And then we have what",
    "start": 1566.159,
    "duration": 3.921
  },
  {
    "text": "we call wait first encounter. These are",
    "start": 1568.24,
    "duration": 3.76
  },
  {
    "text": "tailored situations for the gameplay",
    "start": 1570.08,
    "duration": 3.44
  },
  {
    "text": "experience of the player. So for",
    "start": 1572.0,
    "duration": 3.2
  },
  {
    "text": "example, let's say the player gets into",
    "start": 1573.52,
    "duration": 4.24
  },
  {
    "text": "a castle and we want every time to for",
    "start": 1575.2,
    "duration": 4.16
  },
  {
    "text": "the player to see these two soldiers",
    "start": 1577.76,
    "duration": 4.08
  },
  {
    "text": "patrolling down some stairs. Uh what we",
    "start": 1579.36,
    "duration": 4.96
  },
  {
    "text": "do is we tell the hey you have a patrol",
    "start": 1581.84,
    "duration": 4.319
  },
  {
    "text": "and you will go downstairs but you don't",
    "start": 1584.32,
    "duration": 3.68
  },
  {
    "text": "start patrolling until the player is at",
    "start": 1586.159,
    "duration": 4.161
  },
  {
    "text": "this exact location looking this way.",
    "start": 1588.0,
    "duration": 4.32
  },
  {
    "text": "And for Lost of the Fall 2 we are adding",
    "start": 1590.32,
    "duration": 4.0
  },
  {
    "text": "way more reactions for combat. We are",
    "start": 1592.32,
    "duration": 4.239
  },
  {
    "text": "adding more complicated first encounter",
    "start": 1594.32,
    "duration": 4.88
  },
  {
    "text": "situations and other stuff. So we need a",
    "start": 1596.559,
    "duration": 4.801
  },
  {
    "text": "better way to organize all this. This",
    "start": 1599.2,
    "duration": 4.079
  },
  {
    "text": "article came through or reactive",
    "start": 1601.36,
    "duration": 4.64
  },
  {
    "text": "behavior trees. Um a way to deal with",
    "start": 1603.279,
    "duration": 4.481
  },
  {
    "text": "these situations. I will link it at the",
    "start": 1606.0,
    "duration": 3.36
  },
  {
    "text": "end of the talk. I recommend you read",
    "start": 1607.76,
    "duration": 4.32
  },
  {
    "text": "it. And we iterate on this is we have a",
    "start": 1609.36,
    "duration": 5.28
  },
  {
    "text": "different approach. So what we do now is",
    "start": 1612.08,
    "duration": 4.56
  },
  {
    "text": "the AI controller process the enemy and",
    "start": 1614.64,
    "duration": 4.0
  },
  {
    "text": "we run a custom state tree component. We",
    "start": 1616.64,
    "duration": 3.919
  },
  {
    "text": "double down on state trees because by",
    "start": 1618.64,
    "duration": 3.6
  },
  {
    "text": "the time we started Lords of the Fallen",
    "start": 1620.559,
    "duration": 3.681
  },
  {
    "text": "2, they evolve and they are much better",
    "start": 1622.24,
    "duration": 3.919
  },
  {
    "text": "now. we can do much better stuff, more",
    "start": 1624.24,
    "duration": 4.72
  },
  {
    "text": "complicated things. And this custom",
    "start": 1626.159,
    "duration": 5.441
  },
  {
    "text": "state tree runs two types of of state",
    "start": 1628.96,
    "duration": 4.4
  },
  {
    "text": "trees. It runs the perception state tree",
    "start": 1631.6,
    "duration": 4.0
  },
  {
    "text": "and the reaction trees. Let's see what",
    "start": 1633.36,
    "duration": 4.799
  },
  {
    "text": "what's what. Uh the perception state",
    "start": 1635.6,
    "duration": 4.72
  },
  {
    "text": "tree is what we have before named combat",
    "start": 1638.159,
    "duration": 3.841
  },
  {
    "text": "state tree. This this is a state tree",
    "start": 1640.32,
    "duration": 4.16
  },
  {
    "text": "that reads perception data and decides",
    "start": 1642.0,
    "duration": 5.44
  },
  {
    "text": "on a core state idle, found caution,",
    "start": 1644.48,
    "duration": 5.199
  },
  {
    "text": "etc. The difference now is that this",
    "start": 1647.44,
    "duration": 4.16
  },
  {
    "text": "state tree will actually run the",
    "start": 1649.679,
    "duration": 3.761
  },
  {
    "text": "behavior tree. We don't have the master",
    "start": 1651.6,
    "duration": 3.84
  },
  {
    "text": "enemy tree anymore. We dismantle it into",
    "start": 1653.44,
    "duration": 4.08
  },
  {
    "text": "pieces and we are relocating things here",
    "start": 1655.44,
    "duration": 3.76
  },
  {
    "text": "or there. So what happens is when you",
    "start": 1657.52,
    "duration": 3.519
  },
  {
    "text": "get into combat, we run the behavior",
    "start": 1659.2,
    "duration": 3.76
  },
  {
    "text": "tree combat. We don't pass information",
    "start": 1661.039,
    "duration": 4.561
  },
  {
    "text": "to some other asset. In parallel, we are",
    "start": 1662.96,
    "duration": 4.56
  },
  {
    "text": "evaluating different re uh reaction",
    "start": 1665.6,
    "duration": 3.52
  },
  {
    "text": "trees. These are simple state trees",
    "start": 1667.52,
    "duration": 4.24
  },
  {
    "text": "designers will create where they uh",
    "start": 1669.12,
    "duration": 5.039
  },
  {
    "text": "manage they check conditions and in the",
    "start": 1671.76,
    "duration": 4.56
  },
  {
    "text": "wall and in combat and context gameplay",
    "start": 1674.159,
    "duration": 4.481
  },
  {
    "text": "context to decide whether the AI needs",
    "start": 1676.32,
    "duration": 4.479
  },
  {
    "text": "to react to something. These are a small",
    "start": 1678.64,
    "duration": 4.88
  },
  {
    "text": "blocks to construct deeper behaviors. Uh",
    "start": 1680.799,
    "duration": 5.12
  },
  {
    "text": "let's see an example. Let's say the",
    "start": 1683.52,
    "duration": 4.72
  },
  {
    "text": "enemy is in combat fighting the player",
    "start": 1685.919,
    "duration": 3.841
  },
  {
    "text": "and while we are evaluating the",
    "start": 1688.24,
    "duration": 3.28
  },
  {
    "text": "reactions, we are evaluating the attack",
    "start": 1689.76,
    "duration": 3.919
  },
  {
    "text": "reaction whether we can parry a melee",
    "start": 1691.52,
    "duration": 4.72
  },
  {
    "text": "attack. Chances are good the enemy can",
    "start": 1693.679,
    "duration": 4.641
  },
  {
    "text": "and the reaction says hey you can parry",
    "start": 1696.24,
    "duration": 4.4
  },
  {
    "text": "the following attack. So we send an",
    "start": 1698.32,
    "duration": 4.479
  },
  {
    "text": "event to the perception tree and we tell",
    "start": 1700.64,
    "duration": 3.84
  },
  {
    "text": "it hey you can parry and this is a",
    "start": 1702.799,
    "duration": 3.76
  },
  {
    "text": "behavior tree you will run for for that",
    "start": 1704.48,
    "duration": 4.4
  },
  {
    "text": "parry. What the percent tree will do is",
    "start": 1706.559,
    "duration": 4.561
  },
  {
    "text": "it will interrupt the combat PT. It will",
    "start": 1708.88,
    "duration": 4.24
  },
  {
    "text": "jump to the run reaction, a new state",
    "start": 1711.12,
    "duration": 4.64
  },
  {
    "text": "that can only be accessed through this",
    "start": 1713.12,
    "duration": 4.88
  },
  {
    "text": "type of events. It will run the par",
    "start": 1715.76,
    "duration": 3.76
  },
  {
    "text": "behavior tree attack will play the",
    "start": 1718.0,
    "duration": 3.679
  },
  {
    "text": "paranimation, apply some stats, whatever",
    "start": 1719.52,
    "duration": 3.92
  },
  {
    "text": "it needs to do. And when that's done,",
    "start": 1721.679,
    "duration": 3.681
  },
  {
    "text": "the perception tree will revaluate and",
    "start": 1723.44,
    "duration": 3.76
  },
  {
    "text": "most probably continue to combat or do",
    "start": 1725.36,
    "duration": 4.319
  },
  {
    "text": "whatever it needs to do. This works very",
    "start": 1727.2,
    "duration": 4.719
  },
  {
    "text": "well and we did some iteration on that.",
    "start": 1729.679,
    "duration": 4.48
  },
  {
    "text": "Um, first of all, we were iter we were",
    "start": 1731.919,
    "duration": 3.601
  },
  {
    "text": "taking all the reactions all the time",
    "start": 1734.159,
    "duration": 2.961
  },
  {
    "text": "and that didn't make any sense. Why will",
    "start": 1735.52,
    "duration": 4.639
  },
  {
    "text": "I check why will we check uh for parry",
    "start": 1737.12,
    "duration": 4.799
  },
  {
    "text": "attacks when the enemy is in idle? No,",
    "start": 1740.159,
    "duration": 3.921
  },
  {
    "text": "if nobody's attacking it. So, we created",
    "start": 1741.919,
    "duration": 4.321
  },
  {
    "text": "the reaction tick conditions. These are",
    "start": 1744.08,
    "duration": 3.52
  },
  {
    "text": "very simple and quick to check",
    "start": 1746.24,
    "duration": 3.52
  },
  {
    "text": "conditions that are usually either some",
    "start": 1747.6,
    "duration": 3.92
  },
  {
    "text": "gameplay tags are present in the",
    "start": 1749.76,
    "duration": 4.0
  },
  {
    "text": "character or there is a gameplay event",
    "start": 1751.52,
    "duration": 4.32
  },
  {
    "text": "we send to provoke a reactions through",
    "start": 1753.76,
    "duration": 4.32
  },
  {
    "text": "the game play. So, we we check these",
    "start": 1755.84,
    "duration": 4.959
  },
  {
    "text": "stick conditions first and if they they",
    "start": 1758.08,
    "duration": 5.28
  },
  {
    "text": "don't pass, we don't even tick the tree.",
    "start": 1760.799,
    "duration": 4.721
  },
  {
    "text": "We ignore it like the reaction doesn't",
    "start": 1763.36,
    "duration": 4.88
  },
  {
    "text": "exist. So quite flexible and but there",
    "start": 1765.52,
    "duration": 4.96
  },
  {
    "text": "is more to it. This is how the",
    "start": 1768.24,
    "duration": 4.0
  },
  {
    "text": "perception tree looks like. This is the",
    "start": 1770.48,
    "duration": 3.76
  },
  {
    "text": "merge between the core functionality of",
    "start": 1772.24,
    "duration": 3.679
  },
  {
    "text": "the master enmy tree and what we have",
    "start": 1774.24,
    "duration": 4.4
  },
  {
    "text": "before. We have lots of conditions that",
    "start": 1775.919,
    "duration": 4.561
  },
  {
    "text": "are the white text. We converted some",
    "start": 1778.64,
    "duration": 4.48
  },
  {
    "text": "decorators into state tree conditions.",
    "start": 1780.48,
    "duration": 4.319
  },
  {
    "text": "That's very easy to do. They follow the",
    "start": 1783.12,
    "duration": 4.559
  },
  {
    "text": "same logic. And we have the old states",
    "start": 1784.799,
    "duration": 5.12
  },
  {
    "text": "right combat found calcian idol. But",
    "start": 1787.679,
    "duration": 4.561
  },
  {
    "text": "also we have new states. We have debug",
    "start": 1789.919,
    "duration": 4.64
  },
  {
    "text": "to force behaviors and to test things.",
    "start": 1792.24,
    "duration": 4.559
  },
  {
    "text": "We have patrol is its own new state",
    "start": 1794.559,
    "duration": 4.081
  },
  {
    "text": "because it's more complicated than Lord",
    "start": 1796.799,
    "duration": 3.441
  },
  {
    "text": "of the Fallen 2. So it needs to be its",
    "start": 1798.64,
    "duration": 3.36
  },
  {
    "text": "own state. And then at the bottom we",
    "start": 1800.24,
    "duration": 3.52
  },
  {
    "text": "have the run reaction state that will be",
    "start": 1802.0,
    "duration": 5.279
  },
  {
    "text": "only accessed through that event. Um we",
    "start": 1803.76,
    "duration": 5.68
  },
  {
    "text": "want more datadriven. So datadriven it",
    "start": 1807.279,
    "duration": 4.801
  },
  {
    "text": "is uh we have uh two arrays for",
    "start": 1809.44,
    "duration": 5.2
  },
  {
    "text": "reactions. We have high priority and low",
    "start": 1812.08,
    "duration": 5.76
  },
  {
    "text": "priority. Um we only need two levels of",
    "start": 1814.64,
    "duration": 6.08
  },
  {
    "text": "complexity. we because uh either a",
    "start": 1817.84,
    "duration": 4.48
  },
  {
    "text": "reaction is something that needs to",
    "start": 1820.72,
    "duration": 4.0
  },
  {
    "text": "happen right now and cannot be",
    "start": 1822.32,
    "duration": 4.8
  },
  {
    "text": "interrupted or the reaction is something",
    "start": 1824.72,
    "duration": 3.679
  },
  {
    "text": "not so important that can be",
    "start": 1827.12,
    "duration": 3.52
  },
  {
    "text": "interrupted. To give you an example,",
    "start": 1828.399,
    "duration": 4.16
  },
  {
    "text": "let's say the enemy is rubber banding",
    "start": 1830.64,
    "duration": 4.159
  },
  {
    "text": "and is it the text is too far from its",
    "start": 1832.559,
    "duration": 4.24
  },
  {
    "text": "spawning area and is coming back and",
    "start": 1834.799,
    "duration": 3.841
  },
  {
    "text": "then the attack play the player attacks",
    "start": 1836.799,
    "duration": 4.081
  },
  {
    "text": "the AI and the A needs to parry. Parry",
    "start": 1838.64,
    "duration": 4.56
  },
  {
    "text": "is more important than coming back. So",
    "start": 1840.88,
    "duration": 4.08
  },
  {
    "text": "we will interrupt the rubber banding",
    "start": 1843.2,
    "duration": 3.839
  },
  {
    "text": "reaction uh because it's a low priority",
    "start": 1844.96,
    "duration": 4.24
  },
  {
    "text": "and the high priority parry will play",
    "start": 1847.039,
    "duration": 4.321
  },
  {
    "text": "the parry things will revaluate and",
    "start": 1849.2,
    "duration": 3.839
  },
  {
    "text": "chances are the enemies is still too far",
    "start": 1851.36,
    "duration": 3.919
  },
  {
    "text": "and it will rerun the rubber banding",
    "start": 1853.039,
    "duration": 5.601
  },
  {
    "text": "reaction and come back. Um",
    "start": 1855.279,
    "duration": 5.361
  },
  {
    "text": "each of these definitions look like",
    "start": 1858.64,
    "duration": 4.24
  },
  {
    "text": "this. This is the attack reaction. We",
    "start": 1860.64,
    "duration": 3.84
  },
  {
    "text": "have a gameplay tag to define it and",
    "start": 1862.88,
    "duration": 4.159
  },
  {
    "text": "find it in debug. We have the state tree",
    "start": 1864.48,
    "duration": 5.12
  },
  {
    "text": "the designer will uh create to run the",
    "start": 1867.039,
    "duration": 4.64
  },
  {
    "text": "conditions the priority whether the",
    "start": 1869.6,
    "duration": 3.6
  },
  {
    "text": "reaction is enabled or not. We can",
    "start": 1871.679,
    "duration": 3.36
  },
  {
    "text": "enable and disable reactions when we",
    "start": 1873.2,
    "duration": 3.839
  },
  {
    "text": "want. This is very useful for debug and",
    "start": 1875.039,
    "duration": 5.281
  },
  {
    "text": "isolating issues. Cute. Sometimes no",
    "start": 1877.039,
    "duration": 5.36
  },
  {
    "text": "matter what your uh priority is, we",
    "start": 1880.32,
    "duration": 3.599
  },
  {
    "text": "don't want to interrupt things right",
    "start": 1882.399,
    "duration": 3.921
  },
  {
    "text": "away. For example, let's say the is",
    "start": 1883.919,
    "duration": 4.24
  },
  {
    "text": "playing a very long combo 10 seconds",
    "start": 1886.32,
    "duration": 4.56
  },
  {
    "text": "combo that is pushing the enemy forward",
    "start": 1888.159,
    "duration": 4.321
  },
  {
    "text": "attacking the player. And while that",
    "start": 1890.88,
    "duration": 3.519
  },
  {
    "text": "happens, the rubber banding triggers and",
    "start": 1892.48,
    "duration": 3.6
  },
  {
    "text": "says, \"What? you're going too far. We",
    "start": 1894.399,
    "duration": 3.52
  },
  {
    "text": "don't interrupt the combo behavior tree",
    "start": 1896.08,
    "duration": 3.76
  },
  {
    "text": "because for Souls like games, it's very",
    "start": 1897.919,
    "duration": 4.561
  },
  {
    "text": "important to keep consistency in combat.",
    "start": 1899.84,
    "duration": 4.319
  },
  {
    "text": "Uh is that's that's how the player",
    "start": 1902.48,
    "duration": 3.52
  },
  {
    "text": "learns the combos and how to defeat",
    "start": 1904.159,
    "duration": 3.441
  },
  {
    "text": "enemies. So what we do is we cue the",
    "start": 1906.0,
    "duration": 4.32
  },
  {
    "text": "reaction and we wait for the combo to",
    "start": 1907.6,
    "duration": 4.559
  },
  {
    "text": "finish. And when the combo is finishes,",
    "start": 1910.32,
    "duration": 4.079
  },
  {
    "text": "if the Q is still there, then we run the",
    "start": 1912.159,
    "duration": 4.24
  },
  {
    "text": "reaction. We call it Q, but it's only",
    "start": 1914.399,
    "duration": 4.081
  },
  {
    "text": "one slot. So if another Q reaction",
    "start": 1916.399,
    "duration": 4.801
  },
  {
    "text": "happens, we replace it. If another",
    "start": 1918.48,
    "duration": 4.88
  },
  {
    "text": "immediate reaction that it needs to not",
    "start": 1921.2,
    "duration": 4.319
  },
  {
    "text": "be queued but to render right away",
    "start": 1923.36,
    "duration": 4.24
  },
  {
    "text": "happens, we remove the queue. It's only",
    "start": 1925.519,
    "duration": 4.721
  },
  {
    "text": "one at its time, we don't stack them",
    "start": 1927.6,
    "duration": 3.919
  },
  {
    "text": "because that doesn't make sense. You",
    "start": 1930.24,
    "duration": 2.96
  },
  {
    "text": "will end up with situations where you",
    "start": 1931.519,
    "duration": 3.28
  },
  {
    "text": "play the rubber banding and when it's",
    "start": 1933.2,
    "duration": 4.079
  },
  {
    "text": "finished it will parry no one because it",
    "start": 1934.799,
    "duration": 5.041
  },
  {
    "text": "was on the stack. So no stacking for us.",
    "start": 1937.279,
    "duration": 4.64
  },
  {
    "text": "Cooldown for the reaction so it doesn't",
    "start": 1939.84,
    "duration": 4.319
  },
  {
    "text": "run too often. Uh it's game play",
    "start": 1941.919,
    "duration": 3.921
  },
  {
    "text": "gameplay ability system style attack and",
    "start": 1944.159,
    "duration": 4.081
  },
  {
    "text": "a time. Some tags we can add to the",
    "start": 1945.84,
    "duration": 4.079
  },
  {
    "text": "character while the reaction runs and",
    "start": 1948.24,
    "duration": 3.36
  },
  {
    "text": "they will be removed when the reaction",
    "start": 1949.919,
    "duration": 4.0
  },
  {
    "text": "finishes. And the tick conditions which",
    "start": 1951.6,
    "duration": 4.559
  },
  {
    "text": "in this case the gameplay tag event",
    "start": 1953.919,
    "duration": 4.321
  },
  {
    "text": "attacking coming needs to be present for",
    "start": 1956.159,
    "duration": 4.0
  },
  {
    "text": "you to consider the to evaluate that",
    "start": 1958.24,
    "duration": 5.439
  },
  {
    "text": "state tree. And we have one last issue",
    "start": 1960.159,
    "duration": 5.201
  },
  {
    "text": "with this. I mentioned that we don't",
    "start": 1963.679,
    "duration": 3.041
  },
  {
    "text": "have the master enemy tree. So we are",
    "start": 1965.36,
    "duration": 2.72
  },
  {
    "text": "running behavior trees at single",
    "start": 1966.72,
    "duration": 3.6
  },
  {
    "text": "instances single pieces. We run here and",
    "start": 1968.08,
    "duration": 4.479
  },
  {
    "text": "there whenever we want to. And that's an",
    "start": 1970.32,
    "duration": 4.079
  },
  {
    "text": "issue and that's because how Unreal",
    "start": 1972.559,
    "duration": 3.281
  },
  {
    "text": "handles memory. Usually you have a",
    "start": 1974.399,
    "duration": 3.601
  },
  {
    "text": "master enemy tree with sub trees. When",
    "start": 1975.84,
    "duration": 3.679
  },
  {
    "text": "you run a behavior tree, you get an",
    "start": 1978.0,
    "duration": 3.12
  },
  {
    "text": "entry in the known instances. This is",
    "start": 1979.519,
    "duration": 3.441
  },
  {
    "text": "the long-term memory, the persistent",
    "start": 1981.12,
    "duration": 3.76
  },
  {
    "text": "memory of your behavior tree component.",
    "start": 1982.96,
    "duration": 3.76
  },
  {
    "text": "Every new behavior tree run will get an",
    "start": 1984.88,
    "duration": 4.0
  },
  {
    "text": "entry with a pointer to the asset, a",
    "start": 1986.72,
    "duration": 3.92
  },
  {
    "text": "copy of the behavior tree memory and the",
    "start": 1988.88,
    "duration": 3.84
  },
  {
    "text": "instance data. This is data like who's",
    "start": 1990.64,
    "duration": 4.159
  },
  {
    "text": "your root node or what's the execution",
    "start": 1992.72,
    "duration": 3.679
  },
  {
    "text": "path needs to follow to get to this",
    "start": 1994.799,
    "duration": 4.081
  },
  {
    "text": "behavior tree. Um when you run a sub",
    "start": 1996.399,
    "duration": 4.561
  },
  {
    "text": "tree like the idle, you get an instance",
    "start": 1998.88,
    "duration": 4.48
  },
  {
    "text": "stack to it and you get hentry. This is",
    "start": 2000.96,
    "duration": 5.28
  },
  {
    "text": "your temporal memory of your behavior",
    "start": 2003.36,
    "duration": 4.96
  },
  {
    "text": "tree component and you get an index to",
    "start": 2006.24,
    "duration": 4.0
  },
  {
    "text": "the known instance, a copy of the memory",
    "start": 2008.32,
    "duration": 4.56
  },
  {
    "text": "of the tree and execution data with like",
    "start": 2010.24,
    "duration": 4.4
  },
  {
    "text": "which nodes are active in your current",
    "start": 2012.88,
    "duration": 4.08
  },
  {
    "text": "behavior tree execution. When you run a",
    "start": 2014.64,
    "duration": 4.159
  },
  {
    "text": "different sub tree, you get a different",
    "start": 2016.96,
    "duration": 4.079
  },
  {
    "text": "stack, the stack renews. And the way in",
    "start": 2018.799,
    "duration": 4.321
  },
  {
    "text": "real works is that if you run the combat",
    "start": 2021.039,
    "duration": 4.0
  },
  {
    "text": "and then you run idle and you get back",
    "start": 2023.12,
    "duration": 5.439
  },
  {
    "text": "to combat, memory stays because the the",
    "start": 2025.039,
    "duration": 5.681
  },
  {
    "text": "memory is copied back and forth. And we",
    "start": 2028.559,
    "duration": 4.401
  },
  {
    "text": "have an issue with this because we use",
    "start": 2030.72,
    "duration": 4.559
  },
  {
    "text": "utility in our combat. So when we pick",
    "start": 2032.96,
    "duration": 4.8
  },
  {
    "text": "up a combat behavior tree sub tree, we",
    "start": 2035.279,
    "duration": 4.88
  },
  {
    "text": "record it in the behavior tree memory",
    "start": 2037.76,
    "duration": 4.56
  },
  {
    "text": "just to avoid repetition the next try",
    "start": 2040.159,
    "duration": 4.64
  },
  {
    "text": "and we run combat. When you do this,",
    "start": 2042.32,
    "duration": 4.4
  },
  {
    "text": "you're writing to the instance stack to",
    "start": 2044.799,
    "duration": 3.521
  },
  {
    "text": "your temporal memory. And when the",
    "start": 2046.72,
    "duration": 3.28
  },
  {
    "text": "instance stack is clear out, every",
    "start": 2048.32,
    "duration": 3.519
  },
  {
    "text": "entity that is removed from the instance",
    "start": 2050.0,
    "duration": 4.159
  },
  {
    "text": "stack is copied back to the long-term",
    "start": 2051.839,
    "duration": 4.481
  },
  {
    "text": "memory. So you you copy back to the",
    "start": 2054.159,
    "duration": 3.76
  },
  {
    "text": "long-term memory. And once you run the",
    "start": 2056.32,
    "duration": 3.519
  },
  {
    "text": "behavior tree again, you get that copy",
    "start": 2057.919,
    "duration": 3.361
  },
  {
    "text": "back to your instance stacker. There is",
    "start": 2059.839,
    "duration": 4.641
  },
  {
    "text": "this back and forth of restoring memory.",
    "start": 2061.28,
    "duration": 5.92
  },
  {
    "text": "This didn't work for us and for a reason",
    "start": 2064.48,
    "duration": 5.679
  },
  {
    "text": "because when you stop a tree, you clear",
    "start": 2067.2,
    "duration": 5.04
  },
  {
    "text": "out all the memory, you lose it. And we",
    "start": 2070.159,
    "duration": 3.841
  },
  {
    "text": "were running trees and then stop it and",
    "start": 2072.24,
    "duration": 4.0
  },
  {
    "text": "run another tree. So we run combat and",
    "start": 2074.0,
    "duration": 4.32
  },
  {
    "text": "then we run a behavior tree reaction and",
    "start": 2076.24,
    "duration": 3.919
  },
  {
    "text": "then we get back to combat. But they are",
    "start": 2078.32,
    "duration": 3.92
  },
  {
    "text": "single runs and the member is not there",
    "start": 2080.159,
    "duration": 3.92
  },
  {
    "text": "and the the utility was picking the same",
    "start": 2082.24,
    "duration": 4.159
  },
  {
    "text": "options again and again. Uh so we had to",
    "start": 2084.079,
    "duration": 4.0
  },
  {
    "text": "fix that. What we did is in the stop",
    "start": 2086.399,
    "duration": 4.24
  },
  {
    "text": "function we do a backup. We use the same",
    "start": 2088.079,
    "duration": 4.721
  },
  {
    "text": "variable the known instance is used. We",
    "start": 2090.639,
    "duration": 3.601
  },
  {
    "text": "just have it somewhere else. So we have",
    "start": 2092.8,
    "duration": 4.16
  },
  {
    "text": "the instance the the short-term memory",
    "start": 2094.24,
    "duration": 4.56
  },
  {
    "text": "known instance long-term memory and our",
    "start": 2096.96,
    "duration": 4.159
  },
  {
    "text": "memory which is real long-term memory.",
    "start": 2098.8,
    "duration": 4.88
  },
  {
    "text": "So we make a copy of the instance there",
    "start": 2101.119,
    "duration": 4.641
  },
  {
    "text": "and then in the function pass push",
    "start": 2103.68,
    "duration": 4.08
  },
  {
    "text": "instance we restore it. when the",
    "start": 2105.76,
    "duration": 4.0
  },
  {
    "text": "behavior tree runs again and is put back",
    "start": 2107.76,
    "duration": 5.28
  },
  {
    "text": "into the instance instance data uh we",
    "start": 2109.76,
    "duration": 5.76
  },
  {
    "text": "then do the copy back from on longterm",
    "start": 2113.04,
    "duration": 4.079
  },
  {
    "text": "memory. The reason we do it in this",
    "start": 2115.52,
    "duration": 3.2
  },
  {
    "text": "function is because this is the function",
    "start": 2117.119,
    "duration": 3.761
  },
  {
    "text": "that calls every time you run a tree",
    "start": 2118.72,
    "duration": 3.92
  },
  {
    "text": "whether it's because you call a start",
    "start": 2120.88,
    "duration": 3.84
  },
  {
    "text": "tree on your core tree on your master",
    "start": 2122.64,
    "duration": 3.76
  },
  {
    "text": "tree or because you should run a sub",
    "start": 2124.72,
    "duration": 3.44
  },
  {
    "text": "tree through the runt or run dynamic",
    "start": 2126.4,
    "duration": 4.64
  },
  {
    "text": "behavior tree task. Uh so we now have a",
    "start": 2128.16,
    "duration": 4.64
  },
  {
    "text": "way to back up and restore the memory",
    "start": 2131.04,
    "duration": 4.079
  },
  {
    "text": "the same way on real does and we have an",
    "start": 2132.8,
    "duration": 4.559
  },
  {
    "text": "exception to this. We only back up nodes",
    "start": 2135.119,
    "duration": 4.72
  },
  {
    "text": "we care about. We don't care about nodes",
    "start": 2137.359,
    "duration": 4.881
  },
  {
    "text": "provided by the engine because we don't",
    "start": 2139.839,
    "duration": 4.161
  },
  {
    "text": "we don't want to worry about Unreal",
    "start": 2142.24,
    "duration": 3.68
  },
  {
    "text": "changing how it handles memory for its",
    "start": 2144.0,
    "duration": 4.32
  },
  {
    "text": "own custom nodes and breaking things and",
    "start": 2145.92,
    "duration": 4.8
  },
  {
    "text": "we only care about our utility couple",
    "start": 2148.32,
    "duration": 4.24
  },
  {
    "text": "custom cooldowns and some other things.",
    "start": 2150.72,
    "duration": 3.76
  },
  {
    "text": "So when we restore the memory we check",
    "start": 2152.56,
    "duration": 3.6
  },
  {
    "text": "the nodes in the tree that is about to",
    "start": 2154.48,
    "duration": 4.56
  },
  {
    "text": "run and we just uh select the memory we",
    "start": 2156.16,
    "duration": 5.84
  },
  {
    "text": "want to restore. With this system, it's",
    "start": 2159.04,
    "duration": 5.12
  },
  {
    "text": "it it works very well because now uh",
    "start": 2162.0,
    "duration": 3.68
  },
  {
    "text": "designers don't need to worry about how",
    "start": 2164.16,
    "duration": 3.439
  },
  {
    "text": "the massive master enemy tree grows",
    "start": 2165.68,
    "duration": 4.32
  },
  {
    "text": "exponentially. We they can just create",
    "start": 2167.599,
    "duration": 5.361
  },
  {
    "text": "single state trees, put them there uh",
    "start": 2170.0,
    "duration": 4.72
  },
  {
    "text": "put it there in the data asset and every",
    "start": 2172.96,
    "duration": 3.76
  },
  {
    "text": "everything's data asset driven. So very",
    "start": 2174.72,
    "duration": 4.16
  },
  {
    "text": "flexible, much easier to handle and it",
    "start": 2176.72,
    "duration": 3.68
  },
  {
    "text": "can scale. You can do whatever",
    "start": 2178.88,
    "duration": 3.84
  },
  {
    "text": "complicated behavior and you will have",
    "start": 2180.4,
    "duration": 4.4
  },
  {
    "text": "just a growing data asset and that's",
    "start": 2182.72,
    "duration": 3.92
  },
  {
    "text": "about it.",
    "start": 2184.8,
    "duration": 4.48
  },
  {
    "text": "Okay, we move, we decide, and the whole",
    "start": 2186.64,
    "duration": 4.24
  },
  {
    "text": "point is to go into combat. And there",
    "start": 2189.28,
    "duration": 3.36
  },
  {
    "text": "are two situations in combat we need to",
    "start": 2190.88,
    "duration": 4.08
  },
  {
    "text": "handle. One is what happens when your",
    "start": 2192.64,
    "duration": 4.16
  },
  {
    "text": "enemy needs to pick between two targets",
    "start": 2194.96,
    "duration": 3.84
  },
  {
    "text": "because we have multip we have co-op",
    "start": 2196.8,
    "duration": 3.36
  },
  {
    "text": "online co-ops. You can play with your",
    "start": 2198.8,
    "duration": 4.08
  },
  {
    "text": "friends. So what we do is we do we apply",
    "start": 2200.16,
    "duration": 4.4
  },
  {
    "text": "a score to each target. This is the",
    "start": 2202.88,
    "duration": 3.12
  },
  {
    "text": "aggro score. The aggro score is a",
    "start": 2204.56,
    "duration": 3.76
  },
  {
    "text": "calculation up to four points. Uh",
    "start": 2206.0,
    "duration": 4.88
  },
  {
    "text": "whether uh the closer to the target, the",
    "start": 2208.32,
    "duration": 4.64
  },
  {
    "text": "better. What's the damage that the",
    "start": 2210.88,
    "duration": 4.32
  },
  {
    "text": "player is inflicting on me? uh it's not",
    "start": 2212.96,
    "duration": 3.84
  },
  {
    "text": "only how high the damage is, but how",
    "start": 2215.2,
    "duration": 3.919
  },
  {
    "text": "long you sustain it. Acro damage is an",
    "start": 2216.8,
    "duration": 4.24
  },
  {
    "text": "artificial score we can add whenever we",
    "start": 2219.119,
    "duration": 3.601
  },
  {
    "text": "want to to create the sensation of",
    "start": 2221.04,
    "duration": 4.16
  },
  {
    "text": "aggressiveness if we want an enemy to",
    "start": 2222.72,
    "duration": 4.08
  },
  {
    "text": "keep targeting the same player and no",
    "start": 2225.2,
    "duration": 3.28
  },
  {
    "text": "matter what don't get distracted. And",
    "start": 2226.8,
    "duration": 3.6
  },
  {
    "text": "then the swap target score is like a",
    "start": 2228.48,
    "duration": 4.0
  },
  {
    "text": "cooldown to avoid ping ponging between",
    "start": 2230.4,
    "duration": 4.48
  },
  {
    "text": "in between targets. Uh there is also the",
    "start": 2232.48,
    "duration": 4.72
  },
  {
    "text": "decay rate. Some scores will be diminish",
    "start": 2234.88,
    "duration": 4.88
  },
  {
    "text": "go diminishing to zero frame by frame",
    "start": 2237.2,
    "duration": 4.879
  },
  {
    "text": "and that's driven by cures designers can",
    "start": 2239.76,
    "duration": 3.92
  },
  {
    "text": "calculate. So this is how it looks in",
    "start": 2242.079,
    "duration": 3.76
  },
  {
    "text": "reality. The enemy is picking the player",
    "start": 2243.68,
    "duration": 4.8
  },
  {
    "text": "in the background. Green line means the",
    "start": 2245.839,
    "duration": 4.561
  },
  {
    "text": "distance is close and the blue one is",
    "start": 2248.48,
    "duration": 3.68
  },
  {
    "text": "the swap score. The other player attacks",
    "start": 2250.4,
    "duration": 3.76
  },
  {
    "text": "the enemy. But this is only attacking",
    "start": 2252.16,
    "duration": 4.48
  },
  {
    "text": "rarely. So it's not sustain attack. But",
    "start": 2254.16,
    "duration": 5.199
  },
  {
    "text": "if we sustain the attack, we will become",
    "start": 2256.64,
    "duration": 4.32
  },
  {
    "text": "a higher danger to the enemy and the",
    "start": 2259.359,
    "duration": 4.48
  },
  {
    "text": "enemy will pick us as a target. So there",
    "start": 2260.96,
    "duration": 6.56
  },
  {
    "text": "it goes and reaction. It dodge it and",
    "start": 2263.839,
    "duration": 5.681
  },
  {
    "text": "then it picks the player. We get the",
    "start": 2267.52,
    "duration": 4.559
  },
  {
    "text": "swap score. the the damage disappear",
    "start": 2269.52,
    "duration": 4.96
  },
  {
    "text": "because it's decaying and as closer it",
    "start": 2272.079,
    "duration": 4.081
  },
  {
    "text": "gets the green line goes higher because",
    "start": 2274.48,
    "duration": 3.92
  },
  {
    "text": "the distance is shorter higher score and",
    "start": 2276.16,
    "duration": 4.24
  },
  {
    "text": "the situation repeats again. Uh if the",
    "start": 2278.4,
    "duration": 3.36
  },
  {
    "text": "other player wants to distract this",
    "start": 2280.4,
    "duration": 3.52
  },
  {
    "text": "enemy will need to attack consistently",
    "start": 2281.76,
    "duration": 5.599
  },
  {
    "text": "to get distracted. Um with this same",
    "start": 2283.92,
    "duration": 5.36
  },
  {
    "text": "concept we handle the other situation.",
    "start": 2287.359,
    "duration": 3.76
  },
  {
    "text": "What happens when many enemies attack",
    "start": 2289.28,
    "duration": 4.319
  },
  {
    "text": "one player? You cannot allow that. You",
    "start": 2291.119,
    "duration": 4.161
  },
  {
    "text": "need to balance the combat otherwise it",
    "start": 2293.599,
    "duration": 3.921
  },
  {
    "text": "will be very unfair. So what we do is",
    "start": 2295.28,
    "duration": 4.48
  },
  {
    "text": "using the acro concept but also the",
    "start": 2297.52,
    "duration": 4.96
  },
  {
    "text": "danger concept is how dangerous an enemy",
    "start": 2299.76,
    "duration": 5.28
  },
  {
    "text": "will be against the player. And this is",
    "start": 2302.48,
    "duration": 5.2
  },
  {
    "text": "a formula that calculates the damage an",
    "start": 2305.04,
    "duration": 4.319
  },
  {
    "text": "enemy can do on the player, the attack",
    "start": 2307.68,
    "duration": 4.08
  },
  {
    "text": "power. And we consider how dangerous it",
    "start": 2309.359,
    "duration": 4.881
  },
  {
    "text": "is. So we have three roles. The first",
    "start": 2311.76,
    "duration": 4.4
  },
  {
    "text": "role is attacker. Attacker is I'm going",
    "start": 2314.24,
    "duration": 3.76
  },
  {
    "text": "to be super aggressive. I'm going to I'm",
    "start": 2316.16,
    "duration": 3.919
  },
  {
    "text": "going to beat the the the player until",
    "start": 2318.0,
    "duration": 5.359
  },
  {
    "text": "it dies. And if the dangerous is high,",
    "start": 2320.079,
    "duration": 5.681
  },
  {
    "text": "we will allow one enemy. If it's low,",
    "start": 2323.359,
    "duration": 4.401
  },
  {
    "text": "more enemies up to three. So, we can",
    "start": 2325.76,
    "duration": 3.92
  },
  {
    "text": "have three simple enemies or one boss",
    "start": 2327.76,
    "duration": 4.24
  },
  {
    "text": "and one simple enemy. We play with that.",
    "start": 2329.68,
    "duration": 4.48
  },
  {
    "text": "When the attacker roles are filled, we",
    "start": 2332.0,
    "duration": 4.48
  },
  {
    "text": "go we move to the cover. Uh cover will",
    "start": 2334.16,
    "duration": 4.48
  },
  {
    "text": "be around the combat. They will be",
    "start": 2336.48,
    "duration": 3.76
  },
  {
    "text": "trying to get to a position where they",
    "start": 2338.64,
    "duration": 3.439
  },
  {
    "text": "can become attackers and they will",
    "start": 2340.24,
    "duration": 4.16
  },
  {
    "text": "attack rarely if they can. And when the",
    "start": 2342.079,
    "duration": 5.841
  },
  {
    "text": "cover uh loca uh roles are filled up,",
    "start": 2344.4,
    "duration": 4.959
  },
  {
    "text": "then everyone else is going to be an",
    "start": 2347.92,
    "duration": 2.64
  },
  {
    "text": "spectator. They're going to be in the",
    "start": 2349.359,
    "duration": 3.121
  },
  {
    "text": "back of the combat moving around, attack",
    "start": 2350.56,
    "duration": 3.44
  },
  {
    "text": "very rarely, but still attacking.",
    "start": 2352.48,
    "duration": 3.76
  },
  {
    "text": "Nobody's idle in our game and they will",
    "start": 2354.0,
    "duration": 4.079
  },
  {
    "text": "move in and out try to become the other",
    "start": 2356.24,
    "duration": 3.839
  },
  {
    "text": "roles using that aggro score and that",
    "start": 2358.079,
    "duration": 3.681
  },
  {
    "text": "dangerous score. And this is how it",
    "start": 2360.079,
    "duration": 3.52
  },
  {
    "text": "looks like. If you pay attention, every",
    "start": 2361.76,
    "duration": 3.44
  },
  {
    "text": "enemy is going to join the combat. Every",
    "start": 2363.599,
    "duration": 4.081
  },
  {
    "text": "enemy will become an attacker. Each role",
    "start": 2365.2,
    "duration": 4.08
  },
  {
    "text": "has its own behavior tree that can be",
    "start": 2367.68,
    "duration": 3.679
  },
  {
    "text": "defined in the data asset by the",
    "start": 2369.28,
    "duration": 4.4
  },
  {
    "text": "designers. So the guys with the stick",
    "start": 2371.359,
    "duration": 4.161
  },
  {
    "text": "when they are cover spectator, they use",
    "start": 2373.68,
    "duration": 3.52
  },
  {
    "text": "range attacks. When they become",
    "start": 2375.52,
    "duration": 4.16
  },
  {
    "text": "attackers, they will try to stuff the",
    "start": 2377.2,
    "duration": 5.2
  },
  {
    "text": "player. And this creates a nice dance.",
    "start": 2379.68,
    "duration": 5.36
  },
  {
    "text": "the combat is alive and and things work",
    "start": 2382.4,
    "duration": 6.48
  },
  {
    "text": "pretty well. And you all see you just",
    "start": 2385.04,
    "duration": 5.6
  },
  {
    "text": "see the three systems we have that we",
    "start": 2388.88,
    "duration": 3.84
  },
  {
    "text": "can use in other games because this will",
    "start": 2390.64,
    "duration": 3.76
  },
  {
    "text": "work with a shooter. Your cover is",
    "start": 2392.72,
    "duration": 3.84
  },
  {
    "text": "behind cover and your spectator might be",
    "start": 2394.4,
    "duration": 4.24
  },
  {
    "text": "doing runs like he's reloading and stuff",
    "start": 2396.56,
    "duration": 5.519
  },
  {
    "text": "like that. And we are using we are",
    "start": 2398.64,
    "duration": 4.959
  },
  {
    "text": "standing this for Lords of the Fallen 2.",
    "start": 2402.079,
    "duration": 4.0
  },
  {
    "text": "We are doing more complicated roles and",
    "start": 2403.599,
    "duration": 5.041
  },
  {
    "text": "so far so good. So this is the end of",
    "start": 2406.079,
    "duration": 4.401
  },
  {
    "text": "the talk. Uh I want to thank you",
    "start": 2408.64,
    "duration": 4.32
  },
  {
    "text": "everybody for being here uh listening to",
    "start": 2410.48,
    "duration": 4.4
  },
  {
    "text": "me. I want to thank Epic for giving me",
    "start": 2412.96,
    "duration": 3.68
  },
  {
    "text": "the opportunity to be here and from the",
    "start": 2414.88,
    "duration": 3.84
  },
  {
    "text": "bottom of my heart to the people that",
    "start": 2416.64,
    "duration": 4.24
  },
  {
    "text": "started Lords of the Fallen and continue",
    "start": 2418.72,
    "duration": 4.16
  },
  {
    "text": "the development because without them I",
    "start": 2420.88,
    "duration": 3.68
  },
  {
    "text": "will be a pretty face behind a screen",
    "start": 2422.88,
    "duration": 3.52
  },
  {
    "text": "instead of a pretty face in front of",
    "start": 2424.56,
    "duration": 4.0
  },
  {
    "text": "one. So thanks a lot to you all. Thank",
    "start": 2426.4,
    "duration": 5.16
  },
  {
    "text": "you.",
    "start": 2428.56,
    "duration": 3.0
  }
]