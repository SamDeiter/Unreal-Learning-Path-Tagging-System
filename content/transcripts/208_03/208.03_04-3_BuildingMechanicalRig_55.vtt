WEBVTT

1
00:00:00.000 --> 00:00:07.219
As I said earlier in the course, the Piston function is essentially a two-way aim constraint

2
00:00:07.219 --> 00:00:11.259
that keeps both bones pointing towards one another.

3
00:00:11.259 --> 00:00:15.480
And we're going to set this up by using some nulls within the bone hierarchy.

4
00:00:15.480 --> 00:00:19.640
Now if you haven't used nulls before, they are essentially like using a group in the

5
00:00:19.640 --> 00:00:22.480
rig hierarchy when you're rigging in Maya.

6
00:00:22.480 --> 00:00:26.120
They give you the extra level of control within the hierarchy, but they can't be selected

7
00:00:26.120 --> 00:00:28.760
or transformed in the viewport.

8
00:00:28.760 --> 00:00:32.320
So let's set that up for one of the Pistons in our leg to get some automatic movement

9
00:00:32.320 --> 00:00:34.560
as the foot is moving.

10
00:00:34.560 --> 00:00:40.920
The first thing I'm going to do is find our Piston function.

11
00:00:40.920 --> 00:00:44.920
And let's see what variables it needs.

12
00:00:44.920 --> 00:00:48.960
So it's looking for a start control and an end control.

13
00:00:48.960 --> 00:00:52.799
And these are the controls that the bones are going to be pointing at.

14
00:00:52.799 --> 00:00:55.000
And it's looking for a start bone and an end bone.

15
00:00:55.000 --> 00:01:00.240
And these, as you probably guess, are the bones that we're going to have point.

16
00:01:00.240 --> 00:01:03.519
The up control is something we're not going to worry about or need for now.

17
00:01:03.519 --> 00:01:07.840
But the axis and the up vector axis are the same sort of idea that we had from the primary

18
00:01:07.840 --> 00:01:10.799
and secondary axis of the IK3 bone.

19
00:01:10.799 --> 00:01:15.920
So the axis is what's pointing down the bone, and the up vector axis is the up vector, the

20
00:01:15.920 --> 00:01:19.319
up axis of our bone.

21
00:01:19.319 --> 00:01:24.340
So the first thing we're going to do is actually create some nulls as the children of these

22
00:01:24.340 --> 00:01:28.859
bones that we're pointing or that we're aiming.

23
00:01:28.859 --> 00:01:31.680
So we're going to use these two bones here.

24
00:01:31.680 --> 00:01:38.260
So the Piston 401, if I right click that, choose new null.

25
00:01:38.260 --> 00:01:43.420
And then the Piston 402, again, right click this and choose new null.

26
00:01:43.420 --> 00:01:48.700
Now you'll see that adds a null under the selected bone inside the hierarchy.

27
00:01:48.700 --> 00:01:52.180
And again, this isn't something you can see or select in the viewport.

28
00:01:52.220 --> 00:01:57.340
It's just something we can use to sort of affect the hierarchy or affect transforms of something

29
00:01:57.340 --> 00:01:59.460
else.

30
00:01:59.460 --> 00:02:02.580
And these are going to be our start and end controls.

31
00:02:02.580 --> 00:02:10.140
So what I'm going to do is just right click, rename, and put underscore start on the end

32
00:02:10.140 --> 00:02:13.020
of this one.

33
00:02:13.020 --> 00:02:20.580
And underscore end, oops, on the end of this one.

34
00:02:21.580 --> 00:02:28.140
And our end bone or end null, should I say, should go into the end control here.

35
00:02:28.140 --> 00:02:31.620
You'll see the type starts off as none, but if you use this small arrow with whatever

36
00:02:31.620 --> 00:02:36.300
you have selected, it will automatically update that type.

37
00:02:36.300 --> 00:02:44.580
And if I select the opposite end to find our start, I'll plug that in there.

38
00:02:44.580 --> 00:02:50.460
Now let's tell the node or the function what bones we want to use to aim towards one another.

39
00:02:50.460 --> 00:02:57.420
So our start bone and our end bone, our start bone should match our start null.

40
00:02:57.420 --> 00:03:02.500
So above the start null, we have the piston 0, sorry, piston 4, 0, 2.

41
00:03:02.500 --> 00:03:05.300
We just plug that in there.

42
00:03:05.300 --> 00:03:08.900
And then I'll use the magnifying glass to find our other null.

43
00:03:08.900 --> 00:03:12.140
Oops, it's not working for some reason.

44
00:03:12.140 --> 00:03:13.140
Try again.

45
00:03:13.140 --> 00:03:14.140
Nope, okay.

46
00:03:14.819 --> 00:03:21.299
Well, we'll select it from the viewport by finding the bone and then finding our null

47
00:03:21.299 --> 00:03:22.699
here.

48
00:03:22.699 --> 00:03:28.259
So this is our end bone that we want to use, the parent of the end control or the end null

49
00:03:28.259 --> 00:03:30.979
that we're using.

50
00:03:30.979 --> 00:03:37.019
So now we have our start and end control and our start and end bone.

51
00:03:37.019 --> 00:03:42.939
And what's going to happen essentially is the start bone is going to point towards

52
00:03:42.939 --> 00:03:45.020
the end null.

53
00:03:45.020 --> 00:03:50.139
And the end bone is going to point towards the start null.

54
00:03:50.139 --> 00:03:54.060
Now this is made possible because the nulls are children of the bones and they'll follow

55
00:03:54.060 --> 00:03:56.819
them wherever they go.

56
00:03:56.819 --> 00:04:02.180
If you were to try and make this without the nulls or controls in the hierarchy, it essentially

57
00:04:02.180 --> 00:04:06.060
wouldn't function correctly.

58
00:04:06.060 --> 00:04:11.099
Now what we need to do is check our axis and our up vector and fill in this information

59
00:04:11.099 --> 00:04:12.099
here.

60
00:04:12.099 --> 00:04:18.060
Now again, make sure that display axis on selection is checked on.

61
00:04:18.060 --> 00:04:24.459
And when we select both of these here, we can see that X is pointing in the direction

62
00:04:24.459 --> 00:04:27.459
that we want to be, you know, we want this bone to be aiming.

63
00:04:27.459 --> 00:04:31.740
So it's pointing in the direction of the mesh and Z is going to be our up axis.

64
00:04:31.740 --> 00:04:34.819
So these are actually set up correctly.

65
00:04:34.819 --> 00:04:41.060
So if we were to connect the logic up here, we shouldn't see anything change in the viewport

66
00:04:41.060 --> 00:04:45.699
yet until we start to move this foot control.

67
00:04:45.699 --> 00:04:51.680
So as soon as we start to move that, you can see that our piston is actually compressing

68
00:04:51.680 --> 00:04:57.040
and expanding, always pointing towards one another as this leg is moving and as the foot

69
00:04:57.040 --> 00:05:04.139
is moving, causing that sort of realistic piston action there.

70
00:05:04.139 --> 00:05:08.139
It's not incredibly obvious, but if I just disconnect this, you will be able to see just

71
00:05:08.139 --> 00:05:17.339
how clear it is and reconnect it up.

72
00:05:17.339 --> 00:05:21.459
And that's how you get a piston functioning with your control rig.

73
00:05:21.459 --> 00:05:25.539
Now this has a lot of different pistons on it.

74
00:05:25.539 --> 00:05:30.300
So you could go around and set this up for each of the pistons inside the character.

75
00:05:30.300 --> 00:05:33.979
And every time that you move the leg or the foot or whatever it is, there's a parent of

76
00:05:33.980 --> 00:05:35.540
these bones.

77
00:05:35.540 --> 00:05:39.900
You're going to get that automatic movement of the piston looking like it's compressing

78
00:05:39.900 --> 00:05:42.700
and expanding as the meshes around it are moving.

