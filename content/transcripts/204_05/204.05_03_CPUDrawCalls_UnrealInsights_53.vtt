WEBVTT

1
00:00:00.000 --> 00:00:06.440
In this lesson, we'll take a look at viewing CPU draw threads as well as looking at Unreal

2
00:00:06.440 --> 00:00:07.440
Insights.

3
00:00:07.440 --> 00:00:09.560
So let's get started.

4
00:00:09.560 --> 00:00:14.900
So the CPU draw threads, what goes on here when you actually run this display, it handles

5
00:00:14.900 --> 00:00:17.240
most of the occlusion processes.

6
00:00:17.240 --> 00:00:19.199
It decides what is visible or not.

7
00:00:19.199 --> 00:00:23.240
And it'll do this in real time as you move your camera around.

8
00:00:23.240 --> 00:00:25.359
It happens per object, not per triangle.

9
00:00:25.359 --> 00:00:26.920
You'll look at your distance calling.

10
00:00:26.920 --> 00:00:32.280
There's a frustrum calling as well as your occlusion calling being looked at.

11
00:00:32.280 --> 00:00:36.280
The console for that is stat init views here.

12
00:00:36.280 --> 00:00:40.560
And you'll see also in stat menu pull down, you can also access it if you don't want to

13
00:00:40.560 --> 00:00:42.079
use the console command.

14
00:00:42.079 --> 00:00:44.180
So you can also grab it there.

15
00:00:44.180 --> 00:00:49.040
So if we go into the next slide here, you'll see it is broken down into two different sections.

16
00:00:49.040 --> 00:00:51.439
The first one being the cycle counters.

17
00:00:51.439 --> 00:00:53.640
Here you'll see the view visibility.

18
00:00:53.640 --> 00:00:58.240
That's the amount of the frame time spent to process actor visibility queries.

19
00:00:58.240 --> 00:01:04.239
Occlusion call, the amount of frame time spent to query the scene for the actors within the

20
00:01:04.239 --> 00:01:07.200
view frustrum that were occluded by other actors.

21
00:01:07.200 --> 00:01:09.280
We have the frustrum call.

22
00:01:09.280 --> 00:01:11.400
And we also have decompress occlusion.

23
00:01:11.400 --> 00:01:16.280
Now there's a few more that we've added as you go through here and you can actually see

24
00:01:16.280 --> 00:01:22.599
what's going on looking at your milliseconds, what may be causing a slowdown in your system.

25
00:01:22.599 --> 00:01:24.839
That's really why you want to look at this.

26
00:01:24.839 --> 00:01:28.839
You're seeing what the CPU is doing to calculate things.

27
00:01:28.839 --> 00:01:33.759
It's almost like you're going in between the calculations between the CPU and the GPU final

28
00:01:33.759 --> 00:01:34.759
output.

29
00:01:34.759 --> 00:01:38.840
So you can actually see where there may be a hold down in the system.

30
00:01:38.840 --> 00:01:43.599
The second section looks at the counters here and we have the process, primitives and frustrum

31
00:01:43.599 --> 00:01:49.119
call primitives, occluded primitives, occluded queries, visible dynamic primitives and visible

32
00:01:49.119 --> 00:01:50.759
static mesh primitives.

33
00:01:50.760 --> 00:01:55.359
Now if we go to the last one here, which is our cycle counters, you'll see I just gave

34
00:01:55.359 --> 00:01:56.359
you a few here.

35
00:01:56.359 --> 00:01:59.160
There's quite a bit in here so I didn't break them all down.

36
00:01:59.160 --> 00:02:03.280
But I gave you some of the key ones to look at for the most part.

37
00:02:03.280 --> 00:02:07.280
And you can go in here and see how things are being digested overall.

38
00:02:07.280 --> 00:02:11.360
But these are some of the key factor ones if your milliseconds you're noticing that things

39
00:02:11.360 --> 00:02:12.879
are taking a bit longer.

40
00:02:12.879 --> 00:02:17.480
Now this will take an account anything with your CPU that's mainly being digested and

41
00:02:17.480 --> 00:02:19.240
running into some problems.

42
00:02:19.240 --> 00:02:23.560
And this will also account if your blueprints are running into here, some issues or your

43
00:02:23.560 --> 00:02:29.439
C++ maybe you made a particular plug-in that's working in your system.

44
00:02:29.439 --> 00:02:33.080
You can actually see if those queries are also messing with the other things that it's

45
00:02:33.080 --> 00:02:34.159
calling upon.

46
00:02:34.159 --> 00:02:38.560
It's basically looking at the middle of the chain and trying to see where those holdups

47
00:02:38.560 --> 00:02:41.320
might be.

48
00:02:41.320 --> 00:02:46.120
So the next one we're going to take a look at here is also you can look at your draw

49
00:02:46.120 --> 00:02:49.200
calls here using a stat RHI.

50
00:02:49.199 --> 00:02:53.159
These can also be punched in the console command and it will pull it up.

51
00:02:53.159 --> 00:02:57.239
And again it will be like an overlay in your system and as you move your camera around

52
00:02:57.239 --> 00:03:04.359
it will tell you exactly give you an update of what's going on with your minimum and maximum

53
00:03:04.359 --> 00:03:10.599
pull on your system here like milliseconds wise what is actually causing things to go

54
00:03:10.599 --> 00:03:12.039
to a crawl.

55
00:03:12.039 --> 00:03:16.280
Currently Unreal has a dynamic instance scene system making it easier to have more items

56
00:03:16.280 --> 00:03:17.319
in the scene.

57
00:03:17.319 --> 00:03:20.439
If the actor shares the same geo and material and this is why we talked about this in the

58
00:03:20.439 --> 00:03:23.479
beginning it gets drawn as one draw call.

59
00:03:23.479 --> 00:03:28.960
To see how it works you can use the command mesh draw command dynamic instancing 0 for

60
00:03:28.960 --> 00:03:31.439
off and 1 for on.

61
00:03:31.439 --> 00:03:34.000
So this is all up to you how you want to process that.

62
00:03:34.000 --> 00:03:38.080
Now if we go briefly into Unreal you'll see that we're actually running at a pretty high

63
00:03:38.080 --> 00:03:39.080
frame rate.

64
00:03:39.080 --> 00:03:42.800
In the beginning I think just things were calling and things were getting into in the

65
00:03:42.800 --> 00:03:43.800
system.

66
00:03:43.800 --> 00:03:47.680
It was a little bit slow but we're actually at a pretty good frame rate right now.

67
00:03:47.680 --> 00:03:52.520
So in our scene if I go up here and I click on here you'll see show frames per second.

68
00:03:52.520 --> 00:03:56.040
We're running at 7670 frames per second.

69
00:03:56.040 --> 00:04:00.720
If you do get this landscape error because this is a bit of a bug currently what you

70
00:04:00.720 --> 00:04:05.080
can do is actually hit play.

71
00:04:05.080 --> 00:04:07.160
All that play for a second.

72
00:04:07.160 --> 00:04:12.640
I don't even have to necessarily run around and then hit escape to get out of there.

73
00:04:12.639 --> 00:04:16.839
And typically this should go away but it looks like it doesn't want to go away.

74
00:04:16.839 --> 00:04:19.319
But that's usually how you would get rid of that.

75
00:04:19.319 --> 00:04:22.000
So you'll see we're going at a really good frame rate here.

76
00:04:22.000 --> 00:04:26.479
Let's actually run those stats here.

77
00:04:26.479 --> 00:04:29.639
So let me get rid of that trace stop for a second.

78
00:04:29.639 --> 00:04:31.519
We'll reference that just a bit.

79
00:04:31.519 --> 00:04:36.599
We're going to go to a stat and it views.

80
00:04:36.599 --> 00:04:37.599
There we go.

81
00:04:37.600 --> 00:04:42.920
Now we're looking at our CPU draw thread here.

82
00:04:42.920 --> 00:04:47.600
And again you can move into your scene and take a look at where things may be a little

83
00:04:47.600 --> 00:04:50.120
bit odd in the hold up here.

84
00:04:50.120 --> 00:04:55.439
Now again these are just multiple tools we give you at Epic Games to be able to work

85
00:04:55.439 --> 00:04:56.439
with these things.

86
00:04:56.439 --> 00:05:02.040
You don't have to necessarily use them but we want to give you options in here.

87
00:05:02.040 --> 00:05:04.439
Let me hit enter to get rid of that one.

88
00:05:04.439 --> 00:05:07.520
And let's go and run that other one.

89
00:05:07.519 --> 00:05:10.959
Let's do that stat.

90
00:05:10.959 --> 00:05:13.959
RHI.

91
00:05:13.959 --> 00:05:16.599
And again you'll see this one here.

92
00:05:16.599 --> 00:05:21.159
Take a look again at our GPU memory pool.

93
00:05:21.159 --> 00:05:26.560
And it's giving us an average letting us know how things are being drawn.

94
00:05:26.560 --> 00:05:28.560
Triangle, triangular wise.

95
00:05:28.560 --> 00:05:30.279
Looking at the triangles.

96
00:05:30.279 --> 00:05:32.439
I can't talk.

97
00:05:32.439 --> 00:05:35.919
But you'll actually be able to get a good analysis of what's going on and millisecond

98
00:05:35.920 --> 00:05:41.520
wise where your hold ups might be.

99
00:05:41.520 --> 00:05:46.080
Now let's take a look at another way to analyze your scene using Unreal Insights.

100
00:05:46.080 --> 00:05:48.160
This is using the trace system.

101
00:05:48.160 --> 00:05:50.439
Let's talk a bit about that and how that works.

102
00:05:50.439 --> 00:05:54.319
And how using the Unreal Insights is actually pretty efficient overall.

103
00:05:54.319 --> 00:06:00.200
There used to be other systems such as session front end but now it's a little bit fractured

104
00:06:00.200 --> 00:06:05.120
and there's some aspects of it that are deprecated so it doesn't quite work the same as it used

105
00:06:05.120 --> 00:06:06.120
to.

106
00:06:06.120 --> 00:06:09.959
Now you can't analyze things and check for bugs kind of but you won't be able to analyze

107
00:06:09.959 --> 00:06:15.800
them on the same type of level that you get here with Unreal Insights as you used to.

108
00:06:15.800 --> 00:06:22.399
So data here is collected from a runtime using the trace system that we've developed.

109
00:06:22.399 --> 00:06:26.160
That Unreal Insights will look at the trace server and look at the application and look

110
00:06:26.160 --> 00:06:27.600
at the game.

111
00:06:27.600 --> 00:06:32.160
So the structured event logging, it's high performance, low overhead.

112
00:06:32.160 --> 00:06:36.520
And what it means by low overhead, you actually have this works in within a reel.

113
00:06:36.520 --> 00:06:42.600
It actually works as an EXE standalone type of function inside of Unreal.

114
00:06:42.600 --> 00:06:47.040
So you don't have to worry about having the editor in the background and giving you kind

115
00:06:47.040 --> 00:06:52.280
of bad data because things are being digested as you're in the editor at the same time as

116
00:06:52.280 --> 00:06:58.440
trying to check for any kind of problems going on in your scene slowdowns.

117
00:06:58.439 --> 00:07:01.719
So it acts as a standalone and works actually pretty efficiently.

118
00:07:01.719 --> 00:07:06.560
It can be activated again as you see from the bottom menu there and I'll run you through

119
00:07:06.560 --> 00:07:11.000
that in just a bit and I'll talk a little bit about the menu in Unreal as well as look

120
00:07:11.000 --> 00:07:15.220
at some of the points of the menu that I have in our slides.

121
00:07:15.220 --> 00:07:17.159
So again, how the system works.

122
00:07:17.159 --> 00:07:20.600
We have the game editor, we have a trace API.

123
00:07:20.600 --> 00:07:24.000
This is going to be looking at whatever host directory you can choose.

124
00:07:24.000 --> 00:07:25.000
It's up to you.

125
00:07:25.000 --> 00:07:26.939
I'll point those things out to you.

126
00:07:26.939 --> 00:07:30.819
You can run a trace file if you want to via console command.

127
00:07:30.819 --> 00:07:36.019
Heck, you can even run a trace file in your Windows console if you want to.

128
00:07:36.019 --> 00:07:37.300
It's up to you.

129
00:07:37.300 --> 00:07:42.300
But for the most part, you can run it via Unreal and it'll act as an individual EXE if you

130
00:07:42.300 --> 00:07:43.300
wish.

131
00:07:43.300 --> 00:07:44.939
So you have several options here.

132
00:07:44.939 --> 00:07:51.180
So Insights works just like an EXE and you'll see there's a session browser UI here.

133
00:07:51.180 --> 00:07:54.339
That's again acting like an EXE.

134
00:07:54.339 --> 00:07:55.980
It's almost like a one to one.

135
00:07:55.980 --> 00:07:57.140
We have a trace server.

136
00:07:57.140 --> 00:08:02.939
You can run the trace unrealtraceserver.exe or Trace Store here, which is the equivalent

137
00:08:02.939 --> 00:08:05.620
inside of the interface.

138
00:08:05.620 --> 00:08:09.700
And it will use a UTrace file that it's going to read and write to.

139
00:08:09.700 --> 00:08:16.620
And eventually when you launch, Unreal Insights is going to analyze things and your Insights

140
00:08:16.620 --> 00:08:21.540
viewer, Unreal Insights EXE is going to trace and analyze things overall.

141
00:08:21.540 --> 00:08:25.900
And all these things are kind of built into the UI now, which is actually kind of nice.

142
00:08:25.899 --> 00:08:30.620
Before you would run the EXE, it would run the UI by itself, but now we have it built

143
00:08:30.620 --> 00:08:31.620
into the editor.

144
00:08:31.620 --> 00:08:33.699
So it acts like an EXE.

145
00:08:33.699 --> 00:08:36.980
So it actually is pretty efficient.

146
00:08:36.980 --> 00:08:38.419
So here are some things to consider.

147
00:08:38.419 --> 00:08:44.340
So Unreal 5 Trace Center for Enabled Channels is catched and the Always On buffers.

148
00:08:44.340 --> 00:08:47.779
So we have trail tracing plus import events.

149
00:08:47.779 --> 00:08:52.019
So it's really going to be there for you to actually look at where your milliseconds are

150
00:08:52.019 --> 00:08:53.179
being hit.

151
00:08:53.500 --> 00:08:56.459
What is bogging down your game?

152
00:08:56.459 --> 00:09:01.539
Also slash, say you're sending things to the wall via ICVFX, you're like, man, I don't

153
00:09:01.539 --> 00:09:02.539
understand what's going on.

154
00:09:02.539 --> 00:09:07.859
You can actually trace that, but not only can you trace that, you can actually, on one

155
00:09:07.859 --> 00:09:09.579
level GPU, you can also do CPU.

156
00:09:09.579 --> 00:09:11.979
So you can do both at the same time.

157
00:09:11.979 --> 00:09:18.059
So you'll see command line arguments here that you can choose once, you can choose where

158
00:09:18.099 --> 00:09:24.019
to put it, and you can choose where that file is going to go to, per se.

159
00:09:24.019 --> 00:09:26.979
And it will be sent to a trace server or to a file.

160
00:09:26.979 --> 00:09:30.699
And again, this is up to you how you choose that within your pipeline, working with your

161
00:09:30.699 --> 00:09:31.699
IT team.

162
00:09:31.699 --> 00:09:37.299
Do you have a server or are you all analyzing a particular scene that everybody can access?

163
00:09:37.299 --> 00:09:38.299
It's up to you.

164
00:09:38.299 --> 00:09:43.539
Are you a small indie house or it may not be as big to grab it, but you can actually

165
00:09:43.539 --> 00:09:45.579
still place it in a certain area.

166
00:09:45.620 --> 00:09:47.620
And then you can also use that data.

167
00:09:47.620 --> 00:09:52.620
You can grab that scene to analyze it from your desk if you needed to.

168
00:09:52.620 --> 00:09:58.620
So Trace is a structured login framework for tracing instrumentation events from a running

169
00:09:58.620 --> 00:09:59.620
process.

170
00:09:59.620 --> 00:10:04.900
The Unreal Trace server is run in the background as a single server instance and can be shared

171
00:10:04.900 --> 00:10:06.900
between multiple projects or branches.

172
00:10:06.900 --> 00:10:08.660
And this is what I mean by that.

173
00:10:08.660 --> 00:10:14.740
So it is a lightweight program that has minimal impact on performance and does not include,

174
00:10:14.779 --> 00:10:16.779
a user interface.

175
00:10:16.779 --> 00:10:18.899
So that can also be run here.

176
00:10:18.899 --> 00:10:22.899
You can do and you'll see it's launched by separate server process executable.

177
00:10:22.899 --> 00:10:28.259
Unreal Trace server.exe located in the engine binaries, Win64 directory folder.

178
00:10:28.259 --> 00:10:33.899
So running this trace system, we can run it through Unreal Insights, but also if you needed

179
00:10:33.899 --> 00:10:37.419
to, you can run things individually if you even want it cleaner.

180
00:10:37.419 --> 00:10:42.299
But overall, we have it pretty set pretty nicely using Unreal Insights to be able to

181
00:10:42.299 --> 00:10:43.620
actually work really well.

182
00:10:43.659 --> 00:10:49.659
But again, the Unreal Trace server can be placed and even isolating things a bit more

183
00:10:49.659 --> 00:10:51.659
to be able to analyze your overall scene.

184
00:10:53.259 --> 00:10:55.019
So the Trace system.

185
00:10:55.019 --> 00:10:57.659
The Trace server has two functionalities.

186
00:10:57.659 --> 00:11:03.860
The Trace recorder listens on port 1981 for incoming trace in connections and records

187
00:11:03.860 --> 00:11:05.860
the live trace stream.

188
00:11:05.860 --> 00:11:11.659
Number two, the second point here, the Trace stores the recorded traces as a file to a path

189
00:11:11.659 --> 00:11:13.220
like users.

190
00:11:13.259 --> 00:11:17.500
Users API data, local engine, common Unreal Trace store.

191
00:11:17.500 --> 00:11:22.820
It watches this folder for changes and exposes a list of available traces to Unreal Insights.

192
00:11:22.820 --> 00:11:27.060
So this trace is being accessed through Unreal Insights.

193
00:11:27.060 --> 00:11:29.580
Unreal Insights uses this Trace system.

194
00:11:29.580 --> 00:11:34.180
But again, like I said on the previous slide, you can run the Trace system by itself.

195
00:11:34.180 --> 00:11:37.860
I don't really know in what cases you might do that.

196
00:11:37.860 --> 00:11:38.940
That's really up to you.

197
00:11:38.940 --> 00:11:42.340
You may just want to isolate things a bit more if you want to.

198
00:11:42.340 --> 00:11:47.980
But I liked being able to use the Unreal Insights and accessing that information because then

199
00:11:47.980 --> 00:11:52.019
you have the full interface to be able to filter out what the data that you need and

200
00:11:52.019 --> 00:11:53.420
what you need to look at.

201
00:11:53.420 --> 00:11:55.500
So just keep those things in mind.

202
00:11:57.180 --> 00:11:59.060
All right, let's talk a little bit about the interface here.

203
00:11:59.060 --> 00:12:01.620
And then we're also going to go back and forth between Unreal.

204
00:12:01.620 --> 00:12:04.860
I'm going to pop into Unreal and then we'll go back and reference these slides.

205
00:12:06.100 --> 00:12:08.620
So ignore my error here on the top here.

206
00:12:08.620 --> 00:12:10.220
This is a bit of a bug.

207
00:12:10.220 --> 00:12:16.220
Usually you hit play, like I mentioned earlier, and you run around and hit escape.

208
00:12:16.220 --> 00:12:17.500
It usually goes away.

209
00:12:17.500 --> 00:12:19.779
So in this case, it doesn't want to and that's fine.

210
00:12:19.779 --> 00:12:24.259
So we find our trace here information.

211
00:12:24.259 --> 00:12:30.700
We can even start a trace individually without pulling up Unreal Insights to make sure everything's

212
00:12:30.700 --> 00:12:31.379
in order.

213
00:12:31.379 --> 00:12:34.460
We could just quickly run a trace if you want to.

214
00:12:34.460 --> 00:12:37.300
Again, you can still look at it through Unreal Insights, which is nice.

215
00:12:37.299 --> 00:12:40.379
It's basically just jumping the gun and not doing it through the interface.

216
00:12:40.379 --> 00:12:43.539
You go straight to the button that does the trace.

217
00:12:43.539 --> 00:12:49.579
Now you can set into a file if you needed to or trace store, which is the directory that you choose.

218
00:12:49.579 --> 00:12:52.379
So in here, I'm going to choose my Unreal Insights.

219
00:12:52.379 --> 00:12:54.539
So I can show you a little bit of what I'm talking about.

220
00:12:56.939 --> 00:13:00.299
So in here, we have a series of traces that we already ran.

221
00:13:00.299 --> 00:13:02.779
Now you're probably wondering, why are some of these pink?

222
00:13:02.779 --> 00:13:07.259
Well, that's because earlier versions of Unreal, this wouldn't always

223
00:13:07.259 --> 00:13:09.899
stop like what you wanted it to.

224
00:13:09.899 --> 00:13:14.819
You would do a trace stop or in this case, if I go to the output log at the up arrow,

225
00:13:14.819 --> 00:13:16.819
you'll see a trace stop.

226
00:13:16.819 --> 00:13:19.899
It used to be used to be able to do stop trace and trace stop.

227
00:13:19.899 --> 00:13:21.340
And there would be a little bit of a delay.

228
00:13:21.340 --> 00:13:24.179
But in 5.3, we've kind of weeded some of that out.

229
00:13:24.179 --> 00:13:26.139
So that's less of an issue.

230
00:13:26.139 --> 00:13:27.659
So let's go and pull this up again.

231
00:13:27.659 --> 00:13:33.059
So again, it's going to give you a full log directory of all the traces that you've run.

232
00:13:33.059 --> 00:13:37.419
Now you can choose platforms if you need to.

233
00:13:37.419 --> 00:13:40.019
There's an app name here, config.

234
00:13:40.019 --> 00:13:45.419
There's some very minimal type of viewing filtering you could do and versions of Unreal.

235
00:13:45.419 --> 00:13:47.819
So all that is available there too.

236
00:13:47.819 --> 00:13:51.739
So what I can do here is also I want to make sure first up I want to check my connection.

237
00:13:51.739 --> 00:13:53.339
Am I going to a server?

238
00:13:53.339 --> 00:13:55.099
What is that IP address?

239
00:13:55.099 --> 00:13:56.739
What is the initial channels?

240
00:13:56.739 --> 00:13:59.379
And you want to check if you can connect.

241
00:13:59.379 --> 00:14:02.379
So you see we are successfully connecting, which is great.

242
00:14:02.379 --> 00:14:04.700
And that allows us to do a trace.

243
00:14:04.700 --> 00:14:08.019
Now once you've created a trace again, you can open a trace.

244
00:14:08.019 --> 00:14:10.220
This is doing a live trace currently.

245
00:14:10.220 --> 00:14:14.820
If I double click on it, it's going to show me the process as it is running.

246
00:14:14.820 --> 00:14:17.460
And let me open this up a little bit so you can see what's going on.

247
00:14:17.460 --> 00:14:18.659
So now it's running a trace.

248
00:14:18.659 --> 00:14:21.700
I do advise moving around your scene if you can.

249
00:14:21.700 --> 00:14:28.340
And that way you can see if the player or your camera in ICVFX is giving you a bit of a slowdown.

250
00:14:28.340 --> 00:14:31.539
Let's go back to Unreal Insights here.

251
00:14:31.579 --> 00:14:32.579
We can see that's running.

252
00:14:32.579 --> 00:14:33.980
Let's go and stop that trace.

253
00:14:33.980 --> 00:14:35.860
So I'm going to go to my output log.

254
00:14:35.860 --> 00:14:40.099
I'm going to go ahead and delete this and hit the up arrow.

255
00:14:40.099 --> 00:14:43.939
And we're going to go to stop or trace dot stop.

256
00:14:43.939 --> 00:14:45.819
And I'm going to hit enter.

257
00:14:45.819 --> 00:14:47.379
Now I'll go back to Unreal Insights.

258
00:14:47.379 --> 00:14:48.620
It should have stopped.

259
00:14:48.620 --> 00:14:49.779
Yay, it did.

260
00:14:49.779 --> 00:14:50.659
And that's good.

261
00:14:50.659 --> 00:14:55.299
We can now zoom in on any areas of data that we need to.

262
00:14:55.299 --> 00:15:01.500
And you can highlight and see, hey, you know, what is the issues that are occurring with my scene?

263
00:15:01.940 --> 00:15:05.379
You also have down below here, we have a log.

264
00:15:05.379 --> 00:15:08.860
Now you can filter all of these if you just want to keep it a little bit cleaner.

265
00:15:08.860 --> 00:15:10.700
Like say, I don't want to look at my frames.

266
00:15:10.700 --> 00:15:11.860
I don't want to look at my timing.

267
00:15:11.860 --> 00:15:13.019
I can turn that off.

268
00:15:13.019 --> 00:15:14.139
I don't want to look at my timers.

269
00:15:14.139 --> 00:15:15.460
I can turn that off.

270
00:15:15.460 --> 00:15:16.820
I can look at my callers.

271
00:15:16.820 --> 00:15:20.059
Say I don't want to see all those in here per count.

272
00:15:20.059 --> 00:15:27.580
If I wanted to, instant count, number of selected items in here, you can double click these at any time within your listing here.

273
00:15:27.580 --> 00:15:30.100
Let's go to GPU specifically.

274
00:15:30.100 --> 00:15:32.379
Turn off CPU.

275
00:15:32.379 --> 00:15:33.659
And I'll say I'll look at my lights.

276
00:15:33.659 --> 00:15:34.980
I'll double click on my lights.

277
00:15:34.980 --> 00:15:38.060
It'll give you a color code of what it is in the scene.

278
00:15:38.060 --> 00:15:40.500
You'll see there's an info here as I slide over.

279
00:15:40.500 --> 00:15:47.340
Tells me the ID for the lights, the GPU, and it gives you a mini rundown of what's going on here.

280
00:15:47.340 --> 00:15:50.259
Now I can go in here and isolate data if I want to.

281
00:15:50.259 --> 00:15:54.940
I can zoom in on a particular area of data and I can double click on that area.

282
00:15:54.940 --> 00:15:57.139
So let's look at a spiking area.

283
00:15:57.139 --> 00:15:58.740
This is a little spiky here.

284
00:15:58.779 --> 00:15:59.299
So let's go on.

285
00:15:59.299 --> 00:16:00.700
What's the issue here?

286
00:16:00.700 --> 00:16:05.060
So I'm going to click on this game frame here and see what it is.

287
00:16:05.060 --> 00:16:10.220
And I can zoom in on it if I want to and analyze what's going on.

288
00:16:10.220 --> 00:16:15.980
And Unreal's giving me a section of data that's being processed for that particular region here.

289
00:16:15.980 --> 00:16:17.659
It's actually kind of nice.

290
00:16:17.659 --> 00:16:20.379
So this is really great to be able to get a handle on this.

291
00:16:20.379 --> 00:16:22.379
And then you'll see the callers come up here.

292
00:16:22.379 --> 00:16:24.539
Now they are populating.

293
00:16:24.539 --> 00:16:26.419
So again, we have the log two.

294
00:16:26.419 --> 00:16:29.139
This will tell me and give me a little bit more data of what's going on.

295
00:16:29.139 --> 00:16:32.899
It tells me what my console commands are, where my errors might be occurring.

296
00:16:32.899 --> 00:16:36.899
In here, I typed in a trace stop versus a stop trace.

297
00:16:36.899 --> 00:16:38.659
I think that's always re-invert those.

298
00:16:40.579 --> 00:16:43.779
I did a stop trace versus a trace stop.

299
00:16:45.179 --> 00:16:50.099
So, but my log is letting me know that that was put in incorrectly and letting me know

300
00:16:50.099 --> 00:16:52.099
any errors that may be occurring.

301
00:16:52.100 --> 00:16:57.060
So again, you have the session information here tells you where things are,

302
00:16:57.060 --> 00:16:58.540
how things are being handled.

303
00:16:58.540 --> 00:17:01.019
And then we also have the timing insights here.

304
00:17:01.019 --> 00:17:05.099
So all of this can be analyzed and I can move these around if I need to.

305
00:17:05.099 --> 00:17:10.620
And I can highlight regions and you'll see this come up and give me my caller information.

306
00:17:10.620 --> 00:17:15.779
I'll look at my direct rendering there, my shadows in here if I need to.

307
00:17:15.779 --> 00:17:17.220
And this is based on my highlights.

308
00:17:17.220 --> 00:17:22.019
So I'm going to click on this, the bypass here, and it's going to pull up the callers again.

309
00:17:22.019 --> 00:17:29.059
Show me what's going on with it milliseconds where I'm being hit and say, hey, lumen reflections.

310
00:17:29.059 --> 00:17:30.539
Is that giving me trouble?

311
00:17:30.539 --> 00:17:35.059
I can see that it's actually not too bad and gives you a full analysis of things.

312
00:17:35.059 --> 00:17:40.859
And again, you can choose CPU and GPU if you need to and you can walk through that.

313
00:17:40.859 --> 00:17:44.220
So let's talk a little bit more about the interface here in the slides.

314
00:17:44.220 --> 00:17:47.460
And I'll give you a quick walkthrough here of how you can analyze things and get up

315
00:17:47.460 --> 00:17:48.900
and running a bit faster.

316
00:17:49.900 --> 00:17:54.940
You can see here again, it says where, who and what are you analyzing?

317
00:17:54.940 --> 00:17:58.500
If we go here, you can run Unreal Insights via the Unreal EXE.

318
00:17:58.500 --> 00:17:59.380
We talked about that.

319
00:17:59.380 --> 00:18:01.259
If you choose to, it's up to you.

320
00:18:01.259 --> 00:18:06.019
You can do it through Windows console commands if you need.

321
00:18:06.019 --> 00:18:10.420
Both are very valid and Unreal has it nice and cleanly in the menu,

322
00:18:10.420 --> 00:18:14.980
which works like an EXE if you need it to work.

323
00:18:14.980 --> 00:18:18.300
So you'll see the interface here a little bit more broken down for you.

324
00:18:18.779 --> 00:18:23.419
Talking about how to use this again, there's a trace store and there's a connection.

325
00:18:23.419 --> 00:18:27.099
And also what and where we talked about that.

326
00:18:27.099 --> 00:18:30.500
So I broke this down for you in the slides so you can actually get a little more

327
00:18:30.500 --> 00:18:32.180
acquainted with it.

328
00:18:32.180 --> 00:18:35.819
Note for games, you can run Insights and keep it open while running your game

329
00:18:35.819 --> 00:18:37.299
for a performance trace.

330
00:18:37.299 --> 00:18:41.980
When doing so, you can run Insights via EXE or via a command prompt.

331
00:18:41.980 --> 00:18:43.579
So you can do that through the Windows command prompt.

332
00:18:43.579 --> 00:18:45.339
So emphasize on that again.

333
00:18:45.339 --> 00:18:48.980
If you wanted to analyze that in an actual build.

334
00:18:50.419 --> 00:18:53.779
So again, the interface breaking it down here, again, we saw the log.

335
00:18:53.779 --> 00:18:56.539
We saw how you can look at the data up close.

336
00:18:56.539 --> 00:19:00.259
We see that you can look at the timing panel overall.

337
00:19:00.259 --> 00:19:02.659
All these things can be filtered the way that you need.

338
00:19:02.659 --> 00:19:06.579
And again, you can look at GPU, CPU, and then look at the callers based on what

339
00:19:06.579 --> 00:19:07.419
you have selected.

340
00:19:09.459 --> 00:19:11.379
So here are some of the commands to work with this.

341
00:19:11.380 --> 00:19:16.220
We have trace enable, trace disable, trace pause, and trace resume.

342
00:19:16.220 --> 00:19:21.580
You have trace send, you have trace file, and you also have trace stop.

343
00:19:21.580 --> 00:19:24.660
And then we also can look at your trace status, where things are at.

344
00:19:24.660 --> 00:19:27.420
And it'll give you a quick brief breakdown there of how things are.

345
00:19:29.740 --> 00:19:31.660
So how to read it, groups.

346
00:19:31.660 --> 00:19:33.940
You can also group and isolate data.

347
00:19:33.940 --> 00:19:40.100
They may be at times a refresh issue requiring you to close in real and

348
00:19:40.099 --> 00:19:41.539
unreal listeners temporarily.

349
00:19:41.539 --> 00:19:46.099
This is particularly for ICB effects or switch for it to get insights to reopen

350
00:19:46.099 --> 00:19:47.819
and sometimes populate data.

351
00:19:47.819 --> 00:19:52.059
Now this is less of a problem with 5.3, but it was a problem with earlier

352
00:19:52.059 --> 00:19:56.779
versions of Unreal where sometimes things would get a little bit delayed.

353
00:19:56.779 --> 00:20:01.099
It also may fail to execute inside of the editor and the EXE will need to be used

354
00:20:01.099 --> 00:20:02.579
if you ever run into that.

355
00:20:02.579 --> 00:20:05.859
But it should not be a problem at this time with 5.3.

356
00:20:05.859 --> 00:20:09.579
But be aware if that occurs, that's a solution for it.

357
00:20:09.579 --> 00:20:13.779
Unreal Insights in Unreal now works like an EXE, like I said before.

358
00:20:13.779 --> 00:20:18.299
So again, it actually is nice and clean and has a nice little standalone

359
00:20:18.299 --> 00:20:21.859
workflow specifically for ICB effects that works great.

360
00:20:21.859 --> 00:20:26.899
But again, you can run it as an EXE or Windows console if you want to run it

361
00:20:26.899 --> 00:20:28.579
while you're playing your packaged game.

362
00:20:30.259 --> 00:20:34.779
Here's a few more links here to help you get on that vein of thought here,

363
00:20:34.779 --> 00:20:36.299
working with Unreal Insights.

364
00:20:36.299 --> 00:20:39.740
And a little YouTube video we had a while back about testing and optimizing

365
00:20:39.740 --> 00:20:41.259
your content.

366
00:20:41.259 --> 00:20:42.700
Thanks again with this one.

367
00:20:42.700 --> 00:20:45.940
In the next video, we're going to look at optimization visualizers when it comes

368
00:20:45.940 --> 00:20:46.980
to analyzing your scene.

