WEBVTT

1
00:00:00.000 --> 00:00:08.279
In this section of our course, we will take a look at the face and body control rig assets

2
00:00:08.279 --> 00:00:12.960
and how we can use these for a forward and backward solve.

3
00:00:12.960 --> 00:00:20.039
We will also look at how to apply animations with and without sequencer and then go over

4
00:00:20.039 --> 00:00:26.420
the body IK retargetor assets and facial animation tools.

5
00:00:26.420 --> 00:00:32.660
We can instantly start to animate metahumans with the body and face control rig which become

6
00:00:32.660 --> 00:00:37.420
accessible once we add a metahuman into sequencer.

7
00:00:37.420 --> 00:00:44.020
Let's jump into Unreal Engine and take a look at the control rig assets.

8
00:00:44.020 --> 00:00:49.939
Inside of Unreal Engine, we can locate the body and face control rig assets a few different

9
00:00:49.939 --> 00:00:51.540
ways.

10
00:00:51.540 --> 00:00:55.820
One way is to select the metahuman in the level.

11
00:00:55.820 --> 00:01:02.619
Then in the details panel, we will start by selecting the body component and then opening

12
00:01:02.619 --> 00:01:06.099
up the skeletal mesh.

13
00:01:06.099 --> 00:01:12.900
Inside of the skeletal mesh asset, in the asset details panel, we can scroll all the

14
00:01:12.900 --> 00:01:17.180
way down to the default animating rig.

15
00:01:17.180 --> 00:01:21.140
This is where the body control rig asset is assigned.

16
00:01:21.140 --> 00:01:27.219
When we double click on this, it may take a moment to open.

17
00:01:27.219 --> 00:01:33.460
In the viewport, the female medium normal body weight preview mesh will be assigned

18
00:01:33.460 --> 00:01:36.340
as this is the shared skeleton.

19
00:01:36.340 --> 00:01:43.099
In the rig graph, over here, we have the forward solve control rig setup.

20
00:01:43.099 --> 00:01:49.780
This is what allows us to create animations by selecting controls that can be adjusted

21
00:01:50.060 --> 00:01:53.739
using forward or inverse kinematics.

22
00:01:53.739 --> 00:01:59.939
Over here, we have the backwards solve setup, which allows us to bake animations to the

23
00:01:59.939 --> 00:02:04.740
control rig and adjust existing animations.

24
00:02:04.740 --> 00:02:13.420
Now, let's go back to the main viewport and locate the face control rig the same way.

25
00:02:13.420 --> 00:02:18.939
With the metahuman still selected in the viewport, we can go to the details panel and

26
00:02:18.939 --> 00:02:21.780
select the face component.

27
00:02:21.780 --> 00:02:29.900
Let's open up the face skeletal mesh and then locate the default animating rig in the asset

28
00:02:29.900 --> 00:02:31.900
details panel.

29
00:02:31.900 --> 00:02:34.579
And now let's open this.

30
00:02:34.579 --> 00:02:42.900
In the viewport, the face archetype skeleton is assigned as this is shared by all metahumans.

31
00:02:42.900 --> 00:02:47.780
This also has a forward and backward solve setup.

32
00:02:47.780 --> 00:02:51.740
This is where the forward solve is located.

33
00:02:51.740 --> 00:02:58.620
You can take some time if you wish to inspect this and see how this is constructed.

34
00:02:58.620 --> 00:03:04.860
Over here, this is where the backward solve is located.

35
00:03:04.860 --> 00:03:12.259
This has been organized so that we can locate where certain controls have been mapped out.

36
00:03:12.259 --> 00:03:22.979
If we move over and zoom in on the jaw controls, we can see the minimum and maximum values

37
00:03:22.979 --> 00:03:25.780
they have assigned to them.

38
00:03:25.780 --> 00:03:32.379
Now before we continue, let's do a quick review of what we just covered.

39
00:03:32.379 --> 00:03:39.379
The body control rig asset located in the common folder is set up with a forward solve

40
00:03:39.379 --> 00:03:41.299
and backward solve.

41
00:03:41.300 --> 00:03:48.180
It is also set up for controls to be adjusted using forward and inverse kinematics.

42
00:03:48.180 --> 00:03:54.860
We can also locate the control rig assets by either going to the common folder or by

43
00:03:54.860 --> 00:04:01.700
opening up the skeletal mesh and then inside of the asset details panel, it will be assigned

44
00:04:01.700 --> 00:04:07.820
as the default animating rig.

45
00:04:07.819 --> 00:04:14.379
The face control rig asset can be found in the common face folder and is also set up

46
00:04:14.379 --> 00:04:17.740
to use a forward and backward solve.

47
00:04:17.740 --> 00:04:23.500
A forward solve allows you to create animations by moving the controls and setting keys for

48
00:04:23.500 --> 00:04:25.500
those controls.

49
00:04:25.500 --> 00:04:32.139
A backward solve allows you to adjust an existing animation by baking the animation to the control

50
00:04:32.139 --> 00:04:33.539
rig.

51
00:04:33.540 --> 00:04:39.140
You can then edit the existing animation curves or you can add on top of the existing

52
00:04:39.140 --> 00:04:43.620
animation with an additive layer.

53
00:04:43.620 --> 00:04:52.259
Let's return back to Unreal Engine and take a look at how we can use the control rigs.

54
00:04:52.259 --> 00:04:57.540
We saw in the metahuman introduction class that we can use a forward solve to create

55
00:04:57.540 --> 00:04:59.540
an animation.

56
00:04:59.540 --> 00:05:05.100
You can choose if you want to use FK or IK for certain controls.

57
00:05:05.100 --> 00:05:09.860
To do this, first locate the global control track.

58
00:05:09.860 --> 00:05:16.340
If I use this drop down arrow and then scroll down to here, this is where we can switch

59
00:05:16.340 --> 00:05:20.259
between FK and IK.

60
00:05:20.259 --> 00:05:26.379
We can switch the arms from FK to IK by checking these on.

61
00:05:26.379 --> 00:05:30.019
By default, the legs are set to IK.

62
00:05:30.019 --> 00:05:36.219
There is also a switch for the spine where we can move all three spine controls together

63
00:05:36.219 --> 00:05:40.740
and there is a switch for the head and neck.

64
00:05:40.740 --> 00:05:46.540
To create an animation using the control rig, select a control.

65
00:05:46.540 --> 00:05:53.019
I'm going to change the gizmo to translate and then set a neutral key by pressing the

66
00:05:53.019 --> 00:06:02.819
letter S or by setting a key inside of the animation details panel or inside of sequencer

67
00:06:02.819 --> 00:06:05.500
over here.

68
00:06:05.500 --> 00:06:11.139
Then move a few frames over and move the control.

69
00:06:11.139 --> 00:06:20.859
I will set this to rotate and we'll make a few adjustments to the arm IK control.

70
00:06:20.860 --> 00:06:24.780
And then I will press S to set a key.

71
00:06:24.780 --> 00:06:30.819
You can continue adjusting controls until you are happy with the animation.

72
00:06:30.819 --> 00:06:36.460
If you want to export this animation as an animation sequence, you can go to the body

73
00:06:36.460 --> 00:06:44.780
component by scrolling all the way up here and then right click on the body component

74
00:06:44.780 --> 00:06:48.860
and select bake to animation sequence.

75
00:06:48.860 --> 00:06:53.100
Once you select this, you can name your animation.

76
00:06:53.100 --> 00:07:00.580
I will name this forward solve and then select a folder you want to direct it to.

77
00:07:00.580 --> 00:07:06.939
I will save it in the course topics folder and when you press OK, leave everything at

78
00:07:06.939 --> 00:07:13.020
default and then select export to animation sequence.

79
00:07:13.019 --> 00:07:17.859
Now we can go to the course topics folder.

80
00:07:17.859 --> 00:07:24.539
I will double click on this to open it and I will dock this window up here.

81
00:07:24.539 --> 00:07:31.500
Now it will be easier to see our animation by changing the skeletal mesh in this window.

82
00:07:31.500 --> 00:07:39.339
Go up here to the top right and in the preview mesh, use the drop down and select this skeletal

83
00:07:39.339 --> 00:07:41.579
mesh.

84
00:07:41.579 --> 00:07:47.219
With this skeletal mesh assigned, if we scrub through here, we can see the animation we

85
00:07:47.219 --> 00:07:52.019
just created using a forward solve.

86
00:07:52.019 --> 00:08:00.259
Now before we move on, let's do a quick review of what we just covered.

87
00:08:00.259 --> 00:08:05.899
When a metahuman is added to sequencer, the body and face control rigs will appear by

88
00:08:05.899 --> 00:08:07.500
default.

89
00:08:07.500 --> 00:08:13.579
We can use the body control rig with a forward solve by moving controls and setting keys

90
00:08:13.579 --> 00:08:15.579
for them.

91
00:08:15.579 --> 00:08:25.100
You can set keys by pressing the letter S or in the animation details panel or in sequencer.

92
00:08:25.100 --> 00:08:30.740
The body control rig comes with both forward and inverse kinematics.

93
00:08:30.740 --> 00:08:38.580
FK allows you to rotate individual controls by adjusting the pitch, roll and yaw.

94
00:08:38.580 --> 00:08:45.740
IK allows you to move a hierarchy of joints and you can adjust the pitch, roll, yaw and

95
00:08:45.740 --> 00:08:50.180
also move it in the X, Y and Z location.

96
00:08:50.180 --> 00:08:57.139
You can switch between FK and IK in the global control track and there are switches for the

97
00:08:57.139 --> 00:09:01.980
arms, legs, spine, neck and head.

98
00:09:01.980 --> 00:09:07.620
Just keep in mind, each FK-IK switch is keyable.

99
00:09:07.620 --> 00:09:15.179
If you are switching between FK and IK, the FK-IK keys will be disabled in that track

100
00:09:15.179 --> 00:09:18.740
if a switch key is not set.

101
00:09:18.740 --> 00:09:22.740
Now let's continue by taking a look at the face control rig.

