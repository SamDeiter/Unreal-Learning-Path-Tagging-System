import{t as v}from"./TagGraphService-CLyOYDIv.js";const y=new Map,h=i=>{if(y.has(i))return y.get(i);let t=0;for(let l=0;l<i.length;l++){const o=i.charCodeAt(l);t=(t<<5)-t+o,t=t&t}const r=Math.abs(t).toString(16);return y.set(i,r),r},f=new Map,$=i=>{const t=i.code||i.title;if(f.has(t))return f.get(t);let r=i.extracted_tags||[];Array.isArray(r)||(Array.isArray(i.tags)?r=i.tags:i.tags&&typeof i.tags=="object"?r=[i.tags.topic,i.tags.level].filter(Boolean):r=[]);const l=Array.isArray(i.gemini_system_tags)?i.gemini_system_tags:[],o=[...r,...l].filter(a=>typeof a=="string");if(o.length===0){const a=i.title?.split(" ")[0]||"UE5";return f.set(t,a),a}const c=o.map(a=>{const d=v.getTag(a)?.relevance?.global_weight||0,g=(a.match(/\./g)||[]).length;return{tag:a,score:d*10-g}});c.sort((a,p)=>p.score-a.score);const n=c[0].tag,s=v.getTag(n)?.display_name||n.split(".").pop();return f.set(t,s),s},w=(i,t)=>{const r=i.tags?.level||i.difficulty||"Intermediate",l={Beginner:["Learn","Understand","Discover","Explore","Get started with"],Intermediate:["Apply","Implement","Build","Create","Develop"],Advanced:["Master","Optimize","Architect","Engineer","Design"]},o=l[r]||l.Intermediate;return o[t%o.length]},A=(i,t,r)=>{const l=$(i),o=w(i,r);let c=i.extracted_tags||(Array.isArray(i.tags)?i.tags:[]);Array.isArray(c)||(c=[]);const n=c.filter(p=>typeof p=="string").slice(0,2),e=n.length>0?n.join(" and "):l,s={Prerequisite:[`Establish ${e} fundamentals`,`Build foundation in ${l} concepts`,`Review essential ${e} prerequisites`],Core:[`${o} ${e} techniques`,`${o} practical ${l} workflows`,`Complete hands-on ${e} exercises`,`${o} real-world ${l} patterns`],Supplemental:[`Deepen understanding of ${e}`,`Explore advanced ${l} techniques`,`Extend knowledge with ${e} deep dive`]},a=s[t]||s.Core;return a[r%a.length]},x=(i,t)=>{if(!t||t.length===0)return[];const r=[],l=t.filter(n=>!n.role||n.role==="Core");l.length>0&&r.push({id:"section-core",title:"Core Curriculum: "+(i.primaryGoal||"Main Path"),items:l.map((n,e)=>({id:h(n.code+"outline"+e),text:A(n,"Core",e),relatedCourse:n.code,courseTitle:n.title}))});const o=t.filter(n=>n.role==="Supplemental");o.length>0&&r.push({id:"section-supp",title:"Deep Dives & Extensions",items:o.map((n,e)=>({id:h(n.code+"outline"+e),text:A(n,"Supplemental",e),relatedCourse:n.code,courseTitle:n.title}))});const c=t.filter(n=>n.role==="Prerequisite");return c.length>0&&r.unshift({id:"section-pre",title:"Foundational Prerequisites",items:c.map((n,e)=>({id:h(n.code+"outline"+e),text:A(n,"Prerequisite",e),relatedCourse:n.code,courseTitle:n.title}))}),r},_=(i,t)=>{if(!t||t.length===0)return[];const r=[],l=i.primaryGoal||"Unreal Engine";r.push({id:"obj-main",text:`Master ${l} fundamentals through ${t.length} targeted learning modules`,type:"goal"});const o=t.flatMap(e=>{let s=e.extracted_tags||[];return Array.isArray(s)||(Array.isArray(e.tags)?s=e.tags:e.tags&&typeof e.tags=="object"?s=[e.tags.topic].filter(Boolean):s=[]),s.filter(a=>typeof a=="string").slice(0,2)}),c=[...new Set(o)].slice(0,4),n=[e=>`Apply ${e} techniques effectively in production pipelines`,e=>`Debug and resolve common ${e} issues independently`,e=>`Follow ${e} best practices and industry standards`,e=>`Optimize ${e} implementations for real-time performance`];return c.forEach((e,s)=>{r.push({id:h(e+s),text:n[s%n.length](e)})}),t.slice(0,3).forEach(e=>{let s;if(e.gemini_outcomes&&Array.isArray(e.gemini_outcomes)&&e.gemini_outcomes.length>0)s=e.gemini_outcomes[0];else{const a=$(e),p=(e.title||"").replace(/_/g," ").replace(/\s+/g," ").trim(),d=p.split(" "),g=d.length>3?d.slice(0,3).join(" "):p;s=`Demonstrate ${a} proficiency through ${g} techniques`}r.push({id:h(e.code+"obj"),text:s,courses:[e.code]})}),r},b=(i,t)=>{const r=t.flatMap(g=>{let u=g.extracted_tags||[];return Array.isArray(u)||(Array.isArray(g.tags)?u=g.tags:g.tags&&typeof g.tags=="object"?u=[g.tags.topic].filter(Boolean):u=[]),u.filter(m=>typeof m=="string")}),l=[...new Set(r)].filter(g=>g.length>3&&!["the","and","for","with"].includes(g.toLowerCase())),o=g=>{if(!g.length)return null;const u=g[0].title||g[0].folder_name||"",m=u.match(/(?:Introduction to |Learn |Master |)(\w+(?:\s+\w+)?)/i);return m?m[1]:u.split(/[-_]/)[0]},c=i.primaryGoal||l.find(g=>g.length>4)||o(t)||"Unreal Engine",n=t.reduce((g,u)=>g+(u.duration_seconds||u.durationSeconds||600)/60,0),e=Math.round(n/60*10)/10,s=e===1?"1 hour":`${e} hours`,a=t.length===1?"1 module":`${t.length} modules`,p=i.skillLevel||t[0]?.gemini_skill_level||"working",d=[{id:"goal-1",text:`Complete ${a} (~${s} of focused learning)`},{id:"goal-2",text:`Achieve ${p.toLowerCase()} proficiency in ${c}`}];return t.length>=3?d.push({id:"goal-3",text:`Build a production-ready project integrating multiple ${c} techniques`}):t.length===1?d.push({id:"goal-3",text:`Apply ${c} skills to a hands-on portfolio project`}):d.push({id:"goal-3",text:`Progress from fundamentals to practical ${c} implementation`}),d},k=i=>{const t={Prerequisite:0,Core:1,Supplemental:2},r={Beginner:0,Intermediate:1,Advanced:2};return[...i].sort((l,o)=>{const c=t[l.role||"Core"],n=t[o.role||"Core"];if(c!==n)return c-n;const e=r[l.tags?.level]??1,s=r[o.tags?.level]??1;if(e!==s)return e-s;const a={High:0,Medium:1,Low:2},p=a[l.weight||"Medium"]??1,d=a[o.weight||"Medium"]??1;return p!==d?p-d:l.title.localeCompare(o.title)})};export{_ as a,x as b,b as g,k as o};
