import{a as y,j as e}from"./index-CxieU-_N.js";import{a as p}from"./vendor-cytoscape-hdah7_Xt.js";import"./vendor-firebase-BQvzIQYL.js";import"./data-courses-aYLqO-5R.js";function I(){const{courses:v}=y(),[o,g]=p.useState(null),[i,u]=p.useState("all"),c=p.useMemo(()=>{const a={},l=["Beginner","Intermediate","Advanced"];return v.forEach(s=>{const t=s.topic||s.tags?.topic;if(!t||t==="Other")return;const r=s.tags?.level||"Intermediate",d=s.duration_minutes||s.total_duration_minutes||0;a[t]||(a[t]={topic:t,levels:{Beginner:[],Intermediate:[],Advanced:[]},totalCourses:0,totalDuration:0}),a[t].levels[r]&&a[t].levels[r].push({code:s.code,title:s.title||s.name,duration:d,hasAI:s.gemini_enriched}),a[t].totalCourses++,a[t].totalDuration+=d}),Object.values(a).map(s=>{const t=s.levels.Beginner.length>0,r=s.levels.Intermediate.length>0,d=s.levels.Advanced.length>0,j=[t,r,d].filter(Boolean).length;let h,m,n;return j===3?(h="ready",m="âœ… Path Ready",n=[]):j===2?(h="incomplete",m="ðŸŸ¡ Almost Ready",n=[],t||n.push("Beginner"),r||n.push("Intermediate"),d||n.push("Advanced")):j===1?(h="incomplete",m="ðŸŸ  Needs Content",n=[],t||n.push("Beginner"),r||n.push("Intermediate"),d||n.push("Advanced")):(h="gap",m="âŒ Major Gap",n=l),{...s,status:h,statusLabel:m,missing:n,levelCount:j}}).sort((s,t)=>t.levelCount-s.levelCount||t.totalCourses-s.totalCourses)},[v]),f=p.useMemo(()=>i==="all"?c:c.filter(a=>a.status===i),[c,i]),x=p.useMemo(()=>{const a=c.filter(t=>t.status==="ready").length,l=c.filter(t=>t.status==="incomplete").length,s=c.filter(t=>t.status==="gap").length;return{ready:a,incomplete:l,gap:s,total:c.length}},[c]),N=a=>{if(!a)return"â€”";const l=Math.floor(a/60),s=a%60;return l>0?`${l}h ${s}m`:`${s}m`};return e.jsxs("div",{className:"path-readiness",children:[e.jsxs("div",{className:"pr-header",children:[e.jsx("h2",{children:"ðŸ“š Path Readiness Dashboard"}),e.jsx("p",{children:"Identify which topics are ready to package as learning paths for your LMS"})]}),e.jsxs("div",{className:"pr-stats",children:[e.jsxs("div",{className:`pr-stat-card ready ${i==="ready"?"active":""}`,onClick:()=>u(i==="ready"?"all":"ready"),children:[e.jsx("div",{className:"pr-stat-value",children:x.ready}),e.jsx("div",{className:"pr-stat-label",children:"Path Ready"}),e.jsx("div",{className:"pr-stat-hint",children:"All 3 levels covered"})]}),e.jsxs("div",{className:`pr-stat-card incomplete ${i==="incomplete"?"active":""}`,onClick:()=>u(i==="incomplete"?"all":"incomplete"),children:[e.jsx("div",{className:"pr-stat-value",children:x.incomplete}),e.jsx("div",{className:"pr-stat-label",children:"Almost Ready"}),e.jsx("div",{className:"pr-stat-hint",children:"Missing 1-2 levels"})]}),e.jsxs("div",{className:`pr-stat-card gap ${i==="gap"?"active":""}`,onClick:()=>u(i==="gap"?"all":"gap"),children:[e.jsx("div",{className:"pr-stat-value",children:x.gap}),e.jsx("div",{className:"pr-stat-label",children:"Major Gaps"}),e.jsx("div",{className:"pr-stat-hint",children:"No courses yet"})]}),e.jsxs("div",{className:`pr-stat-card total ${i==="all"?"active":""}`,onClick:()=>u("all"),children:[e.jsx("div",{className:"pr-stat-value",children:x.total}),e.jsx("div",{className:"pr-stat-label",children:"Total Topics"}),e.jsx("div",{className:"pr-stat-hint",children:"Click to show all"})]})]}),e.jsxs("div",{className:"pr-section",children:[e.jsx("h3",{children:"ðŸ“Š Content Gap Matrix"}),e.jsx("p",{className:"pr-section-desc",children:"Topics Ã— Difficulty Levels â€” Green = Ready, Yellow = Partial, Red = Gap"}),e.jsx("div",{className:"gap-matrix",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"topic-col",children:"Topic"}),e.jsx("th",{className:"level-col",children:"Beginner"}),e.jsx("th",{className:"level-col",children:"Intermediate"}),e.jsx("th",{className:"level-col",children:"Advanced"}),e.jsx("th",{className:"status-col",children:"Status"}),e.jsx("th",{className:"duration-col",children:"Duration"})]})}),e.jsx("tbody",{children:f.map(a=>e.jsxs("tr",{className:`matrix-row ${o===a.topic?"selected":""}`,onClick:()=>g(o===a.topic?null:a.topic),children:[e.jsxs("td",{className:"topic-cell",children:[e.jsx("strong",{children:a.topic}),e.jsxs("span",{className:"course-count",children:[a.totalCourses," courses"]})]}),["Beginner","Intermediate","Advanced"].map(l=>{const s=a.levels[l].length,t=s>=2?"cell-ready":s===1?"cell-partial":"cell-gap",r=s>=2?`âœ… ${s} ${l} courses available â€” ready for learning path`:s===1?`âš ï¸ Only 1 ${l} course â€” add more for variety`:`âŒ No ${l} courses â€” must add content before creating path`;return e.jsx("td",{className:`level-cell ${t}`,title:r,children:s>0?e.jsx("span",{className:"level-count",children:s}):e.jsx("span",{className:"level-missing",children:"â€”"})},l)}),e.jsx("td",{className:"status-cell",children:e.jsx("span",{className:`status-badge ${a.status}`,title:a.status==="ready"?"This topic has courses at all 3 difficulty levels â€” ready to package as a complete learning path":a.status==="incomplete"?`Missing ${a.missing.join(" and ")} level courses â€” add these before creating a learning path`:"No courses available for this topic yet â€” cannot create a learning path",children:a.statusLabel})}),e.jsx("td",{className:"duration-cell",children:N(a.totalDuration)})]},a.topic))})]})})]}),o&&e.jsxs("div",{className:"pr-section detail-panel",children:[e.jsxs("h3",{children:["ðŸ“‹ ",o," â€” Course Breakdown",e.jsx("button",{className:"close-btn",onClick:()=>g(null),children:"Ã—"})]}),(()=>{const a=c.find(l=>l.topic===o);return a?e.jsxs("div",{className:"level-breakdown",children:[["Beginner","Intermediate","Advanced"].map(l=>e.jsxs("div",{className:"level-group",children:[e.jsxs("h4",{className:`level-header ${l.toLowerCase()}`,children:[l,e.jsxs("span",{className:"level-badge",children:[a.levels[l].length," courses"]})]}),a.levels[l].length>0?e.jsx("ul",{className:"course-list",children:a.levels[l].map(s=>e.jsxs("li",{children:[e.jsx("span",{className:"course-code",children:s.code}),e.jsx("span",{className:"course-title",children:s.title}),s.duration>0&&e.jsx("span",{className:"course-duration",children:N(s.duration)}),s.hasAI&&e.jsx("span",{className:"ai-badge",children:"AI"})]},s.code))}):e.jsxs("div",{className:"no-courses",children:["âš ï¸ No ",l.toLowerCase()," courses â€” consider adding content here"]})]},l)),a.missing.length>0&&e.jsxs("div",{className:"recommendation-box",children:[e.jsx("strong",{children:"ðŸ’¡ Recommendation:"})," Add ",a.missing.join(" and ")," level content to complete this learning path."]})]}):null})()]}),e.jsxs("div",{className:"pr-legend",children:[e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot ready"})," 2+ courses (Ready)"]}),e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot partial"})," 1 course (Partial)"]}),e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot gap"})," 0 courses (Gap)"]})]})]})}export{I as default};
