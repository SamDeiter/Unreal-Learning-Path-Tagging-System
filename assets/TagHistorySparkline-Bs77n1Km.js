import{j as e}from"./index-Bx6MaWme.js";import{a as k}from"./vendor-cytoscape-hdah7_Xt.js";import{k as S}from"./data-courses-CecwKQwF.js";import"./vendor-firebase-DNc0QRT5.js";function j(m){return new Date(m+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function L(){const[m,h]=k.useState(null),[d,N]=k.useState(null),{tagNames:v,tagSeries:y,dates:o,totalSeries:l}=k.useMemo(()=>{const s=S.snapshots||[];if(s.length===0)return{tagNames:[],tagSeries:{},dates:[],totalSeries:[]};const a=s.map(t=>t.date),r=s.map(t=>t.totalCourses),i=new Set;s.forEach(t=>Object.keys(t.tags||{}).forEach(c=>i.add(c)));const n=[...i].sort((t,c)=>(s[s.length-1].tags[c]||0)-(s[s.length-1].tags[t]||0)),p={};for(const t of n)p[t]=s.map(c=>c.tags[t]||0);return{tagNames:n,tagSeries:p,dates:a,totalSeries:r}},[]);if(v.length===0||o.length<2)return e.jsxs("div",{className:"sparkline-container",children:[e.jsx("h3",{className:"sparkline-title",children:"ðŸ“ˆ Tag Growth Trends"}),e.jsx("p",{className:"sparkline-empty",children:"Need at least 2 snapshots for trend data."})]});const f=(s,a=80,r=24,i="#6366f1")=>{const n=Math.min(...s),t=Math.max(...s)-n||1,c=s.map((g,x)=>{const u=x/(s.length-1)*a,w=r-(g-n)/t*(r-4)-2;return`${u},${w}`});return e.jsxs("svg",{width:a,height:r,className:"sparkline-svg",children:[e.jsx("polyline",{points:c.join(" "),fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.length>0&&(()=>{const g=s[s.length-1],x=a,u=r-(g-n)/t*(r-4)-2;return e.jsx("circle",{cx:x,cy:u,r:"2.5",fill:i})})()]})},T=o[o.length-1],D=o[0];return e.jsxs("div",{className:"sparkline-container",children:[e.jsxs("div",{className:"sparkline-header",children:[e.jsx("h3",{className:"sparkline-title",children:"ðŸ“ˆ Tag Growth Trends"}),e.jsxs("span",{className:"sparkline-date-range",children:[j(D)," â†’ ",j(T)," (",o.length," snapshots)"]})]}),e.jsx("p",{className:"sparkline-subtitle",children:"How many courses cover each skill area â€” tracked over time to spot growing or stagnant topics."}),e.jsxs("div",{className:"sparkline-total-row",children:[e.jsx("span",{className:"sparkline-total-label",children:"Total Courses"}),f(l,100,28,"#10b981"),e.jsxs("span",{className:"sparkline-total-value",children:[l[l.length-1],e.jsxs("span",{className:"sparkline-delta",children:[l[l.length-1]-l[0]>0?"+":"",l[l.length-1]-l[0]]})]})]}),e.jsx("div",{className:"sparkline-grid",children:v.map(s=>{const a=y[s],r=a[a.length-1],i=a[0],n=r-i,p=m===s;return e.jsxs("div",{className:`sparkline-row ${p?"sparkline-row-hovered":""}`,onMouseEnter:()=>{h(s),N({tag:s,series:a,dates:o})},onMouseLeave:()=>{h(null),N(null)},children:[e.jsx("span",{className:"sparkline-tag-name",title:s,children:s}),f(a),e.jsxs("span",{className:"sparkline-value",children:[r,n!==0&&e.jsxs("span",{className:`sparkline-delta ${n>0?"positive":"negative"}`,children:[n>0?"+":"",n]})]})]},s)})}),d&&e.jsxs("div",{className:"sparkline-tooltip",children:[e.jsx("strong",{children:d.tag}),e.jsx("div",{className:"sparkline-tooltip-series",children:d.dates.map((s,a)=>e.jsxs("span",{children:[j(s),": ",e.jsx("strong",{children:d.series[a]})]},s))})]}),e.jsxs("div",{className:"sparkline-provenance",children:["Updated ",S._meta?.updateFrequency," Â· ",o.length," data points"]})]})}export{L as default};
