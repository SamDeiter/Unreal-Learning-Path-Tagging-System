import{u as w,j as e}from"./index-C_Ghd4Wp.js";import{o as f}from"./generationEngine-DFG9Pqln.js";import"./vendor-cytoscape-hdah7_Xt.js";import"./vendor-firebase-BQvzIQYL.js";import"./data-courses-aYLqO-5R.js";import"./TagGraphService-BOeYVwvg.js";function P(){const{courses:r,removeCourse:h,reorderCourses:m,updateCourseMeta:o}=w(),p=(s,i)=>{s.dataTransfer.setData("text/plain",i.toString()),s.currentTarget.classList.add("dragging")},g=s=>{s.currentTarget.classList.remove("dragging")},x=s=>{s.preventDefault(),s.currentTarget.classList.add("drag-over")},v=s=>{s.currentTarget.classList.remove("drag-over")},u=(s,i)=>{s.preventDefault(),s.currentTarget.classList.remove("drag-over");const t=parseInt(s.dataTransfer.getData("text/plain"),10);if(t===i)return;const n=[...r],[l]=n.splice(t,1);n.splice(i,0,l),m(n)},N=()=>{const s=f(r);m(s)},j=s=>{const i=["path-node"];return s.tags?.level&&i.push(s.tags.level.toLowerCase()),s.role&&i.push(s.role.toLowerCase().replace(/\s+/g,"-")),i.join(" ")};return e.jsxs("div",{className:"assembly-line",children:[e.jsxs("div",{className:"assembly-header",children:[e.jsxs("div",{className:"assembly-title-group",children:[e.jsx("h2",{className:"assembly-title",children:"Your Learning Path"}),r.length>0&&e.jsxs("span",{className:"path-summary",children:[r.length," course",r.length!==1?"s":""," â€¢"," ~",r.reduce((s,i)=>s+(i.duration||0),0).toFixed(1)," hours â€¢"," ",r.reduce((s,i)=>s+(i.video_count||0),0)," videos"]})]}),e.jsxs("div",{className:"assembly-actions",children:[r.length>1&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:N,title:"Reorder courses by prerequisite, core, then supplemental - with high-weight items first",children:"âš¡ Optimize Order"}),r.length>0&&e.jsx("button",{className:"btn btn-danger btn-sm",title:"Remove all courses from your learning path",onClick:()=>{window.confirm(`Clear all ${r.length} courses from your path?`)&&r.forEach(s=>h(s.code))},children:"ðŸ—‘ï¸ Clear All"})]})]}),r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ“š"}),e.jsx("h3",{children:"Start Building Your Path"}),e.jsx("p",{children:"Add courses from the library to create your learning sequence."}),e.jsx("p",{className:"hint",children:"Courses will appear here as a visual timeline."})]}):e.jsxs("div",{className:"path-container",children:[e.jsxs("div",{className:"assembly-tiers",children:[["Beginner","Intermediate","Advanced"].map(s=>{const i=r.filter(t=>(t.tags?.level||"Beginner")===s);return i.length===0?null:e.jsxs("div",{className:"tier-row",children:[e.jsxs("div",{className:"tier-header",children:[e.jsx("span",{className:"tier-title",children:s}),e.jsx("span",{className:"tier-count",children:i.length})]}),e.jsx("div",{className:"tier-track",children:i.map((t,n)=>{const l=r.findIndex(a=>a.code===t.code);return e.jsxs("div",{className:"path-item",children:[n>0&&e.jsxs("div",{className:"connector",children:[e.jsx("div",{className:"connector-line"}),e.jsx("div",{className:"connector-arrow",children:"â–¶"})]}),e.jsxs("div",{className:j(t),draggable:!0,onDragStart:a=>p(a,l),onDragEnd:g,onDragOver:x,onDragLeave:v,onDrop:a=>u(a,l),children:[e.jsxs("div",{className:"node-header",children:[e.jsx("div",{className:"node-number",children:l+1}),e.jsx("button",{className:"node-remove-mini",onClick:a=>{a.stopPropagation(),h(t.code)},children:"Ã—"})]}),e.jsxs("div",{className:"node-content",children:[e.jsx("span",{className:"node-code",children:t.code}),e.jsx("span",{className:"node-title",title:t.title,children:t.title})]}),e.jsxs("div",{className:"node-controls",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),children:[e.jsxs("select",{className:"node-select role",value:t.role||"Core",onChange:a=>{const d=a.target.value;let c="Medium";d==="Prerequisite"&&(c="High"),d==="Supplemental"&&(c="Low"),d==="Next Step"&&(c="Low"),o(t.code,{role:d,weight:c})},title:"Role",children:[e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Prerequisite",children:"Pre-req"}),e.jsx("option",{value:"Supplemental",children:"Supp"}),e.jsx("option",{value:"Next Step",children:"Next Step"})]}),e.jsxs("select",{className:"node-select weight",value:t.weight||"Medium",onChange:a=>o(t.code,{weight:a.target.value}),title:"Priority/Importance: High = Must-learn critical content, Medium = Should-learn standard content, Low = Nice-to-know optional content",children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Med"}),e.jsx("option",{value:"High",children:"High"})]})]})]})]},t.code)})})]},s)}),r.some(s=>!["Beginner","Intermediate","Advanced"].includes(s.tags?.level||"Beginner"))&&e.jsxs("div",{className:"tier-row",children:[e.jsx("div",{className:"tier-header",children:e.jsx("span",{className:"tier-title",children:"Other"})}),e.jsx("div",{className:"tier-track",children:r.filter(s=>!["Beginner","Intermediate","Advanced"].includes(s.tags?.level||"Beginner")).map((s,i)=>{const t=r.findIndex(n=>n.code===s.code);return e.jsxs("div",{className:"path-item",children:[i>0&&e.jsxs("div",{className:"connector",children:[e.jsx("div",{className:"connector-line"}),e.jsx("div",{children:"â–¶"})]}),e.jsxs("div",{className:j(s),draggable:!0,onDragStart:n=>p(n,t),onDragEnd:g,onDragOver:x,onDragLeave:v,onDrop:n=>u(n,t),children:[e.jsxs("div",{className:"node-header",children:[e.jsx("div",{className:"node-number",children:t+1}),e.jsx("button",{className:"node-remove-mini",onClick:n=>{n.stopPropagation(),h(s.code)},children:"Ã—"})]}),e.jsxs("div",{className:"node-content",children:[e.jsx("span",{className:"node-code",children:s.code}),e.jsx("span",{className:"node-title",title:s.title,children:s.title})]}),e.jsxs("div",{className:"node-controls",onClick:n=>n.stopPropagation(),onMouseDown:n=>n.stopPropagation(),children:[e.jsxs("select",{className:"node-select role",value:s.role||"Core",onChange:n=>{const l=n.target.value;let a="Medium";l==="Prerequisite"&&(a="High"),l==="Supplemental"&&(a="Low"),l==="Next Step"&&(a="Low"),o(s.code,{role:l,weight:a})},children:[e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Prerequisite",children:"Pre-req"}),e.jsx("option",{value:"Supplemental",children:"Supp"}),e.jsx("option",{value:"Next Step",children:"Next Step"})]}),e.jsxs("select",{className:"node-select weight",value:s.weight||"Medium",onChange:n=>o(s.code,{weight:n.target.value}),title:"Priority/Importance: High = Must-learn critical content, Medium = Should-learn standard content, Low = Nice-to-know optional content",children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Med"}),e.jsx("option",{value:"High",children:"High"})]})]})]})]},s.code)})})]})]}),e.jsxs("div",{className:"path-footer-add",children:[e.jsx("div",{className:"connector-vertical",children:e.jsx("div",{className:"connector-line-v"})}),e.jsx("div",{className:"path-item add-more",children:e.jsxs("div",{className:"add-node",children:[e.jsx("span",{children:"+"}),e.jsx("span",{className:"add-text",children:"Add More"})]})})]})]})]})}export{P as default};
