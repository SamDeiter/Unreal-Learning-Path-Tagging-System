import{j as e}from"./index-cVtMbPRy.js";import{a as f}from"./vendor-cytoscape-hdah7_Xt.js";import{k as S}from"./data-courses-C0PVQiZw.js";import"./vendor-firebase-BEnYNivV.js";function k(m){return new Date(m+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function $(){const[m,h]=f.useState(null),[p,j]=f.useState(null),y=()=>{const s=S.snapshots||[];if(s.length===0)return{tagNames:[],tagSeries:{},dates:[],totalSeries:[]};const a=s.map(t=>t.date),r=s.map(t=>t.totalCourses),i=new Set;s.forEach(t=>Object.keys(t.tags||{}).forEach(c=>i.add(c)));const n=[...i].sort((t,c)=>(s[s.length-1].tags[c]||0)-(s[s.length-1].tags[t]||0)),d={};for(const t of n)d[t]=s.map(c=>c.tags[t]||0);return{tagNames:n,tagSeries:d,dates:a,totalSeries:r}},{tagNames:N,tagSeries:D,dates:o,totalSeries:l}=y();if(N.length===0||o.length<2)return e.jsxs("div",{className:"sparkline-container",children:[e.jsx("h3",{className:"sparkline-title",children:"ðŸ“ˆ Tag Growth Trends"}),e.jsx("p",{className:"sparkline-empty",children:"Need at least 2 snapshots for trend data."})]});const v=(s,a=80,r=24,i="#6366f1")=>{const n=Math.min(...s),t=Math.max(...s)-n||1,c=s.map((g,x)=>{const u=x/(s.length-1)*a,E=r-(g-n)/t*(r-4)-2;return`${u},${E}`});return e.jsxs("svg",{width:a,height:r,className:"sparkline-svg",children:[e.jsx("polyline",{points:c.join(" "),fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.length>0&&(()=>{const g=s[s.length-1],x=a,u=r-(g-n)/t*(r-4)-2;return e.jsx("circle",{cx:x,cy:u,r:"2.5",fill:i})})()]})},T=o[o.length-1],w=o[0];return e.jsxs("div",{className:"sparkline-container",children:[e.jsxs("div",{className:"sparkline-header",children:[e.jsx("h3",{className:"sparkline-title",children:"ðŸ“ˆ Tag Growth Trends"}),e.jsxs("span",{className:"sparkline-date-range",children:[k(w)," â†’ ",k(T)," (",o.length," snapshots)"]})]}),e.jsx("p",{className:"sparkline-subtitle",children:"How many courses cover each skill area â€” tracked over time to spot growing or stagnant topics."}),e.jsxs("div",{className:"sparkline-total-row",children:[e.jsx("span",{className:"sparkline-total-label",children:"Total Courses"}),v(l,100,28,"#10b981"),e.jsxs("span",{className:"sparkline-total-value",children:[l[l.length-1],e.jsxs("span",{className:"sparkline-delta",children:[l[l.length-1]-l[0]>0?"+":"",l[l.length-1]-l[0]]})]})]}),e.jsx("div",{className:"sparkline-grid",children:N.map(s=>{const a=D[s],r=a[a.length-1],i=a[0],n=r-i,d=m===s;return e.jsxs("div",{className:`sparkline-row ${d?"sparkline-row-hovered":""}`,onMouseEnter:()=>{h(s),j({tag:s,series:a,dates:o})},onMouseLeave:()=>{h(null),j(null)},children:[e.jsx("span",{className:"sparkline-tag-name",title:s,children:s}),v(a),e.jsxs("span",{className:"sparkline-value",children:[r,n!==0&&e.jsxs("span",{className:`sparkline-delta ${n>0?"positive":"negative"}`,children:[n>0?"+":"",n]})]})]},s)})}),p&&e.jsxs("div",{className:"sparkline-tooltip",children:[e.jsx("strong",{children:p.tag}),e.jsx("div",{className:"sparkline-tooltip-series",children:p.dates.map((s,a)=>e.jsxs("span",{children:[k(s),": ",e.jsx("strong",{children:p.series[a]})]},s))})]}),e.jsxs("div",{className:"sparkline-provenance",children:["Updated ",S._meta?.updateFrequency," Â· ",o.length," data points"]})]})}export{$ as default};
