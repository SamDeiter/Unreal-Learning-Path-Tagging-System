import{a as j,j as e}from"./index-DwcL2RPU.js";import{a as o}from"./vendor-cytoscape-hdah7_Xt.js";import"./vendor-firebase-BQvzIQYL.js";import"./data-courses-Deba-lkK.js";function C(){const{courses:d}=j(),[n,m]=o.useState(null),i=o.useMemo(()=>{const s={},t={};return d.forEach(a=>{[...a.gemini_system_tags||[],...a.ai_tags||[],...a.transcript_tags||[],...Object.keys(a.tags||{})].forEach(x=>{const l=x.toLowerCase().trim();l&&l.length>2&&(s[l]=(s[l]||0)+1,t[l]||(t[l]=[]),t[l].find(g=>g.id===a.id)||t[l].push({id:a.id,title:a.title,level:String(a.level||a.difficulty||a.tags?.level||"Beginner"),duration:a.duration}))})}),Object.entries(s).sort((a,r)=>r[1]-a[1]).slice(0,12).map(([a,r])=>({name:a,count:r,courses:t[a]||[]}))},[d]),h=["#58a6ff","#a371f7","#3fb950","#f0883e","#f778ba","#db6d28","#768390","#54aeff","#7ee787","#ff9bce","#d2a8ff","#79c0ff"],u=o.useMemo(()=>Math.max(...i.map(s=>s.count),1),[i]),f=s=>{m(n===s?null:s)},c=i.find(s=>s.name===n);return e.jsxs("div",{className:"tag-trends",children:[e.jsxs("div",{className:"trends-header",children:[e.jsxs("h4",{children:["ðŸ“Š Tag Distribution",e.jsxs("span",{className:"info-tooltip",children:["â“˜",e.jsx("span",{className:"tooltip-content",children:"Click any tag to see courses tagged with it"})]})]}),e.jsxs("span",{className:"trends-subtitle",children:["From ",d.length," courses â€¢ Click to drill down"]})]}),e.jsx("div",{className:"trends-bar-chart",children:i.map((s,t)=>e.jsxs("div",{className:`bar-row ${n===s.name?"selected":""}`,onClick:()=>f(s.name),children:[e.jsx("span",{className:"bar-label",title:s.name,children:s.name}),e.jsx("div",{className:"bar-container",children:e.jsx("div",{className:"bar-fill",style:{width:`${s.count/u*100}%`,backgroundColor:h[t%h.length]}})}),e.jsx("span",{className:"bar-value",children:s.count})]},s.name))}),c&&e.jsxs("div",{className:"tag-courses-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h5",{children:['ðŸ“š Courses tagged "',n,'"']}),e.jsx("button",{className:"close-btn",onClick:()=>m(null),children:"Ã—"})]}),e.jsxs("div",{className:"courses-list",children:[c.courses.slice(0,8).map(s=>e.jsxs("div",{className:"course-item",children:[e.jsx("span",{className:"course-title",children:s.title}),e.jsx("span",{className:`course-level ${String(s.level||"").toLowerCase()}`,children:s.level})]},s.id)),c.courses.length>8&&e.jsxs("div",{className:"more-courses",children:["+",c.courses.length-8," more courses"]})]})]})]})}export{C as default};
