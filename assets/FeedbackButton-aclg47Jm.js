const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/feedbackService-ZhNzH3OL.js","assets/logger-CCt-ETDk.js","assets/vendor-firebase-BEnYNivV.js","assets/index-BFyi6y4T.js","assets/vendor-cytoscape-hdah7_Xt.js","assets/data-courses-CW9cTscP.js","assets/index-Cb8I_5o9.css"])))=>i.map(i=>d[i]);
import{j as e,_ as F}from"./index-BFyi6y4T.js";import{a as i,P as c}from"./vendor-cytoscape-hdah7_Xt.js";import{d as _}from"./logger-CCt-ETDk.js";import{X as S}from"./x-HbUnH9yy.js";import{c as g}from"./createLucideIcon-YhyuTmrv.js";import{M as k}from"./message-square-B9rM_FIo.js";import{L}from"./lightbulb-B9S7Im5O.js";import"./vendor-firebase-BEnYNivV.js";import"./data-courses-CW9cTscP.js";const q=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],I=g("bug",q);const P=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],A=g("circle-check-big",P);const E=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],O=g("upload",E);function M({isOpen:m,onClose:n,user:a}){const[l,d]=i.useState("bug"),[b,x]=i.useState(""),[u,h]=i.useState([]),[j,y]=i.useState(!1),[z,v]=i.useState(!1),[C,p]=i.useState(null),N=i.useRef(null);if(!m)return null;const T=s=>{s.target.files&&h(t=>[...t,...Array.from(s.target.files)])},R=s=>{h(t=>t.filter((o,r)=>r!==s))},w=async s=>{s.preventDefault(),y(!0);try{if(a&&a.uid&&a.uid!=="anonymous"){const{submitFeedbackToFirestore:t}=await F(async()=>{const{submitFeedbackToFirestore:r}=await import("./feedbackService-ZhNzH3OL.js");return{submitFeedbackToFirestore:r}},__vite__mapDeps([0,1,2,3,4,5,6])),o=await t(l,b,u,a.uid,a.email||"");_("ðŸ“ Feedback submitted:",o),p(o.persisted)}else{const{recordFormFeedback:t}=await F(async()=>{const{recordFormFeedback:f}=await import("./feedbackService-ZhNzH3OL.js");return{recordFormFeedback:f}},__vite__mapDeps([0,1,2,3,4,5,6])),o=u.map(f=>f.name),r=t(l,b,o);_("ðŸ“ Feedback saved locally:",r),p("local")}}catch{p("local")}v(!0),y(!1),setTimeout(()=>{v(!1),x(""),h([]),d("bug"),p(null),n()},2500)};return e.jsx("div",{className:"feedback-overlay",onClick:n,children:e.jsxs("div",{className:"feedback-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"feedback-close",onClick:n,children:e.jsx(S,{size:20})}),z?e.jsxs("div",{className:"feedback-success",children:[e.jsx(A,{size:48,className:"success-icon"}),e.jsx("h3",{children:"Thank You!"}),e.jsx("p",{children:"Your feedback helps us improve the learning path."}),C==="firestore"&&e.jsx("p",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"0.5rem"},children:"âœ… Saved to our database"})]}):e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"feedback-header",children:[e.jsxs("h2",{children:[e.jsx(k,{size:24,className:"icon-inline"})," Send Feedback"]}),e.jsx("p",{children:"Found a bug or have an idea? Let us know."})]}),e.jsxs("div",{className:"feedback-type-selector",children:[e.jsxs("button",{type:"button",className:`type-btn ${l==="bug"?"active":""}`,onClick:()=>d("bug"),children:[e.jsx(I,{size:16})," Bug Report"]}),e.jsxs("button",{type:"button",className:`type-btn ${l==="feature"?"active":""}`,onClick:()=>d("feature"),children:[e.jsx(L,{size:16})," Feature Request"]}),e.jsxs("button",{type:"button",className:`type-btn ${l==="general"?"active":""}`,onClick:()=>d("general"),children:[e.jsx(k,{size:16})," General"]})]}),e.jsxs("div",{className:"feedback-form-group",children:[e.jsx("label",{htmlFor:"feedback-desc",children:l==="bug"?"Describe the issue and steps to reproduce:":"Tell us about your suggestion:"}),e.jsx("textarea",{id:"feedback-desc",value:b,onChange:s=>x(s.target.value),placeholder:l==="bug"?"e.g., When I click 'Next', the screen goes black...":"e.g., It would be great if we could...",required:!0,rows:5})]}),e.jsxs("div",{className:"feedback-form-group",children:[e.jsxs("label",{className:"file-upload-label",children:[e.jsx("span",{className:"label-text",children:"Attachments (Screenshots/Logs)"}),e.jsxs("button",{type:"button",className:"upload-trigger-btn",onClick:()=>N.current?.click(),children:[e.jsx(O,{size:14})," Add Files"]}),e.jsx("input",{ref:N,type:"file",multiple:!0,accept:"image/*,.log,.txt",onChange:T,style:{display:"none"}})]}),u.length>0&&e.jsx("div",{className:"file-list",children:u.map((s,t)=>e.jsxs("div",{className:"file-item",children:[e.jsx("span",{className:"file-name",children:s.name}),e.jsx("button",{type:"button",className:"file-remove",onClick:()=>R(t),children:e.jsx(S,{size:12})})]},t))})]}),e.jsx("div",{className:"feedback-actions",children:e.jsx("button",{type:"submit",className:"feedback-submit",disabled:j,children:j?"Uploading...":"Submit Feedback"})})]})]})})}M.propTypes={isOpen:c.bool.isRequired,onClose:c.func.isRequired,user:c.shape({uid:c.string,email:c.string})};function D({user:m}){const[n,a]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"feedback-fab",onClick:()=>a(!0),"aria-label":"Send Feedback",title:"Report a bug or suggestion",children:[e.jsx(k,{size:20}),e.jsx("span",{className:"feedback-label",children:"Feedback"})]}),e.jsx(M,{isOpen:n,onClose:()=>a(!1),user:m})]})}D.propTypes={user:c.shape({uid:c.string,email:c.string})};export{D as default};
