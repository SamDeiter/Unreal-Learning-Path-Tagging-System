import{o as xe,s as fe,j as e,_ as je}from"./index-Coq7OcDr.js";import{a as f,P as m}from"./vendor-cytoscape-hdah7_Xt.js";import{d as R,q as W,b as Ne,f as ye,g as ke}from"./data-courses-CDlycmza.js";import{d as ve,L as be}from"./logger-HX1K3TKu.js";import{c as E}from"./createLucideIcon-YhyuTmrv.js";import{C as Y}from"./check-eCXpKYRG.js";import{X as we}from"./x-HbUnH9yy.js";const Ce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],P=E("arrow-right",Ce);const _e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Se=E("book-open",_e);const Te=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],$e=E("flask-conical",Te);const Ie=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Le=E("star",Ie);const qe=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Ee=E("thumbs-up",qe);function Re({problemSummary:s,courses:t,diagnosis:n}){if(!t||t.length===0)return{title:"Your Learning Path",intro:"Let's solve your problem step by step.",instructors:[],totalDuration:null};const l=Pe(t),a=ze(t),c=Ve({instructors:l,courseCount:t.length,totalDuration:a,rootCauses:n?.root_causes||[]});return{title:`Your Path: ${Oe(s)}`,intro:c,instructors:l,totalDuration:a,courseCount:t.length,rootCauses:n?.root_causes||[]}}function Ae(s,t,n){if(!t)return{type:"completion",text:"üéâ Congratulations! You've completed your learning path.",subtext:"You now have the skills to solve this problem and similar ones in the future."};const l=M(s),a=M(t),c=t.title||t.name||"the next lesson";return l&&a&&l!==a?{type:"transition",text:`Now let's hear from ${a}`,subtext:`${a} will cover: ${n||c}`,instructor:a}:{type:"continuation",text:`Next up: ${c}`,subtext:n||null,instructor:a}}function Pe(s){const t=new Set,n=[];return s.forEach(l=>{const a=M(l);if(a&&!t.has(a))t.add(a),n.push({name:a,courses:[l.title||l.name],totalDuration:O(l)});else if(a){const c=n.find(o=>o.name===a);c&&(c.courses.push(l.title||l.name),c.totalDuration+=O(l))}}),n}function M(s){return s&&(s.instructor||s.author||s.creator||s.teacher||De(s.title||s.name))||null}function De(s){if(!s)return null;const t=s.match(/\bby\s+([A-Z][a-zA-Z]+(?:\s+[A-Z][a-zA-Z]+)?)/i);if(t)return t[1];const n=s.match(/\bwith\s+([A-Z][a-zA-Z]+(?:\s+[A-Z][a-zA-Z]+)?)/i);return n?n[1]:null}function ze(s){const t=s.reduce((n,l)=>n+O(l),0);return Me(t)}function O(s){return s?s.duration_seconds?s.duration_seconds:s.duration_minutes?s.duration_minutes*60:s.videos?.length?s.videos.reduce((t,n)=>t+(n.duration_seconds||0),0):0:0}function Me(s){if(!s||s<=0)return null;const t=Math.floor(s/3600),n=Math.floor(s%3600/60);return t>0?n>0?`${t} hr ${n} min`:`${t} hr`:`${n} min`}function Oe(s){if(!s)return"Learning Path";if(s.length<=80)return s;const t=s.slice(0,80),n=t.lastIndexOf(" ");return(n>30?t.slice(0,n):t)+"‚Ä¶"}function Ve({instructors:s,courseCount:t,totalDuration:n,rootCauses:l}){const a=[];if(l.length>0&&a.push(`We've identified ${l.length} root cause${l.length>1?"s":""} for your issue:`),s.length===1)a.push(`${s[0].name} will guide you through ${t} lesson${t>1?"s":""}.`);else if(s.length>1){const c=s.map(u=>u.name),o=c.pop();a.push(`You'll learn from ${c.join(", ")} and ${o}.`)}else a.push(`You have ${t} lesson${t>1?"s":""} to complete.`);return n&&a.push(`Total time: ${n}.`),a.join(" ")}function Ge(s,t){const n=Math.round((s+1)/t*100);return{text:`Video ${s+1} of ${t}`,percent:n,isComplete:s+1>=t}}function Ye(s,t,n,l=0){const c=[...s?.canonical_tags||[],...s?.gemini_system_tags||[],...s?.transcript_tags||[],...s?.extracted_tags||[],...Array.isArray(s?.tags)?s.tags:[]].map(r=>typeof r=="string"?r.split(".").pop():r.name||r.display_name||"").filter(Boolean).filter((r,j,y)=>y.indexOf(r)===j),o=s?.gemini_skill_level||"Intermediate",u=(t||"").toLowerCase(),i=[],d=new Set,g=r=>{for(const j of r)d.has(j.task)||(d.add(j.task),i.push(j))};if(u){const r=Object.keys(R).sort((j,y)=>y.length-j.length);for(const j of r)u.includes(j)&&g(R[j])}const p=[...c].sort((r,j)=>{const y=u.includes(r.toLowerCase())?1:0;return(u.includes(j.toLowerCase())?1:0)-y});for(const r of p){const j=r.toLowerCase();R[j]&&g(R[j])}if(i.length>0){const r=i[l%i.length];return{task:r.task,hint:r.hint,expectedResult:r.expectedResult,docsUrl:r.docsUrl||null,difficulty:o}}const k=c[0]||(n?n.split(/\s+/).slice(0,3).join(" "):"this concept"),h=n?`"${n}"`:"this lesson",x=s?.gemini_outcomes?.[0]||"";return{task:t?`Open UE5 and apply the technique from ${h} to address "${t}". In the Details panel, identify which ${k} settings you changed and note the before/after values.`:`Open UE5, create a test Actor, and set up ${k} from scratch following the approach from ${h}. Document which panels and properties you used.`,hint:x?`Focus on: ${x}. Check Details panel and World Settings for relevant options.`:`Look for ${k} options in the Details panel, Modes panel, or Project Settings ‚Üí Engine.`,expectedResult:t?`Your original issue ("${t}") should be resolved or visibly improved in the viewport. Compare before/after values in the Details panel to confirm the change took effect.`:`You should see ${k} applied correctly in the viewport or preview. The Details panel should reflect the new settings, and the editor should show no warnings related to your changes.`,difficulty:o}}const U="ue5_learning_progress";function Q(){try{const s=localStorage.getItem(U);return s?{...D(),...JSON.parse(s)}:D()}catch{return D()}}function D(){return{completedPaths:[],tagsEncountered:{},totalVideosWatched:0,reflections:[],streak:{lastDate:null,count:0}}}function Fe(s){try{localStorage.setItem(U,JSON.stringify(s))}catch(t){ve("[LearningProgress] Failed to save:",t.message)}}function We(s,t,n){const l=Q(),a=new Date().toISOString().split("T")[0];l.completedPaths.includes(s)||l.completedPaths.push(s);for(const c of t){const o=c.extracted_tags||c.tags||[];for(const u of o){const i=typeof u=="string"?u:u.name||u.display_name;i&&(l.tagsEncountered[i]=(l.tagsEncountered[i]||0)+1)}}if(l.totalVideosWatched+=t.length,l.streak.lastDate!==a){const c=new Date;c.setDate(c.getDate()-1);const o=c.toISOString().split("T")[0];l.streak.lastDate===o?l.streak.count+=1:l.streak.count=1,l.streak.lastDate=a}return n&&n.trim().length>0&&l.reflections.push({date:a,pathId:s,text:n.trim()}),Fe(l),l}function Ue(){const s=Q(),t=new Date().toISOString().split("T")[0],n=new Date;n.setDate(n.getDate()-1);const l=n.toISOString().split("T")[0],a=s.streak.lastDate===t||s.streak.lastDate===l;return{count:a?s.streak.count:0,isActive:a}}const v={INTRO:"intro",PLAYING:"playing",QUIZ:"quiz",CHALLENGE:"challenge",BRIDGE:"bridge",COMPLETE:"complete"};function Qe({courses:s,diagnosis:t,problemSummary:n,pathSummary:l,onComplete:a,onExit:c}){const[o,u]=f.useState(v.INTRO),[i,d]=f.useState(0),[g,p]=f.useState(0),[k,h]=f.useState(""),[x,r]=f.useState(null),[j,y]=f.useState(!0);f.useEffect(()=>xe($=>{r($),y(!1)}),[]);const S=f.useCallback(async()=>{y(!0);const{error:N}=await fe();N&&console.error("[GuidedPlayer] Sign in failed:",N),y(!1)},[]),_=s[i]||null,C=s[i+1]||null,I=_?.videos||[],b=I[g]||I[0]||null,w=g<I.length-1,T=g>0||i>0,L=w||!!C,A=I.length,q=f.useMemo(()=>Re({problemSummary:n,courses:s,diagnosis:t}),[n,s,t]),se=f.useMemo(()=>Ue(),[]),V=f.useMemo(()=>s.reduce((N,$)=>N+($.videos?.length||1),0),[s]),G=f.useMemo(()=>{let N=0;for(let $=0;$<i;$++)N+=s[$]?.videos?.length||1;return N+g},[s,i,g]),te=f.useMemo(()=>Ge(G,V),[G,V]),ne=f.useMemo(()=>{if(o!==v.BRIDGE)return null;const N=_?.gemini_outcomes?.[0]||null;return Ae(_,C,N)},[o,_,C]),ae=f.useMemo(()=>o!==v.CHALLENGE?null:Ye(_,n,b?.title,i),[o,_,n,b,i]),ie=f.useCallback(()=>{u(v.PLAYING)},[]),re=f.useCallback(()=>{if(_?._readingStep){C?(d(N=>N+1),p(0),u(v.PLAYING)):(u(v.COMPLETE),a?.());return}if(w)p(N=>N+1);else{const N=W[_?.code];N&&Object.keys(N).length>0?u(v.QUIZ):u(v.CHALLENGE)}},[w,_,C,a]),le=f.useCallback(()=>{if(g>0)p(N=>N-1);else if(i>0){const N=s[i-1]?.videos||[];d($=>$-1),p(Math.max(0,N.length-1))}},[g,i,s]),ce=f.useCallback(()=>{w?p(N=>N+1):C&&(d(N=>N+1),p(0))},[w,C]),oe=f.useCallback(()=>{d(0),p(0),u(v.PLAYING)},[]),de=f.useCallback(()=>{u(v.CHALLENGE)},[]),he=f.useCallback(()=>{C?(d(N=>N+1),p(0),u(v.PLAYING)):(u(v.COMPLETE),a?.())},[C,a]),ue=f.useCallback(()=>{d(N=>N+1),p(0),u(v.PLAYING)},[]),pe=f.useCallback(N=>{d(N),p(0),u(v.PLAYING)},[]),me=f.useCallback(()=>{const N=n?`path-${n.replace(/\s+/g,"-").toLowerCase().slice(0,40)}-${Date.now()}`:`path-${Date.now()}`;We(N,s,k),c?.()},[n,s,k,c]),ge=k.trim().split(/\s+/).filter(Boolean).length;return{stage:o,currentIndex:i,videoIndex:g,reflectionText:k,setReflectionText:h,user:x,authLoading:j,currentCourse:_,nextCourse:C,currentVideos:I,currentVideo:b,hasMoreVideos:w,hasPreviousVideo:T,hasNextVideo:L,courseVideoCount:A,introContent:q,streak:se,progress:te,bridgeContent:ne,challengeContent:ae,pathSummary:l,wordCount:ge,courses:s,handleSignIn:S,handleStartLearning:ie,handleVideoComplete:re,handlePreviousVideo:le,handleNextVideo:ce,handleBackToPath:oe,handleQuizComplete:de,handleChallengeComplete:he,handleContinue:ue,handleSkipTo:pe,handleFinish:me,onExit:c}}function Z({challengeContent:s,onComplete:t}){return e.jsxs("div",{className:"challenge-card",children:[e.jsx("div",{className:"challenge-icon",children:"üî®"}),e.jsx("h3",{children:"Try It Yourself"}),e.jsx("div",{className:"challenge-difficulty",children:e.jsx("span",{className:`difficulty-badge ${s.difficulty.toLowerCase()}`,children:s.difficulty})}),e.jsx("p",{className:"challenge-task",children:s.task}),s.expectedResult&&e.jsxs("div",{className:"challenge-expected",children:[e.jsx("span",{className:"expected-label",children:"üëÅÔ∏è What to look for:"})," ",s.expectedResult]}),e.jsxs("div",{className:"challenge-hint",children:[e.jsx("span",{className:"hint-label",children:"üí° Hint:"})," ",s.hint]}),s.docsUrl&&e.jsx("a",{className:"docs-link",href:s.docsUrl,target:"_blank",rel:"noopener noreferrer",children:"üìñ Read the official UE5 docs ‚Üí"}),e.jsx("button",{className:"challenge-done-btn",onClick:t,children:"I tried it ‚Üí"}),e.jsx("button",{className:"challenge-skip-btn",onClick:t,children:"Skip challenge"})]})}Z.propTypes={challengeContent:m.shape({task:m.string.isRequired,hint:m.string.isRequired,expectedResult:m.string,docsUrl:m.string,difficulty:m.string.isRequired}).isRequired,onComplete:m.func.isRequired};m.shape({type:m.string.isRequired,text:m.string.isRequired,subtext:m.string}).isRequired,m.func.isRequired;function Ze(s){const t=new Set;for(const n of s)(n.ai_tags||[]).forEach(l=>t.add(l)),(n._matchedKeywords||[]).forEach(l=>t.add(l));return[...t].slice(0,8)}function Be(s){return s.map(t=>{const n=t.gemini_outcomes||[];return{title:(t.title||t.name||t.videos?.[0]?.title||"Lesson").replace(/\s+Part\s+[A-Z]$/i,"").trim(),outcomes:n.slice(0,3),courseCode:t.code}}).filter(t=>t.outcomes.length>0)}function B({courses:s,totalDuration:t,reflectionText:n,onReflectionChange:l,wordCount:a,onFinish:c,onBackToPath:o,problemSummary:u}){const[i,d]=f.useState(!1);f.useEffect(()=>{if(n.trim())try{localStorage.setItem("lp_reflection_draft",JSON.stringify({text:n,timestamp:Date.now(),courseCount:s.length}))}catch{}},[n,s.length]),f.useEffect(()=>{try{const x=JSON.parse(localStorage.getItem("lp_reflection_draft")||"null");x?.text&&!n&&l(x.text)}catch{}},[]);const g=Ze(s),p=Be(s),k=i?p:p.slice(0,3),h=s.reduce((x,r)=>x+(r.videos?.length||1),0);return e.jsxs("div",{className:"complete-card",children:[e.jsx("div",{className:"complete-icon",children:"üéâ"}),e.jsx("h2",{children:"Path Complete!"}),u&&e.jsxs("p",{className:"complete-problem-context",children:["You explored: ",e.jsx("strong",{children:u})]}),e.jsx("p",{children:"You've learned the skills to solve this problem and similar ones in the future."}),e.jsxs("div",{className:"complete-stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"üìö"}),e.jsx("span",{className:"stat-value",children:s.length}),e.jsx("span",{className:"stat-label",children:"Lessons"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"üé¨"}),e.jsx("span",{className:"stat-value",children:h}),e.jsx("span",{className:"stat-label",children:"Videos"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"‚è±"}),e.jsx("span",{className:"stat-value",children:t||"‚Äî"}),e.jsx("span",{className:"stat-label",children:"Total Time"})]}),g.length>0&&e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"üè∑Ô∏è"}),e.jsx("span",{className:"stat-value",children:g.length}),e.jsx("span",{className:"stat-label",children:"Topics"})]})]}),p.length>0&&e.jsxs("div",{className:"complete-takeaways",children:[e.jsx("h3",{children:"üéØ Key Takeaways"}),e.jsx("div",{className:"takeaway-list",children:k.map((x,r)=>e.jsxs("div",{className:"takeaway-card",children:[e.jsxs("h4",{className:"takeaway-title",children:[e.jsx("span",{className:"takeaway-number",children:r+1}),x.title]}),e.jsx("ul",{className:"takeaway-outcomes",children:x.outcomes.map((j,y)=>e.jsx("li",{children:j},y))})]},x.courseCode||r))}),p.length>3&&e.jsx("button",{className:"show-more-takeaways",onClick:()=>d(x=>!x),children:i?"Show less":`Show ${p.length-3} more`})]}),g.length>0&&e.jsxs("div",{className:"complete-topics",children:[e.jsx("h3",{children:"üè∑Ô∏è Topics Covered"}),e.jsx("div",{className:"topic-chips",children:g.map(x=>e.jsx("span",{className:"topic-chip",children:x.replace(/_/g," ")},x))})]}),e.jsxs("div",{className:"reflection-area",children:[e.jsx("h3",{children:"üìù What was your main takeaway?"}),e.jsx("p",{className:"reflection-subtitle",children:"Writing your reflection helps cement what you learned."}),e.jsx("textarea",{className:"reflection-input",placeholder:"I learned that...",value:n,onChange:x=>l(x.target.value),rows:4}),e.jsxs("div",{className:"reflection-meta",children:[a===0&&e.jsx("span",{className:"word-hint",children:"Try writing a few sentences"}),a>0&&a<10&&e.jsxs("span",{className:"word-hint",children:[a," words ‚Äî keep going!"]}),a>=10&&e.jsx("span",{className:"word-hint done",children:"Great reflection! ‚úì"})]})]}),e.jsxs("div",{className:"completion-actions",children:[e.jsx("button",{className:"finish-btn",onClick:()=>{c();try{localStorage.removeItem("lp_reflection_draft")}catch{}},children:n.trim()?"Save & Finish":"Back to Problems"}),o&&e.jsx("button",{className:"back-to-path-btn",onClick:o,children:"‚Üê Back to Learning Path"})]})]})}B.propTypes={courses:m.array.isRequired,totalDuration:m.string,reflectionText:m.string.isRequired,onReflectionChange:m.func.isRequired,wordCount:m.number.isRequired,onFinish:m.func.isRequired,onBackToPath:m.func,problemSummary:m.string};function F(s){return s?s.replace(/\.mp4$/i,"").replace(/_/g," ").replace(/^[A-Z]{2,5}\s+\d[\d.]*\s*/gi,"").replace(/^\d+\.\d+\s*/g,"").replace(/^0*\d{1,3}\s+/g,"").replace(/^(\w+)[ _]\1[ _]/i,"").replace(/^(?:and|or)\s+/i,"").replace(/\s+\d{1,3}\s*(NEW|FINAL|EDIT|EDITED|OLD|DRAFT|v\d+)?\s*$/gi,"").replace(/\s+(NEW|FINAL|EDIT|EDITED|OLD|DRAFT|v\d+)\s*$/gi,"").replace(/([a-z])(\d{2})$/g,"$1").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z])/g,"$1 $2").replace(/\s+(?:5[0-5]|4[0-9])$/g,"").replace(/[-]+\s*$/g,"").replace(/^\s*[-]+/g,"").replace(/\s{2,}/g," ").trim()||s:"Untitled Video"}function H({courses:s,currentIndex:t,onSkipTo:n}){const l=s.map(a=>a.code);return e.jsxs("div",{className:"course-sidebar",children:[e.jsx("h4",{children:"Your Path"}),e.jsx("div",{className:"sidebar-courses",children:s.map((a,c)=>{const o=Ne[a.code],u=o?.prerequisites?.filter(i=>!l.includes(i))||[];return e.jsxs("button",{className:`sidebar-course ${c===t?"active":""} ${c<t?"completed":""}`,onClick:()=>n(c),title:F(a.videos?.[0]?.title||a.title||a.name),children:[e.jsx("span",{className:"index",children:c<t?"‚úì":c+1}),e.jsx("span",{className:"title",children:F(a.videos?.[0]?.title||a.title||a.name)}),o?.difficulty&&e.jsx("span",{className:`difficulty-tag ${o.difficulty}`,children:o.difficulty}),u.length>0&&e.jsx("span",{className:"prereq-warning",title:`Recommended: ${u.join(", ")} first`,children:"‚ö†Ô∏è"})]},a.code||c)})})]})}H.propTypes={courses:m.array.isRequired,currentIndex:m.number.isRequired,onSkipTo:m.func.isRequired};function K({courseCode:s,videoKey:t,onComplete:n,onSkip:l}){const[a,c]=f.useState(0),[o,u]=f.useState(null),[i,d]=f.useState(!1),[g,p]=f.useState(0),[k,h]=f.useState(!1),x=f.useMemo(()=>{if(!s||!t)return[];const b=W[s];if(!b)return[];if(b[t])return b[t];const w=L=>(L||"").replace(/\.mp4$/i,"").replace(/^[\d._]+/,"").replace(/[\s_]+/g,"").toLowerCase(),T=w(t);for(const[L,A]of Object.entries(b)){const q=w(L);if(q===T||q.includes(T)||T.includes(q))return A}return[]},[s,t]);if(x.length===0)return null;const r=x[a],j=o===r?.correct,y=x.length,S=b=>{i||u(b)},_=()=>{o!==null&&(d(!0),o===r.correct&&p(b=>b+1))},C=()=>{a<y-1?(c(b=>b+1),u(null),d(!1)):h(!0)},I=()=>{n({score:g,total:y})};if(k){const b=Math.round(g/y*100),w=b>=80?Le:b>=50?Ee:Se,T=b>=80?"Excellent! You've got a strong grasp of this material.":b>=50?"Good effort! Consider rewatching for the topics you missed.":"You might want to re-watch this section before moving on.";return e.jsx("div",{className:"quiz-card",children:e.jsxs("div",{className:"quiz-score-summary",children:[e.jsx("div",{className:"score-icon-container",children:e.jsx(w,{size:48,className:"score-icon"})}),e.jsxs("h3",{children:[g,"/",y," Correct"]}),e.jsx("div",{className:"score-bar",children:e.jsx("div",{className:"score-fill",style:{width:`${b}%`}})}),e.jsx("p",{className:"score-message",children:T}),e.jsxs("button",{className:"quiz-continue-btn",onClick:I,children:["Continue ",e.jsx(P,{size:16})]})]})})}return e.jsxs("div",{className:"quiz-card",children:[e.jsxs("div",{className:"quiz-header",children:[e.jsx("span",{className:"quiz-icon",children:e.jsx($e,{size:20})}),e.jsx("h3",{children:"Quick Check"}),e.jsxs("span",{className:"quiz-progress",children:[a+1," / ",y]})]}),e.jsx("p",{className:"quiz-question",children:r.question}),e.jsx("div",{className:"quiz-options",children:r.options.map((b,w)=>{let T="quiz-option";return o===w&&(T+=" selected"),i&&(w===r.correct?T+=" correct":o===w&&(T+=" incorrect")),e.jsxs("button",{className:T,onClick:()=>S(w),disabled:i,children:[e.jsx("span",{className:"option-letter",children:String.fromCharCode(65+w)}),e.jsx("span",{className:"option-text",children:b}),i&&w===r.correct&&e.jsx("span",{className:"option-icon",children:e.jsx(Y,{size:16})}),i&&o===w&&w!==r.correct&&e.jsx("span",{className:"option-icon",children:e.jsx(we,{size:16})})]},w)})}),i&&r.explanation&&e.jsxs("div",{className:`quiz-explanation ${j?"correct":"incorrect"}`,children:[e.jsx("span",{className:"explanation-icon",children:j?e.jsx(Y,{size:16}):e.jsx(be,{size:16})}),e.jsx("p",{children:r.explanation})]}),e.jsxs("div",{className:"quiz-actions",children:[i?e.jsx("button",{className:"quiz-next-btn",onClick:C,children:a<y-1?e.jsxs(e.Fragment,{children:["Next Question ",e.jsx(P,{size:16})]}):e.jsxs(e.Fragment,{children:["See Results ",e.jsx(P,{size:16})]})}):e.jsx("button",{className:"quiz-check-btn",onClick:_,disabled:o===null,children:"Check Answer"}),e.jsx("button",{className:"quiz-skip-btn",onClick:l,children:"Skip Quiz"})]})]})}K.propTypes={courseCode:m.string,videoKey:m.string,onComplete:m.func.isRequired,onSkip:m.func.isRequired};const He=new Set(["the","and","for","with","this","that","are","was","has","have","not","can","into","from","how","you","your","will","would","also","just","like","more","very","some","want","need","make","use","used","using","help","helpful","helps","get","getting","let","look","going","come","here","there","know","thing","really","actually","basically","something","everything","slow","fast","leading","exhibiting","experiencing","causing","about","been","being","could","does","doing","done","each","even","every","first","give","good","great","kind","made","much","over","part","right","same","see","show","start","still","take","tell","than","them","then","these","they","those","through","time","took","turn","way","well","what","when","where","which","while","work","working","unreal","engine","introduction","quick"]),Ke=new Set(["gonna","going","really","actually","basically","right","thing","things","about","would","could","should","there","their","these","those","where","which","being","doing","using","other","first","second","third","after","before","every","still","again","already","engine","unreal","because","simply","called","allows","looking","provides"]);function z(s){return(s||"").replace(/\.mp4$/i,"").replace(/^[\d._]+/,"").replace(/[\s_]+/g,"").toLowerCase()}function J({courseCode:s,videoTitle:t,problemSummary:n,matchedKeywords:l}){const[a,c]=f.useState(null);f.useEffect(()=>{let i=!1;return je(()=>import("./data-transcripts-CYT280mV.js"),[]).then(d=>{i||c(d.default||d)}),()=>{i=!0}},[]);const o=f.useMemo(()=>{if(!s||!a)return[];const i=a[s];if(!i)return[];const d=z(t);let g=null;for(const[r,j]of Object.entries(i))if(z(r)===d){g=j;break}if(!g)for(const[r,j]of Object.entries(i)){const y=z(r);if(y.includes(d)||d.includes(y)){g=j;break}}if(!g||g.length===0)return[];const p=[];if(n&&p.push(...n.toLowerCase().split(/\s+/).filter(r=>r.length>3&&!He.has(r))),l&&p.push(...l.map(r=>(typeof r=="string"?r:r.display_name||r.id||"").toLowerCase())),p.length===0){const r=g.filter(y=>y.start&&y.start!=="0:00");if(r.length===0)return[];const j=Math.max(1,Math.floor(r.length/3));return r.filter((y,S)=>S%j===0).slice(0,3).map(y=>({...y,score:0,isChapter:!0}))}const h=g.map(r=>{const j=r.text.toLowerCase();let y=0;const S=[];for(const _ of p)j.includes(_)&&(y+=10,S.includes(_)||S.push(_));return{...r,score:y,hits:[...new Set(S)]}}).filter(r=>r.score>0).sort((r,j)=>j.score-r.score);if(h.length>0){const r=h.slice(0,3);return r.sort((j,y)=>{const S=_=>{const C=(_||"0:00").split(":").map(Number);return C.length===3?C[0]*3600+C[1]*60+C[2]:C[0]*60+(C[1]||0)};return S(j.start)-S(y.start)}),r}const x=Math.max(1,Math.floor(g.length/3));return g.filter((r,j)=>j%x===0).slice(0,3).map(r=>({...r,score:0,isChapter:!0}))},[s,t,n,l,a]),u=f.useCallback(i=>{if(i.summary)return i.summary;const g=(i.text||"").replace(/[.,;:!?'"()]/g,"").split(/\s+/).filter(h=>h.length>=5&&!Ke.has(h.toLowerCase())).map(h=>h.toLowerCase()),p={};for(const h of g)p[h]=(p[h]||0)+1;const k=Object.entries(p).sort((h,x)=>x[1]-h[1]).slice(0,3).map(([h])=>h.charAt(0).toUpperCase()+h.slice(1));return k.length>0?k.join(", "):"Overview"},[]);return o.length===0?null:e.jsx("div",{className:"video-info-cards",children:e.jsxs("div",{className:"info-card transcript-card",children:[e.jsx("h4",{children:o[0]?.isChapter?"üìã Video Chapters":`üéØ üé¨ Video Callouts: ${n||"your search"}`}),e.jsx("div",{className:"timestamp-list",children:o.map((i,d)=>e.jsxs("div",{className:`timestamp-item ${i.score>0?"relevant":""}`,children:[e.jsx("span",{className:"timestamp-badge",children:i.start}),e.jsx("span",{className:"timestamp-text",children:u(i)})]},d))})]})})}J.propTypes={courseCode:m.string,videoTitle:m.string,problemSummary:m.string,matchedKeywords:m.array};function Je(s){if(!s||typeof s!="string")return s;s=s.replace(/\s*\[\d+(?:[,\s]*\d+)*\]/g,"").trim();const t=[];let n=s,l=0;for(;n.length>0;){const a=[{re:/\*\*(.+?)\*\*/,wrap:i=>e.jsx("strong",{children:i},l++)},{re:/\*(.+?)\*/,wrap:i=>e.jsx("em",{children:i},l++)},{re:/`([^`]+)`/,wrap:i=>e.jsx("code",{className:"inline-code",children:i},l++)},{re:/\[([^\]]+)\]\(([^)]+)\)/,wrap:(i,d)=>{const g=/^https?:\/\//i.test(d)?d:"#";return e.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",children:i},l++)}}];let c=null,o=n.length,u=null;for(const i of a){const d=n.match(i.re);d&&d.index<o&&(c=d,o=d.index,u=i)}if(!c){t.push(n);break}o>0&&t.push(n.slice(0,o)),t.push(u.wrap(c[1],c[2])),n=n.slice(o+c[0].length)}return t}function X(s){const t=Qe(s);return e.jsxs("div",{className:"guided-player",children:[e.jsxs("div",{className:"progress-bar",children:[e.jsx("div",{className:"progress-fill",style:{width:`${t.progress.percent}%`}}),e.jsx("span",{className:"progress-text",children:t.progress.text})]}),t.stage===v.INTRO&&e.jsx(Xe,{introContent:t.introContent,streak:t.streak,courses:t.courses,pathSummary:t.pathSummary,user:t.user,authLoading:t.authLoading,onSignIn:t.handleSignIn,onStart:t.handleStartLearning}),t.stage===v.PLAYING&&t.currentCourse&&!t.currentCourse._readingStep&&e.jsx(es,{course:t.currentCourse,currentVideos:t.currentVideos,currentVideo:t.currentVideo,videoIndex:t.videoIndex,hasMoreVideos:t.hasMoreVideos,microLesson:s.microLesson,courses:t.courses,onVideoComplete:t.handleVideoComplete,onExit:t.onExit}),t.stage===v.PLAYING&&t.currentCourse&&t.currentCourse._readingStep&&e.jsx(ee,{course:t.currentCourse,stepNumber:t.currentIndex+1,totalSteps:t.courses.length,onComplete:t.handleVideoComplete,onExit:t.onExit}),t.stage===v.QUIZ&&e.jsx(K,{courseCode:t.currentCourse?.code,videoKey:t.currentVideo?.title||t.currentVideo?.name||"",onComplete:t.handleQuizComplete,onSkip:t.handleQuizComplete}),t.stage===v.CHALLENGE&&t.challengeContent&&e.jsx(Z,{challengeContent:t.challengeContent,onComplete:t.handleChallengeComplete}),t.stage===v.COMPLETE&&e.jsx(B,{courses:t.courses,totalDuration:t.introContent.totalDuration,reflectionText:t.reflectionText,onReflectionChange:t.setReflectionText,wordCount:t.wordCount,onFinish:t.handleFinish,onBackToPath:t.handleBackToPath,problemSummary:s.problemSummary}),t.stage!==v.INTRO&&t.stage!==v.COMPLETE&&e.jsxs("div",{className:"sidebar-column",children:[e.jsx(H,{courses:t.courses,currentIndex:t.currentIndex,onSkipTo:t.handleSkipTo}),t.stage===v.PLAYING&&t.currentCourse&&e.jsx(J,{courseCode:t.currentCourse.code,videoTitle:t.currentVideo?.title||t.currentVideo?.name||"",problemSummary:s.problemSummary,matchedKeywords:t.currentCourse._matchedKeywords})]})]})}X.propTypes={courses:m.array.isRequired,diagnosis:m.object,problemSummary:m.string,microLesson:m.object,pathSummary:m.shape({path_summary:m.string,topics_covered:m.arrayOf(m.string)}),onComplete:m.func,onExit:m.func};X.defaultProps={diagnosis:null,problemSummary:"",microLesson:null,pathSummary:null,onComplete:()=>{},onExit:()=>{}};function Xe({introContent:s,streak:t,courses:n,pathSummary:l,user:a,authLoading:c,onSignIn:o,onStart:u}){return e.jsxs("div",{className:"intro-card",children:[e.jsx("h2",{children:s.title}),e.jsx("p",{className:"intro-text",children:s.intro}),s.rootCauses?.length>0&&e.jsx("ol",{className:"root-cause-list",children:s.rootCauses.map((i,d)=>e.jsx("li",{children:i.replace(/\s*\[\d+\]/g,"")},d))}),t.isActive&&t.count>1&&e.jsxs("div",{className:"streak-badge",children:["üî• ",t.count,"-day learning streak!"]}),e.jsxs("div",{className:"course-preview",children:[e.jsx("h3",{children:"üìö What You'll Learn"}),l?.path_summary&&!/unavailable/i.test(l.path_summary)&&e.jsx("div",{className:"path-summary-section",children:e.jsx("p",{className:"path-summary-text",children:l.path_summary})}),e.jsxs("div",{className:"course-list",children:[n.slice(0,5).map((i,d)=>{const g=ye[i.code]||[],p=i.videos?.[0]?.title||i.title||i.name;return e.jsxs("div",{className:"course-preview-item",children:[e.jsx("span",{className:"number",children:d+1}),e.jsxs("div",{className:"course-preview-details",children:[e.jsx("span",{className:"title",children:p?.replace(/\s+Part\s+[A-Z]$/i,"").trim()}),g.length>0&&e.jsx("ul",{className:"objective-list",children:g.slice(0,2).map((k,h)=>e.jsx("li",{children:k},h))})]})]},i.code||d)}),n.length>5&&e.jsxs("div",{className:"more-courses",children:["+",n.length-5," more"]})]})]}),e.jsx("div",{className:"auth-section",children:c?e.jsx("p",{className:"auth-loading",children:"Checking sign-in status..."}):a?e.jsxs("div",{className:"auth-signed-in",children:[e.jsxs("span",{className:"user-email",children:["‚úì Signed in as ",a.email]}),e.jsx("button",{className:"start-btn",onClick:u,children:"‚ñ∂ Start Learning"})]}):e.jsxs("div",{className:"auth-prompt",children:[e.jsx("p",{className:"signin-note",children:"Sign in with Google to watch videos from Google Drive"}),e.jsx("button",{className:"signin-btn",onClick:o,children:"üîê Sign in with Google"}),e.jsx("button",{className:"start-btn secondary",onClick:u,children:"Skip sign-in (videos may not load)"})]})})]})}function es({course:s,currentVideos:t,currentVideo:n,videoIndex:l,hasMoreVideos:a,microLesson:c,courses:o,onVideoComplete:u,onExit:i}){const d=n?.drive_id;return e.jsxs("div",{className:"video-stage",children:[e.jsxs("div",{className:"video-header",children:[e.jsx("h3",{children:s.title||s.name}),t.length>1&&e.jsxs("span",{className:"video-counter",children:["Video ",l+1," of ",t.length]}),s.gemini_outcomes?.[0]&&e.jsx("p",{className:"objective",children:s.gemini_outcomes[0]})]}),e.jsx("div",{className:"video-container",children:d?e.jsx("iframe",{src:`https://drive.google.com/file/d/${d}/preview`,title:n.title||s.title,allow:"autoplay",allowFullScreen:!0},d):e.jsxs("div",{className:"video-embed-error",children:[e.jsx("div",{className:"embed-error-icon",children:"üìπ"}),e.jsx("p",{className:"embed-error-title",children:"Video temporarily unavailable"}),e.jsx("p",{className:"embed-error-detail",children:"No video file is associated with this lesson."})]})}),d&&e.jsx("a",{href:`https://drive.google.com/file/d/${d}/view`,target:"_blank",rel:"noopener noreferrer",className:"drive-fallback-link",children:"üîó Video not loading? Open in Google Drive"}),c&&e.jsx(ss,{microLesson:c,courses:o}),e.jsxs("div",{className:"video-controls",children:[e.jsx("button",{className:"complete-btn",onClick:u,children:a?"Mark Complete & Continue ‚Üí":"Complete & Try Exercise ‚Üí"}),e.jsx("button",{className:"exit-btn",onClick:i,children:"Exit Path"})]})]})}function ss({microLesson:s,courses:t}){const[n,l]=f.useState(!1),[a,c]=f.useState("quick_fix"),o=s?.quick_fix,u=s?.why_it_works,i=s?.related_situations,d=p=>{c(k=>k===p?null:p)},g=p=>p?p.replace(/\s*\[\d+(?:[,\s]*\d+)*\]/g,"").trim():null;return e.jsxs("div",{className:`gp-ai-lesson ${n?"open":"collapsed"}`,children:[e.jsxs("button",{className:"gp-ai-lesson-toggle",onClick:()=>l(p=>!p),children:[e.jsx("span",{className:"gp-ai-badge",children:"‚ú® AI Guide"}),e.jsx("span",{className:"gp-ai-subtitle",children:"What to look for"}),e.jsx("span",{className:"gp-ai-chevron",children:n?"‚ñæ":"‚ñ∏"})]}),n&&e.jsxs("div",{className:"gp-ai-body",children:[o&&e.jsxs("div",{className:`gp-ai-section ${a==="quick_fix"?"expanded":""}`,children:[e.jsxs("button",{className:"gp-ai-section-toggle",onClick:()=>d("quick_fix"),children:[e.jsxs("span",{children:["‚ö° ",o.title||"Quick Fix"]}),e.jsx("span",{className:"gp-ai-section-chevron",children:a==="quick_fix"?"‚ñæ":"‚ñ∏"})]}),a==="quick_fix"&&o.steps&&e.jsx("ol",{className:"gp-ai-steps",children:o.steps.map((p,k)=>e.jsx("li",{children:g(p)},k))})]}),u&&e.jsxs("div",{className:`gp-ai-section ${a==="why"?"expanded":""}`,children:[e.jsxs("button",{className:"gp-ai-section-toggle",onClick:()=>d("why"),children:[e.jsx("span",{children:"üß† Why This Works"}),u.key_concept&&e.jsx("span",{className:"gp-ai-concept-tag",children:u.key_concept}),e.jsx("span",{className:"gp-ai-section-chevron",children:a==="why"?"‚ñæ":"‚ñ∏"})]}),a==="why"&&e.jsx("p",{className:"gp-ai-explanation",children:g(u.explanation)})]}),i&&i.length>0&&e.jsxs("div",{className:`gp-ai-section ${a==="related"?"expanded":""}`,children:[e.jsxs("button",{className:"gp-ai-section-toggle",onClick:()=>d("related"),children:[e.jsx("span",{children:"üîó Related Situations"}),e.jsx("span",{className:"gp-ai-count-tag",children:i.length}),e.jsx("span",{className:"gp-ai-section-chevron",children:a==="related"?"‚ñæ":"‚ñ∏"})]}),a==="related"&&e.jsx("div",{className:"gp-ai-scenarios",children:i.map((p,k)=>e.jsxs("div",{className:"gp-ai-scenario",children:[e.jsxs("strong",{children:["üí° ",p.scenario]}),e.jsx("p",{children:g(p.connection)})]},k))})]})]})]})}function ee({course:s,stepNumber:t,totalSteps:n,onComplete:l,onExit:a}){const[c,o]=f.useState(!1),u=s._resourceType==="doc"?"üìñ":"‚ñ∂Ô∏è",i=s._resourceType==="doc"?"Documentation":"YouTube Video",d=s._resourceType==="doc"?"Epic Docs":s._channel||"YouTube",g=s._resourceType!=="doc",p=(()=>{if(!g||!s._url)return null;try{const h=new URL(s._url);if(h.hostname.includes("youtube.com"))return h.searchParams.get("v");if(h.hostname.includes("youtu.be"))return h.pathname.slice(1)}catch{}return null})(),k=h=>{const x=Math.floor(h/60),r=h%60;return`${x}:${r.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"reading-step",children:[e.jsxs("div",{className:"reading-step-header",children:[e.jsxs("span",{className:"reading-step-badge",children:[u," ",i]}),e.jsxs("span",{className:"reading-step-progress",children:["Step ",t," of ",n]})]}),e.jsx("h2",{className:"reading-step-title",children:s.title}),e.jsxs("div",{className:"reading-step-meta",children:[s._tier&&e.jsx("span",{className:`tier-badge tier-${s._tier}`,children:s._tier}),s._channelTrust&&e.jsx("span",{className:`channel-trust-badge trust-${s._channelTrust}`,children:s._channelTrust==="official"?"‚úì Official":"‚≠ê Expert"}),e.jsxs("span",{className:"reading-step-time",children:["‚è± ",s._readTimeMinutes," min ",g?"watch":"read"]})]}),s._topics&&s._topics.length>0&&e.jsx("div",{className:"reading-step-topics",children:s._topics.map((h,x)=>e.jsx("span",{className:"topic-chip",children:h.replace(/_/g," ")},x))}),s._description&&e.jsx("p",{className:"reading-step-description",children:s._description}),p&&e.jsx("div",{className:"reading-step-player",children:e.jsx("iframe",{src:`https://www.youtube-nocookie.com/embed/${p}?rel=0&modestbranding=1`,title:s.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"reading-step-iframe"})}),s._keySteps&&s._keySteps.length>0?e.jsxs("div",{className:"key-steps-section",children:[e.jsx("h3",{className:"key-steps-heading",children:"üéØ Key Takeaways"}),e.jsx("ol",{className:"key-steps-list",children:s._keySteps.map((h,x)=>e.jsx("li",{className:"key-step-item",children:Je(h)},x))})]}):s._description?e.jsxs("div",{className:"key-steps-section key-steps-fallback",children:[e.jsx("h3",{className:"key-steps-heading",children:"üéØ What to Focus On"}),e.jsxs("ul",{className:"key-steps-list",children:[s._sections&&s._sections.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"key-step-item",children:["Read through the ",e.jsx("strong",{children:s.title})," page, focusing on these sections:"]}),s._sections.slice(0,5).map((h,x)=>e.jsxs("li",{className:"key-step-item",children:["üìñ Work through the ",e.jsx("strong",{children:h})," section"]},x))]}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"key-step-item",children:["Understand how ",e.jsx("strong",{children:s.title})," works in UE5"]}),s._topics&&s._topics.length>0&&s._topics.slice(0,2).map((h,x)=>e.jsxs("li",{className:"key-step-item",children:["Pay attention to ",e.jsx("strong",{children:h.replace(/_/g," ")})," concepts and workflows"]},x)),s._subsystem&&e.jsxs("li",{className:"key-step-item",children:["Note how ",e.jsx("strong",{children:s._subsystem})," integrates with the editor"]})]}),e.jsx("li",{className:"key-step-item",children:"Try applying these techniques in your own UE5 project"})]})]}):null,s._chapters&&s._chapters.length>0&&e.jsxs("div",{className:"chapters-section",children:[e.jsx("h3",{className:"chapters-heading",children:"üìë Chapters"}),e.jsx("div",{className:"chapters-list",children:s._chapters.map((h,x)=>e.jsxs("a",{href:p?`https://www.youtube.com/watch?v=${p}&t=${h.seconds}`:"#",target:"_blank",rel:"noopener noreferrer",className:"chapter-item",children:[e.jsx("span",{className:"chapter-time",children:k(h.seconds)}),e.jsx("span",{className:"chapter-label",children:h.label})]},x))})]}),s._seeAlso&&s._seeAlso.length>0&&e.jsxs("div",{className:"see-also-section",children:[e.jsx("h3",{className:"see-also-heading",children:"üîó See Also"}),e.jsx("div",{className:"see-also-links",children:s._seeAlso.map((h,x)=>{const r=ke[h.docKey];return r?e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"see-also-link",title:r.description||h.label,children:["‚Üí ",h.label]},x):null})})]}),e.jsx("div",{className:"reading-step-source",children:e.jsxs("span",{className:"reading-step-source-label",children:["Source: ",d]})}),e.jsxs("a",{href:s._url,target:"_blank",rel:"noopener noreferrer",className:"reading-step-link",onClick:()=>o(!0),children:[s._resourceType==="doc"?"üìÑ Open Documentation":"‚ñ∂Ô∏è Watch on YouTube",e.jsx("span",{className:"reading-step-link-arrow",children:"‚Üó"})]}),e.jsxs("div",{className:"reading-step-actions",children:[e.jsx("button",{className:`reading-step-complete ${c?"ready":""}`,onClick:l,title:c?"Continue to next step":"Mark as read and continue",children:c?"‚úì Read ‚Äî Continue ‚Üí":"Mark as Read ‚Üí Continue"}),e.jsx("button",{className:"reading-step-exit",onClick:a,children:"‚úï Exit Path"})]})]})}ee.propTypes={course:m.object.isRequired,stepNumber:m.number.isRequired,totalSteps:m.number.isRequired,onComplete:m.func.isRequired,onExit:m.func.isRequired};export{P as A,Se as B,X as G,He as S,F as c};
