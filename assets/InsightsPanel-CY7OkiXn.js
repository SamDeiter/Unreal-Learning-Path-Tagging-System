import{j as e,a as j}from"./index-B30vSgDW.js";import{a as u}from"./vendor-cytoscape-hdah7_Xt.js";import{g as b,h as x}from"./data-courses-Cfgu6N5t.js";import"./vendor-firebase-BEnYNivV.js";function N({skillCoverage:m,levels:a,durationBuckets:o,totalCourses:v}){const h=[...m].sort((r,c)=>c.courseCount-r.courseCount),d=h[0]?.courseCount||1,t=a.beginner+a.intermediate+a.advanced,l=r=>t>0?(r/t*100).toFixed(1):"0",p=Object.values(o).reduce((r,c)=>r+c,0)||1,n=r=>(r/p*100).toFixed(1),i=[{label:"< 15 min",count:o.under15,color:"var(--accent-green, #3fb950)"},{label:"15â€“30 min",count:o.under30,color:"var(--accent-blue, #58a6ff)"},{label:"30â€“60 min",count:o.under60,color:"var(--accent-purple, #a371f7)"},{label:"60+ min",count:o.over60,color:"var(--accent-orange, #d29922)"}];return e.jsxs("div",{className:"insights-sidebar",children:[e.jsxs("div",{className:"sidebar-card",children:[e.jsx("h4",{className:"sidebar-card-title",children:"ğŸ“Š Skill Coverage"}),e.jsxs("p",{className:"sidebar-card-subtitle",children:[v," courses scanned"]}),e.jsx("div",{className:"skill-bars",children:h.map(r=>e.jsxs("div",{className:"skill-bar-row",children:[e.jsx("span",{className:"skill-bar-label",children:r.name}),e.jsx("div",{className:"skill-bar-track",children:e.jsx("div",{className:"skill-bar-fill",style:{width:`${r.courseCount/d*100}%`}})}),e.jsx("span",{className:"skill-bar-count",children:r.courseCount})]},r.name))})]}),e.jsxs("div",{className:"sidebar-card",children:[e.jsx("h4",{className:"sidebar-card-title",children:"ğŸ“ Level Distribution"}),e.jsxs("p",{className:"sidebar-card-subtitle",children:[t," courses with levels"]}),e.jsxs("div",{className:"level-stacked-bar",children:[a.beginner>0&&e.jsx("div",{className:"level-segment level-beginner",style:{width:`${l(a.beginner)}%`},title:`Beginner: ${a.beginner} (${l(a.beginner)}%)`}),a.intermediate>0&&e.jsx("div",{className:"level-segment level-intermediate",style:{width:`${l(a.intermediate)}%`},title:`Intermediate: ${a.intermediate} (${l(a.intermediate)}%)`}),a.advanced>0&&e.jsx("div",{className:"level-segment level-advanced",style:{width:`${l(a.advanced)}%`},title:`Advanced: ${a.advanced} (${l(a.advanced)}%)`})]}),e.jsxs("div",{className:"level-legend",children:[e.jsxs("span",{className:"level-legend-item",children:[e.jsx("span",{className:"level-dot level-dot-beginner"}),"Beginner ",e.jsxs("strong",{children:[l(a.beginner),"%"]})]}),e.jsxs("span",{className:"level-legend-item",children:[e.jsx("span",{className:"level-dot level-dot-intermediate"}),"Intermediate ",e.jsxs("strong",{children:[l(a.intermediate),"%"]})]}),e.jsxs("span",{className:"level-legend-item",children:[e.jsx("span",{className:"level-dot level-dot-advanced"}),"Advanced ",e.jsxs("strong",{children:[l(a.advanced),"%"]})]})]})]}),e.jsxs("div",{className:"sidebar-card",children:[e.jsx("h4",{className:"sidebar-card-title",children:"â±ï¸ Duration Breakdown"}),e.jsx("p",{className:"sidebar-card-subtitle",children:"Content format balance"}),e.jsx("div",{className:"duration-bars",children:i.map(r=>e.jsxs("div",{className:"duration-bar-row",children:[e.jsx("span",{className:"duration-bar-label",children:r.label}),e.jsx("div",{className:"duration-bar-track",children:e.jsx("div",{className:"duration-bar-fill",style:{width:`${n(r.count)}%`,background:r.color}})}),e.jsxs("span",{className:"duration-bar-pct",children:[n(r.count),"%"]})]},r.label))})]})]})}function w({onNavigate:m}){const{courses:a}=j(),[o,v]=u.useState(!0),h=u.useMemo(()=>[{name:"Blueprints",keywords:["blueprint","visual scripting","bp"]},{name:"Materials",keywords:["material","shader","texture"]},{name:"Niagara",keywords:["niagara","particle","vfx"]},{name:"Lighting",keywords:["light","lumen","raytracing"]},{name:"Animation",keywords:["animation","skeletal","rigging"]},{name:"UI/UMG",keywords:["ui","umg","widget","hud"]},{name:"Audio",keywords:["audio","sound","metasound"]},{name:"Landscape",keywords:["landscape","terrain","foliage"]}],[]),d=u.useMemo(()=>h.map(n=>{const i=a.filter(r=>{const c=[...r.gemini_system_tags||[],...r.ai_tags||[],r.title||""].map(s=>s.toLowerCase());return n.keywords.some(s=>c.some(g=>g.includes(s)))});return{...n,courseCount:i.length}}),[a,h]),t=u.useMemo(()=>{const n=i=>i.gemini_skill_level?i.gemini_skill_level.toLowerCase():i.tags?.level&&typeof i.tags.level=="string"?i.tags.level.toLowerCase():"";return{beginner:a.filter(i=>n(i).includes("beginner")).length,intermediate:a.filter(i=>n(i).includes("intermediate")).length,advanced:a.filter(i=>n(i).includes("advanced")).length}},[a]),l=u.useMemo(()=>{const n={under15:0,under30:0,under60:0,over60:0};return a.forEach(i=>{const r=i.duration_minutes||0;r<15?n.under15++:r<30?n.under30++:r<60?n.under60++:n.over60++}),n},[a]),p=u.useMemo(()=>{const n=[];d.filter(s=>s.courseCount>0&&s.courseCount<10).sort((s,g)=>s.courseCount-g.courseCount).slice(0,2).forEach(s=>{n.push({type:"gap",icon:"ğŸ“ˆ",title:`${s.name} has limited coverage`,description:`Only ${s.courseCount} courses cover ${s.name}. This may be an opportunity to expand.`,source:`Searched for "${s.keywords.join('", "')}" in course tags and titles`,priority:"medium",skillName:s.name,actionable:!0})}),d.filter(s=>s.courseCount>=15).sort((s,g)=>g.courseCount-s.courseCount).slice(0,1).forEach(s=>{n.push({type:"strength",icon:"âœ…",title:`Strong ${s.name} coverage`,description:`${s.courseCount} courses covering ${s.name}â€”well above average library depth.`,source:`Counted ${s.courseCount} courses matching ${s.name} keywords`,priority:"info",skillName:s.name,actionable:!0})}),t.advanced<5&&t.beginner>20&&n.push({type:"level",icon:"ğŸ“",title:"Advanced content gap",description:`Only ${t.advanced} advanced courses vs ${t.beginner} beginner. Consider creating expert-level content.`,source:`Analyzed gemini_skill_level tags: ${t.beginner} beginner, ${t.intermediate} intermediate, ${t.advanced} advanced`,priority:"medium"});const c=a.filter(s=>(s.duration_minutes||30)<30).length;return c>a.length*.7&&n.push({type:"duration",icon:"â±ï¸",title:"Content format opportunity",description:`${Math.round(c/a.length*100)}% of courses are under 30 min. Consider adding deeper workshop-style content.`,source:`${c} of ${a.length} courses have duration_minutes < 30`,priority:"low"}),b?.insights&&b.insights.forEach(s=>{n.push({type:s.type||"curator",icon:s.icon||"ğŸ¯",title:s.title,description:s.description,source:s.source,priority:s.priority||"medium"})}),x?.insights&&x.insights.forEach(s=>{n.push({type:s.type||"external",icon:s.icon||"ğŸ“Š",title:s.title,description:s.description,source:s.source,priority:s.priority||"low"})}),n.slice(0,8)},[a,d,t]);return p.length===0?null:e.jsxs("div",{className:`insights-panel ${o?"expanded":"collapsed"}`,children:[e.jsxs("div",{className:"insights-header",onClick:()=>v(!o),children:[e.jsxs("h3",{children:["ğŸ’¡ Insights & Recommendations",e.jsx("span",{className:"insight-count",children:p.length})]}),e.jsx("button",{className:"toggle-btn",children:o?"â–¼":"â–¶"})]}),o&&e.jsxs("div",{className:"insights-body",children:[e.jsx("div",{className:"insights-list",children:p.map((n,i)=>e.jsxs("div",{className:`insight-card priority-${n.priority}`,children:[e.jsx("span",{className:"insight-icon",children:n.icon}),e.jsxs("div",{className:"insight-content",children:[e.jsx("strong",{children:n.title}),e.jsx("p",{children:n.description}),n.source&&e.jsxs("span",{className:"insight-source",children:["ğŸ“Š ",n.source]}),n.actionable&&n.skillName&&m&&e.jsxs("div",{className:"insight-actions",children:[e.jsx("button",{className:"insight-action-btn primary",onClick:()=>m("builder",n.skillName),children:"ğŸ¯ Start Path"}),e.jsx("button",{className:"insight-action-btn secondary",onClick:()=>m("builder",n.skillName),children:"ğŸ“š View Courses"})]})]})]},i))}),e.jsx(N,{skillCoverage:d,levels:t,durationBuckets:l,totalCourses:a.length})]})]})}export{w as default};
