import{a as j,j as e}from"./index-C_Ghd4Wp.js";import{a as d}from"./vendor-cytoscape-hdah7_Xt.js";import"./vendor-firebase-BQvzIQYL.js";import"./data-courses-aYLqO-5R.js";function w(){const{courses:o}=j(),[i,m]=d.useState(null),c=d.useMemo(()=>{const s=new Map,l=new Map;return o.forEach(a=>{const n=a.code||a.id||a.title;[...a.gemini_system_tags||[],...a.ai_tags||[],...a.transcript_tags||[],...Object.keys(a.tags||{})].forEach(p=>{const t=p.toLowerCase().trim();if(t&&t.length>2){s.set(t,(s.get(t)||0)+1),l.has(t)||l.set(t,[]);const u=l.get(t);u.find(x=>x.id===n)||u.push({id:n,title:a.title,level:String(a.level||a.difficulty||a.tags?.level||"Beginner"),duration:a.duration})}})}),[...s.entries()].sort((a,n)=>n[1]-a[1]).slice(0,12).map(([a,n])=>({name:a,count:n,courses:l.get(a)||[]}))},[o]),h=["#58a6ff","#a371f7","#3fb950","#f0883e","#f778ba","#db6d28","#768390","#54aeff","#7ee787","#ff9bce","#d2a8ff","#79c0ff"],f=d.useMemo(()=>Math.max(...c.map(s=>s.count),1),[c]),g=s=>{m(i===s?null:s)},r=c.find(s=>s.name===i);return e.jsxs("div",{className:"tag-trends",children:[e.jsxs("div",{className:"trends-header",children:[e.jsxs("h4",{children:["ðŸ“Š Tag Distribution",e.jsxs("span",{className:"info-tooltip",children:["â“˜",e.jsx("span",{className:"tooltip-content",children:"Click any tag to see courses tagged with it"})]})]}),e.jsxs("span",{className:"trends-subtitle",children:["From ",o.length," courses â€¢ Click to drill down"]})]}),e.jsx("div",{className:"trends-bar-chart",children:c.map((s,l)=>e.jsxs("div",{className:`bar-row ${i===s.name?"selected":""}`,onClick:()=>g(s.name),children:[e.jsx("span",{className:"bar-label",title:s.name,children:s.name}),e.jsx("div",{className:"bar-container",children:e.jsx("div",{className:"bar-fill",style:{width:`${s.count/f*100}%`,backgroundColor:h[l%h.length]}})}),e.jsx("span",{className:"bar-value",children:s.count})]},s.name))}),r&&e.jsxs("div",{className:"tag-courses-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h5",{children:['ðŸ“š Courses tagged "',i,'"']}),e.jsx("button",{className:"close-btn",onClick:()=>m(null),children:"Ã—"})]}),e.jsxs("div",{className:"courses-list",children:[r.courses.slice(0,8).map(s=>e.jsxs("div",{className:"course-item",children:[e.jsx("span",{className:"course-title",children:s.title}),e.jsx("span",{className:`course-level ${String(s.level||"").toLowerCase()}`,children:s.level})]},s.id)),r.courses.length>8&&e.jsxs("div",{className:"more-courses",children:["+",r.courses.length-8," more courses"]})]})]})]})}export{w as default};
